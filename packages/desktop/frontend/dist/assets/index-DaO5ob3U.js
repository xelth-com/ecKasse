(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function a(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(r){if(r.ep)return;r.ep=!0;const s=a(r);fetch(r.href,s)}})();const ls=!1;var Sa=Array.isArray,ci=Array.prototype.indexOf,gr=Array.from,Na=Object.defineProperty,Xt=Object.getOwnPropertyDescriptor,cs=Object.getOwnPropertyDescriptors,ui=Object.prototype,di=Array.prototype,hr=Object.getPrototypeOf,Ur=Object.isExtensible;function pa(e){return typeof e=="function"}const pn=()=>{};function fi(e){return e()}function Fa(e){for(var n=0;n<e.length;n++)e[n]()}function vi(){var e,n,a=new Promise((i,r)=>{e=i,n=r});return{promise:a,resolve:e,reject:n}}const Et=2,Cr=4,Ga=8,ka=16,an=32,Tn=64,us=128,Bt=256,ja=512,it=1024,$t=2048,rn=4096,Pt=8192,In=16384,_r=32768,Wa=65536,zr=1<<17,pi=1<<18,yr=1<<19,br=1<<20,dr=1<<21,wr=1<<22,kn=1<<23,Zt=Symbol("$state"),ds=Symbol("legacy props"),xr=new class extends Error{name="StaleReactionError";message="The reaction that called `getAbortSignal()` was re-run or destroyed"};function mi(){throw new Error("https://svelte.dev/e/await_outside_boundary")}function Ka(e){throw new Error("https://svelte.dev/e/lifecycle_outside_component")}function gi(){throw new Error("https://svelte.dev/e/async_derived_orphan")}function hi(e){throw new Error("https://svelte.dev/e/effect_in_teardown")}function Ci(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function _i(e){throw new Error("https://svelte.dev/e/effect_orphan")}function yi(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function bi(e){throw new Error("https://svelte.dev/e/lifecycle_legacy_only")}function wi(e){throw new Error("https://svelte.dev/e/props_invalid_value")}function xi(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function Si(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function ki(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}const Ja=1,Ya=2,fs=4,Li=8,Mi=16,Ei=2,Ai=4,Ti=8,Ii=1,Bi=2,st=Symbol(),Di="http://www.w3.org/1999/xhtml";function $i(){console.warn("https://svelte.dev/e/select_multiple_invalid_value")}let Ri=!1;function vs(e){return e===this.v}function ps(e,n){return e!=e?n==n:e!==n||e!==null&&typeof e=="object"||typeof e=="function"}function ms(e){return!ps(e,this.v)}let oa=!1,Oi=!1;function Pi(){oa=!0}let Ne=null;function Ua(e){Ne=e}function _t(e,n=!1,a){Ne={p:Ne,c:null,e:null,s:e,x:null,l:oa&&!n?{s:null,u:null,$:[]}:null}}function yt(e){var n=Ne,a=n.e;if(a!==null){n.e=null;for(var i of a)Ms(i)}return e!==void 0&&(n.x=e),Ne=n.p,e??{}}function la(){return!oa||Ne!==null&&Ne.l===null}const Ni=new WeakMap;function Fi(e){var n=Me;if(n===null)return Ae.f|=kn,e;if((n.f&_r)===0){if((n.f&us)===0)throw!n.parent&&e instanceof Error&&gs(e),e;n.b.error(e)}else Sr(e,n)}function Sr(e,n){for(;n!==null;){if((n.f&us)!==0)try{n.b.error(e);return}catch(a){e=a}n=n.parent}throw e instanceof Error&&gs(e),e}function gs(e){const n=Ni.get(e);n&&(Na(e,"message",{value:n.message}),Na(e,"stack",{value:n.stack}))}let za=[];function ji(){var e=za;za=[],Fa(e)}function kr(e){za.length===0&&queueMicrotask(ji),za.push(e)}function Ui(){for(var e=Me.b;e!==null&&!e.has_pending_snippet();)e=e.parent;return e===null&&mi(),e}function Lr(e){var n=Et|$t,a=Ae!==null&&(Ae.f&Et)!==0?Ae:null;return Me===null||a!==null&&(a.f&Bt)!==0?n|=Bt:Me.f|=yr,{ctx:Ne,deps:null,effects:null,equals:vs,f:n,fn:e,reactions:null,rv:0,v:st,wv:0,parent:a??Me,ac:null}}function zi(e,n){let a=Me;a===null&&gi();var i=a.b,r=void 0,s=ya(st),o=null,u=!Ae;return to(()=>{try{var l=e()}catch(h){l=Promise.reject(h)}var c=()=>l;r=o?.then(c,c)??Promise.resolve(l),o=r;var C=Pe,p=i.pending;u&&(i.update_pending_count(1),p||C.increment());const S=(h,_=void 0)=>{o=null,p||C.activate(),_?_!==xr&&(s.f|=kn,na(s,_)):((s.f&kn)!==0&&(s.f^=kn),na(s,h)),u&&(i.update_pending_count(-1),p||C.decrement()),_s()};if(r.then(S,h=>S(null,h||"unknown")),C)return()=>{queueMicrotask(()=>C.neuter())}}),new Promise(l=>{function c(C){function p(){C===r?l(s):c(r)}C.then(p,p)}c(r)})}function pt(e){const n=Lr(e);return n.equals=ms,n}function hs(e){var n=e.effects;if(n!==null){e.effects=null;for(var a=0;a<n.length;a+=1)en(n[a])}}function Zi(e){for(var n=e.parent;n!==null;){if((n.f&Et)===0)return n;n=n.parent}return null}function Mr(e){var n,a=Me;gn(Zi(e));try{hs(e),n=Ns(e)}finally{gn(a)}return n}function Cs(e){var n=Mr(e);if(e.equals(n)||(e.v=n,e.wv=Os()),!Dn)if(ea!==null)ea.set(e,e.v);else{var a=(vn||(e.f&Bt)!==0)&&e.deps!==null?rn:it;gt(e,a)}}function Vi(e,n,a){const i=la()?Lr:pt;if(n.length===0){a(e.map(i));return}var r=Pe,s=Me,o=qi(),u=Ui();Promise.all(n.map(l=>zi(l))).then(l=>{r?.activate(),o();try{a([...e.map(i),...l])}catch(c){(s.f&In)===0&&Sr(c,s)}r?.deactivate(),_s()}).catch(l=>{u.error(l)})}function qi(){var e=Me,n=Ae,a=Ne;return function(){gn(e),qt(n),Ua(a)}}function _s(){gn(null),qt(null),Ua(null)}const ma=new Set;let Pe=null,Pa=null,ea=null,Zr=new Set,Za=[];function ys(){const e=Za.shift();Za.length>0&&queueMicrotask(ys),e()}let _a=[],Er=null,fr=!1;class ta{current=new Map;#e=new Map;#n=new Set;#t=0;#r=null;#u=!1;#s=[];#o=[];#i=[];#a=[];#l=[];#d=[];#f=[];skipped_effects=new Set;process(n){_a=[],Pa=null;var a=null;if(ma.size>1){a=new Map,ea=new Map;for(const[s,o]of this.current)a.set(s,{v:s.v,wv:s.wv}),s.v=o;for(const s of ma)if(s!==this)for(const[o,u]of s.#e)a.has(o)||(a.set(o,{v:o.v,wv:o.wv}),o.v=u)}for(const s of n)this.#p(s);if(this.#s.length===0&&this.#t===0){this.#v();var i=this.#i,r=this.#a;this.#i=[],this.#a=[],this.#l=[],Pa=Pe,Pe=null,Vr(i),Vr(r),Pe===null?Pe=this:ma.delete(this),this.#r?.resolve()}else this.#c(this.#i),this.#c(this.#a),this.#c(this.#l);if(a){for(const[s,{v:o,wv:u}]of a)s.wv<=u&&(s.v=o);ea=null}for(const s of this.#s)Qn(s);for(const s of this.#o)Qn(s);this.#s=[],this.#o=[]}#p(n){n.f^=it;for(var a=n.first;a!==null;){var i=a.f,r=(i&(an|Tn))!==0,s=r&&(i&it)!==0,o=s||(i&Pt)!==0||this.skipped_effects.has(a);if(!o&&a.fn!==null){if(r)a.f^=it;else if((i&it)===0)if((i&Cr)!==0)this.#a.push(a);else if((i&wr)!==0){var u=a.b?.pending?this.#o:this.#s;u.push(a)}else La(a)&&((a.f&ka)!==0&&this.#l.push(a),Qn(a));var l=a.first;if(l!==null){a=l;continue}}var c=a.parent;for(a=a.next;a===null&&c!==null;)a=c.next,c=c.parent}}#c(n){for(const a of n)((a.f&$t)!==0?this.#d:this.#f).push(a),gt(a,it);n.length=0}capture(n,a){this.#e.has(n)||this.#e.set(n,a),this.current.set(n,n.v)}activate(){Pe=this}deactivate(){Pe=null,Pa=null;for(const n of Zr)if(Zr.delete(n),n(),Pe!==null)break}neuter(){this.#u=!0}flush(){_a.length>0?Hi():this.#v(),Pe===this&&(this.#t===0&&ma.delete(this),this.deactivate())}#v(){if(!this.#u)for(const n of this.#n)n();this.#n.clear()}increment(){this.#t+=1}decrement(){if(this.#t-=1,this.#t===0){for(const n of this.#d)gt(n,$t),En(n);for(const n of this.#f)gt(n,rn),En(n);this.#i=[],this.#a=[],this.flush()}else this.deactivate()}add_callback(n){this.#n.add(n)}settled(){return(this.#r??=vi()).promise}static ensure(){if(Pe===null){const n=Pe=new ta;ma.add(Pe),ta.enqueue(()=>{Pe===n&&n.flush()})}return Pe}static enqueue(n){Za.length===0&&queueMicrotask(ys),Za.unshift(n)}}function Hi(){var e=Xn;fr=!0;try{var n=0;for(Gr(!0);_a.length>0;){var a=ta.ensure();if(n++>1e3){var i,r;Gi()}a.process(_a),Ln.clear()}}finally{fr=!1,Gr(e),Er=null}}function Gi(){try{yi()}catch(e){Sr(e,Er)}}function Vr(e){var n=e.length;if(n!==0){for(var a=0;a<n;){var i=e[a++];if((i.f&(In|Pt))===0&&La(i)){var r=Pe?Pe.current.size:0;if(Qn(i),i.deps===null&&i.first===null&&i.nodes_start===null&&(i.teardown===null&&i.ac===null?Is(i):i.fn=null),Pe!==null&&Pe.current.size>r&&(i.f&br)!==0)break}}for(;a<n;)En(e[a++])}}function En(e){for(var n=Er=e;n.parent!==null;){n=n.parent;var a=n.f;if(fr&&n===Me&&(a&ka)!==0)return;if((a&(Tn|an))!==0){if((a&it)===0)return;n.f^=it}}_a.push(n)}const Ln=new Map;function ya(e,n){var a={f:0,v:e,reactions:null,equals:vs,rv:0,wv:0};return a}function dn(e,n){const a=ya(e);return ro(a),a}function K(e,n=!1,a=!0){const i=ya(e);return n||(i.equals=ms),oa&&a&&Ne!==null&&Ne.l!==null&&(Ne.l.s??=[]).push(i),i}function He(e,n){return g(e,x(()=>t(e))),n}function g(e,n,a=!1){Ae!==null&&(!Ut||(Ae.f&zr)!==0)&&la()&&(Ae.f&(Et|ka|wr|zr))!==0&&!Qt?.includes(e)&&ki();let i=a?Jn(n):n;return na(e,i)}function na(e,n){if(!e.equals(n)){var a=e.v;Dn?Ln.set(e,n):Ln.set(e,a),e.v=n;var i=ta.ensure();i.capture(e,a),(e.f&Et)!==0&&((e.f&$t)!==0&&Mr(e),gt(e,(e.f&Bt)===0?it:rn)),e.wv=Os(),bs(e,$t),la()&&Me!==null&&(Me.f&it)!==0&&(Me.f&(an|Tn))===0&&(It===null?so([e]):It.push(e))}return n}function or(e){g(e,e.v+1)}function bs(e,n){var a=e.reactions;if(a!==null)for(var i=la(),r=a.length,s=0;s<r;s++){var o=a[s],u=o.f;if(!(!i&&o===Me)){var l=(u&$t)===0;l&&gt(o,n),(u&Et)!==0?bs(o,rn):l&&En(o)}}}function Jn(e){if(typeof e!="object"||e===null||Zt in e)return e;const n=hr(e);if(n!==ui&&n!==di)return e;var a=new Map,i=Sa(e),r=dn(0),s=Mn,o=u=>{if(Mn===s)return u();var l=Ae,c=Mn;qt(null),Kr(s);var C=u();return qt(l),Kr(c),C};return i&&a.set("length",dn(e.length)),new Proxy(e,{defineProperty(u,l,c){(!("value"in c)||c.configurable===!1||c.enumerable===!1||c.writable===!1)&&xi();var C=a.get(l);return C===void 0?C=o(()=>{var p=dn(c.value);return a.set(l,p),p}):g(C,c.value,!0),!0},deleteProperty(u,l){var c=a.get(l);if(c===void 0){if(l in u){const C=o(()=>dn(st));a.set(l,C),or(r)}}else g(c,st),or(r);return!0},get(u,l,c){if(l===Zt)return e;var C=a.get(l),p=l in u;if(C===void 0&&(!p||Xt(u,l)?.writable)&&(C=o(()=>{var h=Jn(p?u[l]:st),_=dn(h);return _}),a.set(l,C)),C!==void 0){var S=t(C);return S===st?void 0:S}return Reflect.get(u,l,c)},getOwnPropertyDescriptor(u,l){var c=Reflect.getOwnPropertyDescriptor(u,l);if(c&&"value"in c){var C=a.get(l);C&&(c.value=t(C))}else if(c===void 0){var p=a.get(l),S=p?.v;if(p!==void 0&&S!==st)return{enumerable:!0,configurable:!0,value:S,writable:!0}}return c},has(u,l){if(l===Zt)return!0;var c=a.get(l),C=c!==void 0&&c.v!==st||Reflect.has(u,l);if(c!==void 0||Me!==null&&(!C||Xt(u,l)?.writable)){c===void 0&&(c=o(()=>{var S=C?Jn(u[l]):st,h=dn(S);return h}),a.set(l,c));var p=t(c);if(p===st)return!1}return C},set(u,l,c,C){var p=a.get(l),S=l in u;if(i&&l==="length")for(var h=c;h<p.v;h+=1){var _=a.get(h+"");_!==void 0?g(_,st):h in u&&(_=o(()=>dn(st)),a.set(h+"",_))}if(p===void 0)(!S||Xt(u,l)?.writable)&&(p=o(()=>dn(void 0)),g(p,Jn(c)),a.set(l,p));else{S=p.v!==st;var E=o(()=>Jn(c));g(p,E)}var A=Reflect.getOwnPropertyDescriptor(u,l);if(A?.set&&A.set.call(C,c),!S){if(i&&typeof l=="string"){var q=a.get("length"),H=Number(l);Number.isInteger(H)&&H>=q.v&&g(q,H+1)}or(r)}return!0},ownKeys(u){t(r);var l=Reflect.ownKeys(u).filter(p=>{var S=a.get(p);return S===void 0||S.v!==st});for(var[c,C]of a)C.v!==st&&!(c in u)&&l.push(c);return l},setPrototypeOf(){Si()}})}function qr(e){try{if(e!==null&&typeof e=="object"&&Zt in e)return e[Zt]}catch{}return e}function Wi(e,n){return Object.is(qr(e),qr(n))}var ba,ws,xs,Ss;function Ki(){if(ba===void 0){ba=window,ws=/Firefox/.test(navigator.userAgent);var e=Element.prototype,n=Node.prototype,a=Text.prototype;xs=Xt(n,"firstChild").get,Ss=Xt(n,"nextSibling").get,Ur(e)&&(e.__click=void 0,e.__className=void 0,e.__attributes=null,e.__style=void 0,e.__e=void 0),Ur(a)&&(a.__t=void 0)}}function Bn(e=""){return document.createTextNode(e)}function zt(e){return xs.call(e)}function Xa(e){return Ss.call(e)}function f(e,n){return zt(e)}function we(e,n){{var a=zt(e);return a instanceof Comment&&a.data===""?Xa(a):a}}function b(e,n=1,a=!1){let i=e;for(;n--;)i=Xa(i);return i}function Ji(e){e.textContent=""}function Ar(){return!1}let Hr=!1;function Yi(){Hr||(Hr=!0,document.addEventListener("reset",e=>{Promise.resolve().then(()=>{if(!e.defaultPrevented)for(const n of e.target.elements)n.__on_r?.()})},{capture:!0}))}function Qa(e){var n=Ae,a=Me;qt(null),gn(null);try{return e()}finally{qt(n),gn(a)}}function ks(e,n,a,i=a){e.addEventListener(n,()=>Qa(a));const r=e.__on_r;r?e.__on_r=()=>{r(),i(!0)}:e.__on_r=()=>i(!0),Yi()}function Ls(e){Me===null&&Ae===null&&_i(),Ae!==null&&(Ae.f&Bt)!==0&&Me===null&&Ci(),Dn&&hi()}function Xi(e,n){var a=n.last;a===null?n.last=n.first=e:(a.next=e,e.prev=a,n.last=e)}function Ht(e,n,a,i=!0){var r=Me;r!==null&&(r.f&Pt)!==0&&(e|=Pt);var s={ctx:Ne,deps:null,nodes_start:null,nodes_end:null,f:e|$t,first:null,fn:n,last:null,next:null,parent:r,b:r&&r.b,prev:null,teardown:null,transitions:null,wv:0,ac:null};if(a)try{Qn(s),s.f|=_r}catch(l){throw en(s),l}else n!==null&&En(s);var o=a&&s.deps===null&&s.first===null&&s.nodes_start===null&&s.teardown===null&&(s.f&yr)===0;if(!o&&i&&(r!==null&&Xi(s,r),Ae!==null&&(Ae.f&Et)!==0&&(e&Tn)===0)){var u=Ae;(u.effects??=[]).push(s)}return s}function er(e){const n=Ht(Ga,null,!1);return gt(n,it),n.teardown=e,n}function vr(e){Ls();var n=Me.f,a=!Ae&&(n&an)!==0&&(n&_r)===0;if(a){var i=Ne;(i.e??=[]).push(e)}else return Ms(e)}function Ms(e){return Ht(Cr|br,e,!1)}function Qi(e){return Ls(),Ht(Ga|br,e,!0)}function eo(e){ta.ensure();const n=Ht(Tn,e,!0);return(a={})=>new Promise(i=>{a.outro?nr(n,()=>{en(n),i(void 0)}):(en(n),i(void 0))})}function Tr(e){return Ht(Cr,e,!1)}function qe(e,n){var a=Ne,i={effect:null,ran:!1,deps:e};a.l.$.push(i),i.effect=tr(()=>{e(),!i.ran&&(i.ran=!0,x(n))})}function hn(){var e=Ne;tr(()=>{for(var n of e.l.$){n.deps();var a=n.effect;(a.f&it)!==0&&gt(a,rn),La(a)&&Qn(a),n.ran=!1}})}function to(e){return Ht(wr|yr,e,!0)}function tr(e,n=0){return Ht(Ga|n,e,!0)}function ce(e,n=[],a=[]){Vi(n,a,i=>{Ht(Ga,()=>e(...i.map(t)),!0)})}function Ir(e,n=0){var a=Ht(ka|n,e,!0);return a}function aa(e,n=!0){return Ht(an,e,!0,n)}function Es(e){var n=e.teardown;if(n!==null){const a=Dn,i=Ae;Wr(!0),qt(null);try{n.call(null)}finally{Wr(a),qt(i)}}}function As(e,n=!1){var a=e.first;for(e.first=e.last=null;a!==null;){const r=a.ac;r!==null&&Qa(()=>{r.abort(xr)});var i=a.next;(a.f&Tn)!==0?a.parent=null:en(a,n),a=i}}function no(e){for(var n=e.first;n!==null;){var a=n.next;(n.f&an)===0&&en(n),n=a}}function en(e,n=!0){var a=!1;(n||(e.f&pi)!==0)&&e.nodes_start!==null&&e.nodes_end!==null&&(Ts(e.nodes_start,e.nodes_end),a=!0),As(e,n&&!a),Va(e,0),gt(e,In);var i=e.transitions;if(i!==null)for(const s of i)s.stop();Es(e);var r=e.parent;r!==null&&r.first!==null&&Is(e),e.next=e.prev=e.teardown=e.ctx=e.deps=e.fn=e.nodes_start=e.nodes_end=e.ac=null}function Ts(e,n){for(;e!==null;){var a=e===n?null:Xa(e);e.remove(),e=a}}function Is(e){var n=e.parent,a=e.prev,i=e.next;a!==null&&(a.next=i),i!==null&&(i.prev=a),n!==null&&(n.first===e&&(n.first=i),n.last===e&&(n.last=a))}function nr(e,n){var a=[];Br(e,a,!0),Bs(a,()=>{en(e),n&&n()})}function Bs(e,n){var a=e.length;if(a>0){var i=()=>--a||n();for(var r of e)r.out(i)}else n()}function Br(e,n,a){if((e.f&Pt)===0){if(e.f^=Pt,e.transitions!==null)for(const o of e.transitions)(o.is_global||a)&&n.push(o);for(var i=e.first;i!==null;){var r=i.next,s=(i.f&Wa)!==0||(i.f&an)!==0;Br(i,n,s?a:!1),i=r}}}function Dr(e){Ds(e,!0)}function Ds(e,n){if((e.f&Pt)!==0){e.f^=Pt,(e.f&it)===0&&(gt(e,$t),En(e));for(var a=e.first;a!==null;){var i=a.next,r=(a.f&Wa)!==0||(a.f&an)!==0;Ds(a,r?n:!1),a=i}if(e.transitions!==null)for(const s of e.transitions)(s.is_global||n)&&s.in()}}let Kn=null;function ao(e){var n=Kn;try{if(Kn=new Set,x(e),n!==null)for(var a of Kn)n.add(a);return Kn}finally{Kn=n}}function $s(e){for(var n of ao(e))na(n,n.v)}let Xn=!1;function Gr(e){Xn=e}let Dn=!1;function Wr(e){Dn=e}let Ae=null,Ut=!1;function qt(e){Ae=e}let Me=null;function gn(e){Me=e}let Qt=null;function ro(e){Ae!==null&&(Qt===null?Qt=[e]:Qt.push(e))}let mt=null,Lt=0,It=null;function so(e){It=e}let Rs=1,wa=0,Mn=wa;function Kr(e){Mn=e}let vn=!1;function Os(){return++Rs}function La(e){var n=e.f;if((n&$t)!==0)return!0;if((n&rn)!==0){var a=e.deps,i=(n&Bt)!==0;if(a!==null){var r,s,o=(n&ja)!==0,u=i&&Me!==null&&!vn,l=a.length;if((o||u)&&(Me===null||(Me.f&In)===0)){var c=e,C=c.parent;for(r=0;r<l;r++)s=a[r],(o||!s?.reactions?.includes(c))&&(s.reactions??=[]).push(c);o&&(c.f^=ja),u&&C!==null&&(C.f&Bt)===0&&(c.f^=Bt)}for(r=0;r<l;r++)if(s=a[r],La(s)&&Cs(s),s.wv>e.wv)return!0}(!i||Me!==null&&!vn)&&gt(e,it)}return!1}function Ps(e,n,a=!0){var i=e.reactions;if(i!==null&&!Qt?.includes(e))for(var r=0;r<i.length;r++){var s=i[r];(s.f&Et)!==0?Ps(s,n,!1):n===s&&(a?gt(s,$t):(s.f&it)!==0&&gt(s,rn),En(s))}}function Ns(e){var n=mt,a=Lt,i=It,r=Ae,s=vn,o=Qt,u=Ne,l=Ut,c=Mn,C=e.f;mt=null,Lt=0,It=null,vn=(C&Bt)!==0&&(Ut||!Xn||Ae===null),Ae=(C&(an|Tn))===0?e:null,Qt=null,Ua(e.ctx),Ut=!1,Mn=++wa,e.ac!==null&&(Qa(()=>{e.ac.abort(xr)}),e.ac=null);try{e.f|=dr;var p=e.fn,S=p(),h=e.deps;if(mt!==null){var _;if(Va(e,Lt),h!==null&&Lt>0)for(h.length=Lt+mt.length,_=0;_<mt.length;_++)h[Lt+_]=mt[_];else e.deps=h=mt;if(!vn||(C&Et)!==0&&e.reactions!==null)for(_=Lt;_<h.length;_++)(h[_].reactions??=[]).push(e)}else h!==null&&Lt<h.length&&(Va(e,Lt),h.length=Lt);if(la()&&It!==null&&!Ut&&h!==null&&(e.f&(Et|rn|$t))===0)for(_=0;_<It.length;_++)Ps(It[_],e);return r!==null&&r!==e&&(wa++,It!==null&&(i===null?i=It:i.push(...It))),(e.f&kn)!==0&&(e.f^=kn),S}catch(E){return Fi(E)}finally{e.f^=dr,mt=n,Lt=a,It=i,Ae=r,vn=s,Qt=o,Ua(u),Ut=l,Mn=c}}function io(e,n){let a=n.reactions;if(a!==null){var i=ci.call(a,e);if(i!==-1){var r=a.length-1;r===0?a=n.reactions=null:(a[i]=a[r],a.pop())}}a===null&&(n.f&Et)!==0&&(mt===null||!mt.includes(n))&&(gt(n,rn),(n.f&(Bt|ja))===0&&(n.f^=ja),hs(n),Va(n,0))}function Va(e,n){var a=e.deps;if(a!==null)for(var i=n;i<a.length;i++)io(e,a[i])}function Qn(e){var n=e.f;if((n&In)===0){gt(e,it);var a=Me,i=Xn;Me=e,Xn=!0;try{(n&ka)!==0?no(e):As(e),Es(e);var r=Ns(e);e.teardown=typeof r=="function"?r:null,e.wv=Rs;var s;ls&&Oi&&(e.f&$t)!==0&&e.deps}finally{Xn=i,Me=a}}}function t(e){var n=e.f,a=(n&Et)!==0;if(Kn?.add(e),Ae!==null&&!Ut){var i=Me!==null&&(Me.f&In)!==0;if(!i&&!Qt?.includes(e)){var r=Ae.deps;if((Ae.f&dr)!==0)e.rv<wa&&(e.rv=wa,mt===null&&r!==null&&r[Lt]===e?Lt++:mt===null?mt=[e]:(!vn||!mt.includes(e))&&mt.push(e));else{(Ae.deps??=[]).push(e);var s=e.reactions;s===null?e.reactions=[Ae]:s.includes(Ae)||s.push(Ae)}}}else if(a&&e.deps===null&&e.effects===null){var o=e,u=o.parent;u!==null&&(u.f&Bt)===0&&(o.f^=Bt)}if(Dn){if(Ln.has(e))return Ln.get(e);if(a){o=e;var l=o.v;return((o.f&it)===0&&o.reactions!==null||Fs(o))&&(l=Mr(o)),Ln.set(o,l),l}}else if(a){if(o=e,ea?.has(o))return ea.get(o);La(o)&&Cs(o)}if((e.f&kn)!==0)throw e.v;return e.v}function Fs(e){if(e.v===st)return!0;if(e.deps===null)return!1;for(const n of e.deps)if(Ln.has(n)||(n.f&Et)!==0&&Fs(n))return!0;return!1}function x(e){var n=Ut;try{return Ut=!0,e()}finally{Ut=n}}const oo=-7169;function gt(e,n){e.f=e.f&oo|n}function V(e){if(!(typeof e!="object"||!e||e instanceof EventTarget)){if(Zt in e)pr(e);else if(!Array.isArray(e))for(let n in e){const a=e[n];typeof a=="object"&&a&&Zt in a&&pr(a)}}}function pr(e,n=new Set){if(typeof e=="object"&&e!==null&&!(e instanceof EventTarget)&&!n.has(e)){n.add(e),e instanceof Date&&e.getTime();for(let i in e)try{pr(e[i],n)}catch{}const a=hr(e);if(a!==Object.prototype&&a!==Array.prototype&&a!==Map.prototype&&a!==Set.prototype&&a!==Date.prototype){const i=cs(a);for(let r in i){const s=i[r].get;if(s)try{s.call(e)}catch{}}}}}const lo=["touchstart","touchmove"];function co(e){return lo.includes(e)}const uo=new Set,Jr=new Set;function fo(e,n,a,i={}){function r(s){if(i.capture||ga.call(n,s),!s.cancelBubble)return Qa(()=>a?.call(this,s))}return e.startsWith("pointer")||e.startsWith("touch")||e==="wheel"?kr(()=>{n.addEventListener(e,r,i)}):n.addEventListener(e,r,i),r}function ae(e,n,a,i,r){var s={capture:i,passive:r},o=fo(e,n,a,s);(n===document.body||n===window||n===document||n instanceof HTMLMediaElement)&&er(()=>{n.removeEventListener(e,o,s)})}let Yr=null;function ga(e){var n=this,a=n.ownerDocument,i=e.type,r=e.composedPath?.()||[],s=r[0]||e.target;Yr=e;var o=0,u=Yr===e&&e.__root;if(u){var l=r.indexOf(u);if(l!==-1&&(n===document||n===window)){e.__root=n;return}var c=r.indexOf(n);if(c===-1)return;l<=c&&(o=l)}if(s=r[o]||e.target,s!==n){Na(e,"currentTarget",{configurable:!0,get(){return s||a}});var C=Ae,p=Me;qt(null),gn(null);try{for(var S,h=[];s!==null;){var _=s.assignedSlot||s.parentNode||s.host||null;try{var E=s["__"+i];if(E!=null&&(!s.disabled||e.target===s))if(Sa(E)){var[A,...q]=E;A.apply(s,[e,...q])}else E.call(s,e)}catch(H){S?h.push(H):S=H}if(e.cancelBubble||_===n||_===null)break;s=_}if(S){for(let H of h)queueMicrotask(()=>{throw H});throw S}}finally{e.__root=n,delete e.currentTarget,qt(C),gn(p)}}}function $r(e){var n=document.createElement("template");return n.innerHTML=e.replaceAll("<!>","<!---->"),n.content}function ra(e,n){var a=Me;a.nodes_start===null&&(a.nodes_start=e,a.nodes_end=n)}function U(e,n){var a=(n&Ii)!==0,i=(n&Bi)!==0,r,s=!e.startsWith("<!>");return()=>{r===void 0&&(r=$r(s?e:"<!>"+e),a||(r=zt(r)));var o=i||ws?document.importNode(r,!0):r.cloneNode(!0);if(a){var u=zt(o),l=o.lastChild;ra(u,l)}else ra(o,o);return o}}function vo(e,n,a="svg"){var i=!e.startsWith("<!>"),r=`<${a}>${i?e:"<!>"+e}</${a}>`,s;return()=>{if(!s){var o=$r(r),u=zt(o);s=zt(u)}var l=s.cloneNode(!0);return ra(l,l),l}}function Rr(e,n){return vo(e,n,"svg")}function Vt(e=""){{var n=Bn(e+"");return ra(n,n),n}}function Be(){var e=document.createDocumentFragment(),n=document.createComment(""),a=Bn();return e.append(n,a),ra(n,a),e}function M(e,n){e!==null&&e.before(n)}function ie(e,n){var a=n==null?"":typeof n=="object"?n+"":n;a!==(e.__t??=e.nodeValue)&&(e.__t=a,e.nodeValue=a+"")}function po(e,n){return mo(e,n)}const Hn=new Map;function mo(e,{target:n,anchor:a,props:i={},events:r,context:s,intro:o=!0}){Ki();var u=new Set,l=p=>{for(var S=0;S<p.length;S++){var h=p[S];if(!u.has(h)){u.add(h);var _=co(h);n.addEventListener(h,ga,{passive:_});var E=Hn.get(h);E===void 0?(document.addEventListener(h,ga,{passive:_}),Hn.set(h,1)):Hn.set(h,E+1)}}};l(gr(uo)),Jr.add(l);var c=void 0,C=eo(()=>{var p=a??n.appendChild(Bn());return aa(()=>{if(s){_t({});var S=Ne;S.c=s}r&&(i.$$events=r),c=e(p,i)||{},s&&yt()}),()=>{for(var S of u){n.removeEventListener(S,ga);var h=Hn.get(S);--h===0?(document.removeEventListener(S,ga),Hn.delete(S)):Hn.set(S,h)}Jr.delete(l),p!==a&&p.parentNode?.removeChild(p)}});return go.set(c,C),c}let go=new WeakMap;function X(e,n,a=!1){var i=e,r=null,s=null,o=st,u=a?Wa:0,l=!1;const c=(h,_=!0)=>{l=!0,S(_,h)};var C=null;function p(){C!==null&&(C.lastChild.remove(),i.before(C),C=null);var h=o?r:s,_=o?s:r;h&&Dr(h),_&&nr(_,()=>{o?s=null:r=null})}const S=(h,_)=>{if(o!==(o=h)){var E=Ar(),A=i;if(E&&(C=document.createDocumentFragment(),C.append(A=Bn())),o?r??=_&&aa(()=>_(A)):s??=_&&aa(()=>_(A)),E){var q=Pe,H=o?r:s,v=o?s:r;H&&q.skipped_effects.delete(H),v&&q.skipped_effects.add(v),q.add_callback(p)}else p()}};Ir(()=>{l=!1,n(c),l||S(null,null)},u)}function xa(e,n){return n}function ho(e,n,a){for(var i=e.items,r=[],s=n.length,o=0;o<s;o++)Br(n[o].e,r,!0);var u=s>0&&r.length===0&&a!==null;if(u){var l=a.parentNode;Ji(l),l.append(a),i.clear(),Ft(e,n[0].prev,n[s-1].next)}Bs(r,()=>{for(var c=0;c<s;c++){var C=n[c];u||(i.delete(C.k),Ft(e,C.prev,C.next)),en(C.e,!u)}})}function Dt(e,n,a,i,r,s=null){var o=e,u={flags:n,items:new Map,first:null},l=(n&fs)!==0;if(l){var c=e;o=c.appendChild(Bn())}var C=null,p=!1,S=new Map,h=pt(()=>{var q=a();return Sa(q)?q:q==null?[]:gr(q)}),_,E;function A(){Co(E,_,u,S,o,r,n,i,a),s!==null&&(_.length===0?C?Dr(C):C=aa(()=>s(o)):C!==null&&nr(C,()=>{C=null}))}Ir(()=>{E??=Me,_=t(h);var q=_.length;if(!(p&&q===0)){p=q===0;var H,v,D,L;if(Ar()){var y=new Set,d=Pe;for(v=0;v<q;v+=1){D=_[v],L=i(D,v);var I=u.items.get(L)??S.get(L);I?(n&(Ja|Ya))!==0&&js(I,D,v,n):(H=Us(null,u,null,null,D,L,v,r,n,a,!0),S.set(L,H)),y.add(L)}for(const[Y,P]of u.items)y.has(Y)||d.skipped_effects.add(P.e);d.add_callback(A)}else A();t(h)}})}function Co(e,n,a,i,r,s,o,u,l){var c=(o&Li)!==0,C=(o&(Ja|Ya))!==0,p=n.length,S=a.items,h=a.first,_=h,E,A=null,q,H=[],v=[],D,L,y,d;if(c)for(d=0;d<p;d+=1)D=n[d],L=u(D,d),y=S.get(L),y!==void 0&&(y.a?.measure(),(q??=new Set).add(y));for(d=0;d<p;d+=1){if(D=n[d],L=u(D,d),y=S.get(L),y===void 0){var I=i.get(L);if(I!==void 0){i.delete(L),S.set(L,I);var Y=A?A.next:_;Ft(a,A,I),Ft(a,I,Y),lr(I,Y,r),A=I}else{var P=_?_.e.nodes_start:r;A=Us(P,a,A,A===null?a.first:A.next,D,L,d,s,o,l)}S.set(L,A),H=[],v=[],_=A.next;continue}if(C&&js(y,D,d,o),(y.e.f&Pt)!==0&&(Dr(y.e),c&&(y.a?.unfix(),(q??=new Set).delete(y))),y!==_){if(E!==void 0&&E.has(y)){if(H.length<v.length){var W=v[0],J;A=W.prev;var T=H[0],ne=H[H.length-1];for(J=0;J<H.length;J+=1)lr(H[J],W,r);for(J=0;J<v.length;J+=1)E.delete(v[J]);Ft(a,T.prev,ne.next),Ft(a,A,T),Ft(a,ne,W),_=W,A=ne,d-=1,H=[],v=[]}else E.delete(y),lr(y,_,r),Ft(a,y.prev,y.next),Ft(a,y,A===null?a.first:A.next),Ft(a,A,y),A=y;continue}for(H=[],v=[];_!==null&&_.k!==L;)(_.e.f&Pt)===0&&(E??=new Set).add(_),v.push(_),_=_.next;if(_===null)continue;y=_}H.push(y),A=y,_=y.next}if(_!==null||E!==void 0){for(var z=E===void 0?[]:gr(E);_!==null;)(_.e.f&Pt)===0&&z.push(_),_=_.next;var j=z.length;if(j>0){var Ee=(o&fs)!==0&&p===0?r:null;if(c){for(d=0;d<j;d+=1)z[d].a?.measure();for(d=0;d<j;d+=1)z[d].a?.fix()}ho(a,z,Ee)}}c&&kr(()=>{if(q!==void 0)for(y of q)y.a?.apply()}),e.first=a.first&&a.first.e,e.last=A&&A.e;for(var ke of i.values())en(ke.e);i.clear()}function js(e,n,a,i){(i&Ja)!==0&&na(e.v,n),(i&Ya)!==0?na(e.i,a):e.i=a}function Us(e,n,a,i,r,s,o,u,l,c,C){var p=(l&Ja)!==0,S=(l&Mi)===0,h=p?S?K(r,!1,!1):ya(r):r,_=(l&Ya)===0?o:ya(o),E={i:_,v:h,k:s,a:null,e:null,prev:a,next:i};try{if(e===null){var A=document.createDocumentFragment();A.append(e=Bn())}return E.e=aa(()=>u(e,h,_,c),Ri),E.e.prev=a&&a.e,E.e.next=i&&i.e,a===null?C||(n.first=E):(a.next=E,a.e.next=E.e),i!==null&&(i.prev=E,i.e.prev=E.e),E}finally{}}function lr(e,n,a){for(var i=e.next?e.next.e.nodes_start:a,r=n?n.e.nodes_start:a,s=e.e.nodes_start;s!==null&&s!==i;){var o=Xa(s);r.before(s),s=o}}function Ft(e,n,a){n===null?e.first=a:(n.next=a,n.e.next=a&&a.e),a!==null&&(a.prev=n,a.e.prev=n&&n.e)}function Xr(e,n,a=!1,i=!1,r=!1){var s=e,o="";ce(()=>{var u=Me;if(o!==(o=n()??"")&&(u.nodes_start!==null&&(Ts(u.nodes_start,u.nodes_end),u.nodes_start=u.nodes_end=null),o!=="")){var l=o+"";a?l=`<svg>${l}</svg>`:i&&(l=`<math>${l}</math>`);var c=$r(l);if((a||i)&&(c=zt(c)),ra(zt(c),c.lastChild),a||i)for(;zt(c);)s.before(zt(c));else s.before(c)}})}function _o(e,n,a,i,r){var s=n.$$slots?.[a],o=!1;s===!0&&(s=n.children,o=!0),s===void 0||s(e,o?()=>i:i)}function yo(e){const n={};e.children&&(n.default=!0);for(const a in e.$$slots)n[a]=!0;return n}function bo(e,n,a){var i=e,r,s,o=null,u=null;function l(){s&&(nr(s),s=null),o&&(o.lastChild.remove(),i.before(o),o=null),s=u,u=null}Ir(()=>{if(r!==(r=n())){var c=Ar();if(r){var C=i;c&&(o=document.createDocumentFragment(),o.append(C=Bn()),s&&Pe.skipped_effects.add(s)),u=aa(()=>a(C,r))}c?Pe.add_callback(l):l()}},Wa)}const Qr=[...` 	
\r\f \v\uFEFF`];function wo(e,n,a){var i=e==null?"":""+e;if(n&&(i=i?i+" "+n:n),a){for(var r in a)if(a[r])i=i?i+" "+r:r;else if(i.length)for(var s=r.length,o=0;(o=i.indexOf(r,o))>=0;){var u=o+s;(o===0||Qr.includes(i[o-1]))&&(u===i.length||Qr.includes(i[u]))?i=(o===0?"":i.substring(0,o))+i.substring(u+1):o=u}}return i===""?null:i}function xo(e,n){return e==null?null:String(e)}function tt(e,n,a,i,r,s){var o=e.__className;if(o!==a||o===void 0){var u=wo(a,i,s);u==null?e.removeAttribute("class"):e.className=u,e.__className=a}else if(s&&r!==s)for(var l in s){var c=!!s[l];(r==null||c!==!!r[l])&&e.classList.toggle(l,c)}return s}function sa(e,n,a,i){var r=e.__style;if(r!==n){var s=xo(n);s==null?e.removeAttribute("style"):e.style.cssText=s,e.__style=n}return i}function zs(e,n,a=!1){if(e.multiple){if(n==null)return;if(!Sa(n))return $i();for(var i of e.options)i.selected=n.includes(ha(i));return}for(i of e.options){var r=ha(i);if(Wi(r,n)){i.selected=!0;return}}(!a||n!==void 0)&&(e.selectedIndex=-1)}function So(e){var n=new MutationObserver(()=>{zs(e,e.__value)});n.observe(e,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),er(()=>{n.disconnect()})}function Zs(e,n,a=n){var i=!0;ks(e,"change",r=>{var s=r?"[selected]":":checked",o;if(e.multiple)o=[].map.call(e.querySelectorAll(s),ha);else{var u=e.querySelector(s)??e.querySelector("option:not([disabled])");o=u&&ha(u)}a(o)}),Tr(()=>{var r=n();if(zs(e,r,i),i&&r===void 0){var s=e.querySelector(":checked");s!==null&&(r=ha(s),a(r))}e.__value=r,i=!1}),So(e)}function ha(e){return"__value"in e?e.__value:e.value}const ko=Symbol("is custom element"),Lo=Symbol("is html");function es(e,n){var a=Vs(e);a.checked!==(a.checked=n??void 0)&&(e.checked=n)}function Mo(e,n,a,i){var r=Vs(e);r[n]!==(r[n]=a)&&(a==null?e.removeAttribute(n):typeof a!="string"&&Eo(e).includes(n)?e[n]=a:e.setAttribute(n,a))}function Vs(e){return e.__attributes??={[ko]:e.nodeName.includes("-"),[Lo]:e.namespaceURI===Di}}var ts=new Map;function Eo(e){var n=ts.get(e.nodeName);if(n)return n;ts.set(e.nodeName,n=[]);for(var a,i=e,r=Element.prototype;r!==i;){a=cs(i);for(var s in a)a[s].set&&n.push(s);i=hr(i)}return n}function Yt(e,n,a=n){var i=la(),r=new WeakSet;ks(e,"input",s=>{var o=s?e.defaultValue:e.value;if(o=cr(e)?ur(o):o,a(o),Pe!==null&&r.add(Pe),i&&o!==(o=n())){var u=e.selectionStart,l=e.selectionEnd;e.value=o??"",l!==null&&(e.selectionStart=u,e.selectionEnd=Math.min(l,e.value.length))}}),x(n)==null&&e.value&&(a(cr(e)?ur(e.value):e.value),Pe!==null&&r.add(Pe)),tr(()=>{var s=n();if(e===document.activeElement){var o=Pa??Pe;if(r.has(o))return}cr(e)&&s===ur(e.value)||e.type==="date"&&!s&&!e.value||s!==e.value&&(e.value=s??"")})}function cr(e){var n=e.type;return n==="number"||n==="range"}function ur(e){return e===""?null:+e}function $a(e,n,a){var i=Xt(e,n);i&&i.set&&(e[n]=a,er(()=>{e[n]=null}))}class Or{#e=new WeakMap;#n;#t;static entries=new WeakMap;constructor(n){this.#t=n}observe(n,a){var i=this.#e.get(n)||new Set;return i.add(a),this.#e.set(n,i),this.#r().observe(n,this.#t),()=>{var r=this.#e.get(n);r.delete(a),r.size===0&&(this.#e.delete(n),this.#n.unobserve(n))}}#r(){return this.#n??(this.#n=new ResizeObserver(n=>{for(var a of n){Or.entries.set(a.target,a);for(var i of this.#e.get(a.target)||[])i(a)}}))}}var Ao=new Or({box:"border-box"});function ns(e,n,a){var i=Ao.observe(e,()=>a(e[n]));Tr(()=>(x(()=>a(e[n])),i))}function as(e,n){return e===n||e?.[Zt]===n}function mn(e={},n,a,i){return Tr(()=>{var r,s;return tr(()=>{r=s,s=[],x(()=>{e!==a(...s)&&(n(e,...s),r&&as(a(...r),e)&&n(null,...r))})}),()=>{kr(()=>{s&&as(a(...s),e)&&n(null,...s)})}}),e}function To(e){return function(...n){var a=n[0];a.target===this&&e?.apply(this,n)}}function qs(e){return function(...n){var a=n[0];return a.preventDefault(),e?.apply(this,n)}}function At(e=!1){const n=Ne,a=n.l.u;if(!a)return;let i=()=>V(n.s);if(e){let r=0,s={};const o=Lr(()=>{let u=!1;const l=n.s;for(const c in l)l[c]!==s[c]&&(s[c]=l[c],u=!0);return u&&r++,r});i=()=>t(o)}a.b.length&&Qi(()=>{rs(n,i),Fa(a.b)}),vr(()=>{const r=x(()=>a.m.map(fi));return()=>{for(const s of r)typeof s=="function"&&s()}}),a.a.length&&vr(()=>{rs(n,i),Fa(a.a)})}function rs(e,n){if(e.l.s)for(const a of e.l.s)t(a);n()}function Pr(e,n,a){if(e==null)return n(void 0),a&&a(void 0),pn;const i=x(()=>e.subscribe(n,a));return i.unsubscribe?()=>i.unsubscribe():i}const Gn=[];function Hs(e,n){return{subscribe:bt(e,n).subscribe}}function bt(e,n=pn){let a=null;const i=new Set;function r(u){if(ps(e,u)&&(e=u,a)){const l=!Gn.length;for(const c of i)c[1](),Gn.push(c,e);if(l){for(let c=0;c<Gn.length;c+=2)Gn[c][0](Gn[c+1]);Gn.length=0}}}function s(u){r(u(e))}function o(u,l=pn){const c=[u,l];return i.add(c),i.size===1&&(a=n(r,s)||pn),u(e),()=>{i.delete(c),i.size===0&&a&&(a(),a=null)}}return{set:r,update:s,subscribe:o}}function Gs(e,n,a){const i=!Array.isArray(e),r=i?[e]:e;if(!r.every(Boolean))throw new Error("derived() expects stores as input, got a falsy value");const s=n.length<2;return Hs(a,(o,u)=>{let l=!1;const c=[];let C=0,p=pn;const S=()=>{if(C)return;p();const _=n(i?c[0]:c,o,u);s?o(_):p=typeof _=="function"?_:pn},h=r.map((_,E)=>Pr(_,A=>{c[E]=A,C&=~(1<<E),l&&S()},()=>{C|=1<<E}));return l=!0,S(),function(){Fa(h),p(),l=!1}})}function tn(e){let n;return Pr(e,a=>n=a)(),n}let Ra=!1,mr=Symbol();function ut(e,n,a){const i=a[n]??={store:null,source:K(void 0),unsubscribe:pn};if(i.store!==e&&!(mr in a))if(i.unsubscribe(),i.store=e??null,e==null)i.source.v=void 0,i.unsubscribe=pn;else{var r=!0;i.unsubscribe=Pr(e,s=>{r?i.source.v=s:g(i.source,s)}),r=!1}return e&&mr in a?tn(e):t(i.source)}function Io(e,n){return e.set(n),n}function Ma(){const e={};function n(){er(()=>{for(var a in e)e[a].unsubscribe();Na(e,mr,{enumerable:!1,value:!0})})}return[e,n]}function Bo(e){var n=Ra;try{return Ra=!1,[e(),Ra]}finally{Ra=n}}const Do={get(e,n){let a=e.props.length;for(;a--;){let i=e.props[a];if(pa(i)&&(i=i()),typeof i=="object"&&i!==null&&n in i)return i[n]}},set(e,n,a){let i=e.props.length;for(;i--;){let r=e.props[i];pa(r)&&(r=r());const s=Xt(r,n);if(s&&s.set)return s.set(a),!0}return!1},getOwnPropertyDescriptor(e,n){let a=e.props.length;for(;a--;){let i=e.props[a];if(pa(i)&&(i=i()),typeof i=="object"&&i!==null&&n in i){const r=Xt(i,n);return r&&!r.configurable&&(r.configurable=!0),r}}},has(e,n){if(n===Zt||n===ds)return!1;for(let a of e.props)if(pa(a)&&(a=a()),a!=null&&n in a)return!0;return!1},ownKeys(e){const n=[];for(let a of e.props)if(pa(a)&&(a=a()),!!a){for(const i in a)n.includes(i)||n.push(i);for(const i of Object.getOwnPropertySymbols(a))n.includes(i)||n.push(i)}return n}};function fn(...e){return new Proxy({props:e},Do)}function $e(e,n,a,i){var r=!oa||(a&Ei)!==0,s=(a&Ti)!==0,o=i,u=!0,l=()=>(u&&(u=!1,o=i),o),c;{var C=Zt in e||ds in e;c=Xt(e,n)?.set??(C&&n in e?H=>e[n]=H:void 0)}var p,S=!1;[p,S]=Bo(()=>e[n]),p===void 0&&i!==void 0&&(p=l(),c&&(r&&wi(),c(p)));var h;if(r?h=()=>{var H=e[n];return H===void 0?l():(u=!0,H)}:h=()=>{var H=e[n];return H!==void 0&&(o=void 0),H===void 0?o:H},r&&(a&Ai)===0)return h;if(c){var _=e.$$legacy;return(function(H,v){return arguments.length>0?((!r||!v||_||S)&&c(v?h():H),H):h()})}var E=!1,A=pt(()=>(E=!1,h()));t(A);var q=Me;return(function(H,v){if(arguments.length>0){const D=v?t(A):r&&s?Jn(H):H;return g(A,D),E=!0,o!==void 0&&(o=D),H}return Dn&&E||(q.f&In)!==0?A.v:t(A)})}function nn(e){Ne===null&&Ka(),oa&&Ne.l!==null?Ks(Ne).m.push(e):vr(()=>{const n=x(e);if(typeof n=="function")return n})}function Ws(e){Ne===null&&Ka(),nn(()=>()=>x(e))}function $o(e,n,{bubbles:a=!1,cancelable:i=!1}={}){return new CustomEvent(e,{detail:n,bubbles:a,cancelable:i})}function $n(){const e=Ne;return e===null&&Ka(),(n,a,i)=>{const r=e.s.$$events?.[n];if(r){const s=Sa(r)?r.slice():[r],o=$o(n,a,i);for(const u of s)u.call(e.x,o);return!o.defaultPrevented}return!0}}function Ro(e){Ne===null&&Ka(),Ne.l===null&&bi(),Ks(Ne).a.push(e)}function Ks(e){var n=e.l;return n.u??={a:[],b:[],m:[]}}const Oo="5";typeof window<"u"&&((window.__svelte??={}).v??=new Set).add(Oo);Pi();const Po="modulepreload",No=function(e){return"/"+e},ss={},jt=function(n,a,i){let r=Promise.resolve();if(a&&a.length>0){let c=function(C){return Promise.all(C.map(p=>Promise.resolve(p).then(S=>({status:"fulfilled",value:S}),S=>({status:"rejected",reason:S}))))};var o=c;document.getElementsByTagName("link");const u=document.querySelector("meta[property=csp-nonce]"),l=u?.nonce||u?.getAttribute("nonce");r=c(a.map(C=>{if(C=No(C),C in ss)return;ss[C]=!0;const p=C.endsWith(".css"),S=p?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${C}"]${S}`))return;const h=document.createElement("link");if(h.rel=p?"stylesheet":Po,p||(h.as="script"),h.crossOrigin="",h.href=C,l&&h.setAttribute("nonce",l),document.head.appendChild(h),p)return new Promise((_,E)=>{h.addEventListener("load",_),h.addEventListener("error",()=>E(new Error(`Unable to preload CSS for ${C}`)))})}))}function s(u){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=u,window.dispatchEvent(l),!l.defaultPrevented)throw u}return r.then(u=>{for(const l of u||[])l.status==="rejected"&&s(l.reason);return n().catch(s)})};class Fo{constructor(){this.store=bt({serverTime:null,clientTime:null,timeOffset:0,lastSync:null}),this.subscribe=this.store.subscribe,this.update=this.store.update,this.set=this.store.set}updateServerTime(n){const a=new Date(n),i=new Date,r=a.getTime()-i.getTime();this.update(s=>({...s,serverTime:a,clientTime:i,timeOffset:r,lastSync:i}))}getServerTime(){let n;if(this.subscribe(i=>n=i)(),!n.lastSync)return new Date;const a=new Date;return new Date(a.getTime()+n.timeOffset)}formatTimeElapsed(n){const a=new Date,i=new Date(n),r=a.getTime()-i.getTime(),s=Math.floor(r/(1e3*60));return s>0?s:0}resetTimeOffset(){this.update(n=>({...n,timeOffset:0,lastSync:null}))}}const qa=new Fo,Js=Gs(qa,(e,n)=>{const a=()=>{const r=qa.getServerTime();n(r)};a();const i=setInterval(a,1e3);return()=>clearInterval(i)},new Date);function jo(){const{subscribe:e,set:n,update:a}=bt({connected:!1,isConnected:!1,lastMessage:null,error:null,sessionId:null,currentServer:null,serverIndex:0,connectionAttempts:0}),i=()=>{const y=window.location.hostname;return window.location.protocol==="https:"?[y]:[`${y}:3030`]};let r=null,s=null,o=0,u=0,l=null;const c=new Map,C=10,p=new Map;function S(){i().forEach(d=>{p.has(d)||p.set(d,{successfulConnections:0,failedConnections:0,averageResponseTime:0,lastConnectionTime:null,reliability:1})})}function h(y){const d=y.successfulConnections+y.failedConnections;if(d===0)return 1;const I=y.successfulConnections/d,Y=y.averageResponseTime<1e3?.1:0;return Math.min(I+Y,1)}function _(){const y=i();if(y.length===1)return 0;const d=y.map(P=>{const W=p.get(P);return W?W.reliability:1}),I=d.reduce((P,W)=>P+W,0);let Y=Math.random()*I;for(let P=0;P<d.length;P++)if(Y-=d[P],Y<=0)return P;return Math.floor(Math.random()*y.length)}function E(){S(),o=_();const y=i();console.log(`Initialized with smart-selected server index: ${o} (${y[o]})`),console.log("Server reliability scores:",Array.from(p.entries()).map(([d,I])=>`${d}: ${(I.reliability*100).toFixed(1)}%`).join(", "))}function A(){const y=localStorage.getItem("ecKasse-session-id");y?s=y:(s=D(),localStorage.setItem("ecKasse-session-id",s)),a(d=>({...d,sessionId:s})),console.log("Session ID initialized:",s)}function q(){const y=i(),d=y[o];return o=(o+1)%y.length,d}function H(y=0){if(l&&(clearTimeout(l),l=null),y>=C){console.error("Max reconnection attempts reached. Stopping reconnection."),a(d=>({...d,connected:!1,isConnected:!1,error:"Failed to connect to any server after maximum attempts",connectionAttempts:y}));return}try{const d=q(),Y=`${window.location.protocol==="https:"?"wss:":"ws:"}//${d}`;console.log(`Attempting WebSocket connection to ${Y} (attempt ${y+1}/${C})`),a(J=>({...J,currentServer:d,serverIndex:o,connectionAttempts:y+1,error:null})),r=new WebSocket(Y);const P=Date.now();r.onopen=()=>{const J=Date.now()-P;if(console.log(`WebSocket connected to ${d} (${J}ms)`),p.has(d)){const T=p.get(d);T.successfulConnections++,T.lastConnectionTime=J,T.averageResponseTime=T.averageResponseTime===0?J:(T.averageResponseTime+J)/2,T.reliability=h(T),p.set(d,T)}u=0,a(T=>({...T,connected:!0,isConnected:!0,error:null,connectionAttempts:0}))},r.onmessage=J=>{try{const T=JSON.parse(J.data);if(console.log("WebSocket message received:",T),T.serverTime&&qa.updateServerTime(T.serverTime),a(ne=>({...ne,lastMessage:T})),T.command==="ui-refresh-request"){console.log("UI refresh request received, reloading page..."),window.location.reload();return}if(T.command==="displayAgentMessage"){jt(async()=>{const{agentStore:ne}=await Promise.resolve().then(()=>Sn);return{agentStore:ne}},void 0).then(({agentStore:ne})=>{ne.addMessage(T.payload)});return}if(T.operationId&&c.has(T.operationId)){const ne=c.get(T.operationId);c.delete(T.operationId),ne(T)}}catch(T){console.error("Error parsing WebSocket message:",T)}},r.onclose=J=>{if(console.log(`WebSocket disconnected from ${d} (code: ${J.code}, reason: ${J.reason})`),J.code!==1e3&&p.has(d)){const ne=p.get(d);ne.failedConnections++,ne.reliability=h(ne),p.set(d,ne),console.log(`Updated reliability for ${d}: ${(ne.reliability*100).toFixed(1)}%`)}a(ne=>({...ne,connected:!1,isConnected:!1}));const T=Math.min(1e3*Math.pow(2,Math.floor(y/3)),3e4);console.log(`Reconnecting in ${T}ms to next server...`),l=setTimeout(()=>{H(y+1)},T)},r.onerror=J=>{if(console.error(`WebSocket error on ${d}:`,J),p.has(d)){const T=p.get(d);T.failedConnections++,T.reliability=h(T),p.set(d,T)}a(T=>({...T,error:`Connection error: ${d}`}))};const W=setTimeout(()=>{r&&r.readyState===WebSocket.CONNECTING&&(console.log(`Connection timeout for ${d}, trying next server...`),r.close())},1e4);r.onopen=(J=>function(...T){return clearTimeout(W),J.apply(this,T)})(r.onopen)}catch(d){console.error("Failed to create WebSocket connection:",d),a(I=>({...I,error:d.message})),l=setTimeout(()=>{H(y+1)},2e3)}}function v(y){if(console.log("[wsStore] send() called with:",y),console.log("[wsStore] WebSocket state:",{exists:!!r,readyState:r?r.readyState:"N/A",readyStateText:r?r.readyState===0?"CONNECTING":r.readyState===1?"OPEN":r.readyState===2?"CLOSING":"CLOSED":"N/A",sessionId:s}),r&&r.readyState===WebSocket.OPEN){const d={operationId:D(),...y,payload:{...y.payload,sessionId:s}};return y.command==="getCategories"&&(console.log("🔍 [wsStore] SENDING getCategories command:",d),console.log("🔍 [wsStore] WebSocket ready state confirmed OPEN for getCategories")),console.log("Sending WebSocket message:",d),r.send(JSON.stringify(d)),new Promise(I=>{c.set(d.operationId,I),setTimeout(()=>{c.has(d.operationId)&&(c.delete(d.operationId),y.command==="getCategories"&&console.error("❌ [wsStore] getCategories TIMEOUT after 10 seconds"),I({error:"Timeout waiting for response"}))},1e4),y.command==="getCategories"&&console.log("🔍 [wsStore] getCategories promise created, waiting for response...")})}else{const d="WebSocket not connected";return console.log(`❌ [wsStore] ${d}:`,{command:y.command,wsExists:!!r,readyState:r?r.readyState:"N/A"}),y.command==="getCategories"&&console.error("❌ [wsStore] getCategories FAILED - WebSocket not connected!"),Promise.resolve({error:d})}}function D(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(y){const d=Math.random()*16|0;return(y==="x"?d:d&3|8).toString(16)})}return E(),A(),H(),{subscribe:e,send:v,connect:H,getSessionId:()=>s,getCurrentServer:()=>L({subscribe:e}).currentServer,getConnectionStats:()=>{const y=L({subscribe:e});return{currentServer:y.currentServer,serverIndex:y.serverIndex,connectionAttempts:y.connectionAttempts,availableServers:i(),serverStats:Array.from(p.entries()).map(([d,I])=>({server:d,reliability:Math.round(I.reliability*100),successfulConnections:I.successfulConnections,failedConnections:I.failedConnections,averageResponseTime:Math.round(I.averageResponseTime),lastConnectionTime:I.lastConnectionTime}))}},forceReconnect:()=>{r&&r.close(),o=0,u=0,H()},switchToBestServer:()=>{r&&r.close(),o=_(),u=0,console.log("Switching to best performing server..."),H()},resetServerStats:()=>{p.clear(),S(),console.log("Server statistics reset")}};function L(y){let d;return y.subscribe(I=>d=I)(),d}}const Ce=jo(),Uo=Object.freeze(Object.defineProperty({__proto__:null,wsStore:Ce},Symbol.toStringTag,{value:"Module"})),zo=bt([]);function Zo(e){if(!e||typeof e!="object")return{};const n={};for(const a in e)if(Object.prototype.hasOwnProperty.call(e,a)){const i=e[a];["string","number","boolean"].includes(typeof i)?n[a]=i:i instanceof Error?n[a]={message:i.message,stack:i.stack}:n[a]=JSON.stringify(i,null,2)}return n}function ee(e,n,a={}){const i=new Date().toISOString().slice(0,19).replace("T"," ");zo.update(s=>[...s.slice(-100),{timestamp:i,level:e,message:n,context:a}]);let r;Ce.subscribe(s=>r=s)(),Ce&&r&&r.connected&&Ce.send({command:"logClientEvent",payload:{level:e,message:n,context:Zo(a)}})}const Oa={isAuthenticated:!1,currentUser:null,sessionId:null,users:[],selectedUser:null,loginState:"user_selection",error:null,isLoading:!1};function Vo(){const{subscribe:e,set:n,update:a}=bt(Oa);return{subscribe:e,async fetchUsers(){try{a(r=>({...r,isLoading:!0,error:null}));const i=await Ce.send({command:"getLoginUsers",payload:{}});if(i.status==="success")a(r=>({...r,users:i.payload||[],isLoading:!1})),ee("INFO",`Fetched ${i.payload?.length||0} users for login`);else throw new Error(i.payload?.error||"Failed to fetch users")}catch(i){ee("ERROR",`Failed to fetch users: ${i.message}`),a(r=>({...r,error:i.message,isLoading:!1}))}},selectUser(i){a(r=>({...r,selectedUser:i,loginState:"pin_entry",error:null})),ee("INFO",`Selected user: ${i.username}`)},backToUserSelection(){a(i=>({...i,selectedUser:null,loginState:"user_selection",error:null}))},async login(i,r){try{a(o=>({...o,isLoading:!0,loginState:"authenticating",error:null}));const s=await Ce.send({command:"login",payload:{username:i,password:r,ipAddress:"localhost",userAgent:navigator.userAgent}});if(s.status==="success"&&s.payload.success){const{user:o,session:u}=s.payload;try{await fetch("/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({username:i,password:r})})}catch(c){ee("WARN",`HTTP session establishment failed: ${c.message}`)}const l={...o,permissions:["all","order.change_price","order.reduce_quantity"]};return a(c=>({...c,isAuthenticated:!0,currentUser:l,sessionId:u.sessionId,loginState:"authenticated",isLoading:!1,error:null,selectedUser:null})),ee("SUCCESS",`User ${i} authenticated successfully`),{success:!0}}else{const o=s.payload?.error||"Authentication failed";throw new Error(o)}}catch(s){return ee("ERROR",`Authentication failed: ${s.message}`),a(o=>({...o,error:s.message,loginState:"pin_entry",isLoading:!1})),{success:!1,error:s.message}}},async logout(){try{const i={...Oa};let r=null;if(a(s=>(r=s.sessionId,i)),r)try{await Ce.send({command:"logout",payload:{sessionId:r}}),ee("INFO","User logged out successfully")}catch(s){ee("WARN",`Logout request failed: ${s.message}`)}try{await fetch("/api/auth/logout",{method:"POST",credentials:"include"})}catch(s){ee("WARN",`HTTP logout failed: ${s.message}`)}return n(i),{success:!0}}catch(i){return ee("ERROR",`Logout failed: ${i.message}`),n(Oa),{success:!1,error:i.message}}},async getCurrentUser(){try{let i=null;if(a(s=>(i=s.sessionId,s)),!i)throw new Error("No active session");const r=await Ce.send({command:"getCurrentUser",payload:{sessionId:i}});if(r.status==="success"&&r.payload.success)return a(s=>({...s,currentUser:r.payload.user})),{success:!0,user:r.payload.user};throw new Error(r.payload?.error||"Failed to get current user")}catch(i){return ee("ERROR",`Failed to get current user: ${i.message}`),{success:!1,error:i.message}}},clearError(){a(i=>({...i,error:null}))},reset(){n(Oa)},async checkSession(){try{a(r=>({...r,isLoading:!0}));const i=await fetch("/api/session/status",{credentials:"include"});if(i.ok){const r=await i.json();if(r.authenticated&&r.user){const s={...r.user,permissions:["all","order.change_price","order.reduce_quantity"]};return a(o=>({...o,isAuthenticated:!0,currentUser:s,sessionId:null,loginState:"authenticated",isLoading:!1,error:null,selectedUser:null})),ee("SUCCESS",`Session restored for user: ${r.user.username}`),{success:!0,user:r.user}}}return a(r=>({...r,isLoading:!1})),{success:!1,error:"No valid session"}}catch(i){return ee("ERROR",`Failed to check session: ${i.message}`),a(r=>({...r,isLoading:!1,error:i.message})),{success:!1,error:i.message}}},establishSession(i){try{const{user:r,session:s}=i,o={...r,permissions:["all","order.change_price","order.reduce_quantity"]};return a(u=>({...u,isAuthenticated:!0,currentUser:o,sessionId:s.sessionId,loginState:"authenticated",isLoading:!1,error:null,selectedUser:null})),ee("SUCCESS",`Demo mode: Auto-authenticated as ${r.username}`),{success:!0}}catch(r){return ee("ERROR",`Failed to establish demo session: ${r.message}`),{success:!1,error:r.message}}}}}const An=Vo(),is=Object.freeze(Object.defineProperty({__proto__:null,authStore:An},Symbol.toStringTag,{value:"Module"})),nt=bt("agent");Gs(nt,e=>{const n=["order","receipts","agent"],a=n.indexOf(e);return[...n.slice(a),...n.slice(0,a)]});function qo(){const{subscribe:e,set:n,update:a}=bt({transactionId:null,uuid:null,items:[],total:0,tax:0,status:"idle",paymentType:null,paymentAmount:null,metadata:{},activeTransactionItemId:null});let i=null,r=[];function s(){n({transactionId:null,uuid:null,items:[],total:0,tax:0,status:"idle",paymentType:null,paymentAmount:null,metadata:{},activeTransactionItemId:null}),i=null,r=[],ee("INFO","Order reset and ready for new transaction.")}Ce.subscribe(v=>{let D;if(e(L=>D=L)(),v.lastMessage?.command==="orderUpdated"&&v.lastMessage.status==="success"&&v.lastMessage.payload){const L=v.lastMessage.payload,y=(L.items||[]).map(P=>{const W=D.items.find(J=>J.id===P.id);return{...P,isEdited:W?.isEdited||!1}}),d=P=>{const W=[];return P.created_at&&W.push(new Date(P.created_at)),P.updated_at&&W.push(new Date(P.updated_at)),W.length>0?Math.max(...W):0};let I=null;y.length>0&&(I=[...y].sort((W,J)=>{const T=d(W),ne=d(J);return T!==ne?ne-T:J.id-W.id})[0].id);const Y=[...y].sort((P,W)=>{const J=d(P),T=d(W);return J!==T?J-T:P.id-W.id});if(a(P=>({...P,transactionId:L.id,uuid:L.uuid,items:Y,total:parseFloat(L.total_amount),tax:parseFloat(L.tax_amount),status:"active",metadata:L.metadata?typeof L.metadata=="string"?JSON.parse(L.metadata):L.metadata:{},activeTransactionItemId:I})),ee("INFO",`Order ${L.id} updated.`),D.status==="initializing"&&r.length>0){const P=[...r];r=[],P.forEach(({itemId:W,quantity:J,userId:T})=>{ee("INFO",`Adding queued item ${W} to transaction ${L.id}`),Ce.send({command:"addItemToTransaction",payload:{transactionId:L.id,itemId:W,quantity:J,userId:T}})})}}else if(v.lastMessage?.command==="transactionFinished"&&v.lastMessage.status==="success"){const L=v.lastMessage.payload;L.printStatus&&(L.printStatus.status==="failed"?ee("ERROR",`Receipt print failed: ${L.printStatus.error}`):L.printStatus.status==="success"&&ee("SUCCESS","Receipt printed successfully")),L.transaction?(a(y=>({...y,transactionId:L.transaction.id,uuid:L.transaction.uuid,items:L.transaction.items||[],total:parseFloat(L.transaction.total_amount),tax:parseFloat(L.transaction.tax_amount),status:"finished",paymentType:L.transaction.payment_type,paymentAmount:parseFloat(L.transaction.payment_amount),metadata:L.transaction.metadata?typeof L.transaction.metadata=="string"?JSON.parse(L.transaction.metadata):L.transaction.metadata:{},activeTransactionItemId:null})),ee("SUCCESS",`Transaction ${L.transaction.id} finished successfully.`)):(ee("SUCCESS",`Transaction ${D.transactionId} finished successfully.`),a(y=>({...y,status:"finished"}))),setTimeout(()=>{ee("INFO","Auto-resetting order for next transaction."),s()},2e3)}});function o(){const v=tn(An)?.currentUser;if(!v?.id)throw new Error("User must be authenticated to perform this action");return v.id}async function u(v={}){if(i)return i;const D=o();return a(L=>({...L,status:"initializing"})),ee("INFO","Initializing new order..."),i=new Promise((L,y)=>{let d;d=Ce.subscribe(I=>{I.lastMessage?.command==="orderUpdated"&&I.lastMessage.status==="success"?(d&&d(),L(I.lastMessage.payload)):I.lastMessage?.command==="orderUpdated"&&I.lastMessage.status==="error"&&(d&&d(),a(Y=>({...Y,status:"error"})),y(new Error(I.lastMessage.payload?.message||"Failed to initialize order")))})}),Ce.send({command:"findOrCreateActiveTransaction",payload:{criteria:{metadata:v},userId:D}}),i}async function l(v,D=1){nt.set("order");const L=o();let y;if(e(d=>y=d)(),y.status==="idle"){ee("INFO",`First item click detected. Initializing order and queuing item ${v}...`),r.push({itemId:v,quantity:D,userId:L});try{await u(L)}catch(d){ee("ERROR",`Failed to initialize order: ${d.message}`),r=[];return}return}if(y.status==="initializing"){ee("INFO",`Order initializing. Queuing item ${v}...`),r.push({itemId:v,quantity:D,userId:L});return}if(y.status==="active"&&y.transactionId){const d=y.items.find(I=>I.item_id===v&&!I.notes?.includes("Custom price:")&&!I.isEdited);if(d){const I=parseFloat(d.quantity)+D;ee("INFO",`Item ${v} already exists and not edited, updating quantity to ${I}`),A(d.id,I,!1);return}ee("INFO",`Adding new item ${v} to transaction ${y.transactionId}`),Ce.send({command:"addItemToTransaction",payload:{transactionId:y.transactionId,itemId:v,quantity:D,userId:L}});return}ee("ERROR","Cannot add item: invalid order state.")}async function c(v){const D=o();let L;if(e(y=>L=y)(),!L.transactionId||L.status!=="active"){ee("ERROR","No active order to finish.");return}ee("INFO",`Finishing transaction ${L.transactionId}...`),Ce.send({command:"finishTransaction",payload:{transactionId:L.transactionId,paymentData:v,userId:D}})}async function C(v,D=!0){const L=o();let y;if(e(d=>y=d)(),!y.transactionId||y.status!=="active"){ee("ERROR","No active order to park.");return}return ee("INFO",`Parking transaction ${y.transactionId} to table ${v} (updateTime: ${D})...`),new Promise(async(d,I)=>{const Y=Ce.subscribe(async P=>{P.lastMessage?.command==="parkTransactionResponse"&&P.lastMessage.status==="success"?(Y(),s(),ee("SUCCESS",`Order parked to table ${v}`),d(P.lastMessage.payload)):P.lastMessage?.command==="parkTransactionResponse"&&P.lastMessage.status==="error"&&(Y(),ee("ERROR",`Failed to park order: ${P.lastMessage.payload?.message||"Unknown error"}`),I(new Error(P.lastMessage.payload?.message||"Failed to park order")))});Ce.send({command:"parkTransaction",payload:{transactionId:y.transactionId,tableIdentifier:v,userId:L,updateTimestamp:D}})})}function p(v){nt.set("order"),ee("INFO",`Loading order ${v.id}...`),a(D=>({...D,transactionId:v.id,uuid:v.uuid,items:v.items||[],total:parseFloat(v.total_amount),tax:parseFloat(v.tax_amount),status:"active",metadata:v.metadata?typeof v.metadata=="string"?JSON.parse(v.metadata):v.metadata:{},activeTransactionItemId:null})),ee("SUCCESS",`Order ${v.id} loaded successfully`)}async function S(v){const D=o();let L;if(e(y=>L=y)(),!L.transactionId||L.status!=="active")throw ee("ERROR","No active order to assign table number to."),new Error("No active order to assign table number to.");ee("INFO",`Checking availability and assigning table ${v} to transaction ${L.transactionId}...`);try{const y=Math.random().toString(36).substring(2,15),d=await new Promise((Y,P)=>{const W=setTimeout(()=>{J&&J(),P(new Error("Table availability check timeout"))},5e3);let J;J=Ce.subscribe(T=>{T.lastMessage?.command==="checkTableAvailabilityResponse"&&T.lastMessage?.operationId===y&&(clearTimeout(W),J&&J(),Y(T.lastMessage))}),Ce.send({operationId:y,command:"checkTableAvailability",payload:{tableNumber:v,excludeTransactionId:L.transactionId}})});if(console.log("Table availability check result:",d),d.status==="success"&&d.payload.isInUse)return ee("ERROR",`Table ${v} is already in use by another order`),{tableInUse:!0};a(Y=>({...Y,metadata:{...Y.metadata,table:v}}));const I=Math.random().toString(36).substring(2,15);await new Promise((Y,P)=>{const W=setTimeout(()=>{J&&J(),P(new Error("Metadata update timeout"))},5e3);let J;J=Ce.subscribe(T=>{T.lastMessage?.command==="updateTransactionMetadataResponse"&&T.lastMessage?.operationId===I&&(clearTimeout(W),J&&J(),T.lastMessage.status==="success"?Y(T.lastMessage):P(new Error(T.lastMessage.payload?.message||"Failed to update metadata")))}),Ce.send({operationId:I,command:"updateTransactionMetadata",payload:{transactionId:L.transactionId,metadata:{...L.metadata,table:v},userId:D}})}),ee("SUCCESS",`Table ${v} assigned to order`)}catch(y){throw ee("ERROR",`Failed to assign table ${v}: ${y.message}`),y}}async function h(){ee("INFO","Clearing active order view"),s()}function _(v,D){const L=o();let y;if(e(d=>y=d)(),y.status!=="active"||!y.transactionId){ee("ERROR","Cannot update quantity: no active transaction");return}ee("INFO",`Updating item quantity for item ${v} to ${D}`),Ce.send({command:"updateItemQuantity",payload:{transactionId:y.transactionId,transactionItemId:v,newQuantity:D,userId:L}})}function E(v,D,L=1){const y=o();let d;if(e(I=>d=I)(),d.status!=="active"||!d.transactionId){ee("ERROR","Cannot add custom price item: no active transaction");return}ee("INFO",`Adding custom price item ${v} with price ${D} and quantity ${L}`),Ce.send({command:"addCustomPriceItem",payload:{transactionId:d.transactionId,itemId:v,customPrice:D,quantity:L,userId:y}})}async function A(v,D,L=!0){const y=o();let d;if(e(I=>d=I)(),d.status!=="active"||!d.transactionId){ee("ERROR","Cannot update quantity: no active transaction");return}L&&a(I=>({...I,items:I.items.map(Y=>Y.id===v?{...Y,isEdited:!0}:Y)})),ee("INFO",`Updating item quantity for item ${v} to ${D}${L?" (marked as edited)":""}`),Ce.send({command:"updateItemQuantity",payload:{transactionId:d.transactionId,transactionItemId:v,newQuantity:D,userId:y}})}async function q(v,D,L=!1){const y=o();let d;if(e(I=>d=I)(),d.status!=="active"||!d.transactionId){ee("ERROR","Cannot update price: no active transaction");return}a(I=>({...I,items:I.items.map(Y=>Y.id===v?{...Y,isEdited:!0}:Y)})),ee("INFO",`Updating item price for item ${v} to ${D} (marked as edited)`),Ce.send({command:"updateItemPrice",payload:{transactionId:d.transactionId,transactionItemId:v,newPrice:D,isTotalPrice:L,userId:y}})}function H(){a(v=>({...v,activeTransactionItemId:null})),ee("INFO","Item deselected from order view")}return{subscribe:e,set:n,update:a,initializeOrder:u,addItem:l,updateQuantity:_,updateItemQuantity:A,updateItemPrice:q,addWithCustomPrice:E,finishOrder:c,resetOrder:s,parkCurrentOrder:C,assignTableNumber:S,loadOrder:p,clearActiveOrderView:h,deselectItem:H}}const Ze=qo();function Ho(e){if(typeof e=="object"&&e!==null)return e;if(typeof e=="string")try{return JSON.parse(e)}catch{return e}return e}function Go(){const{subscribe:e,set:n,update:a}=bt({receipts:[],loading:!1,error:null,lastUpdated:null});Ce.subscribe(s=>{if(s.lastMessage?.command==="getRecentReceiptsResponse")if(s.lastMessage.status==="success"){const o=s.lastMessage.payload;if(o.success&&o.transactions){const u=o.transactions.map(l=>({...l,metadata:l.metadata?Ho(l.metadata):{}}));a(l=>({...l,receipts:u,loading:!1,error:null,lastUpdated:new Date})),ee("INFO",`Loaded ${o.transactions.length} recent receipts.`)}else a(u=>({...u,loading:!1,error:o.message||"Failed to load receipts"})),ee("ERROR",`Failed to load receipts: ${o.message||"Unknown error"}`)}else a(o=>({...o,loading:!1,error:s.lastMessage.payload?.message||"Failed to load receipts"})),ee("ERROR",`Failed to load receipts: ${s.lastMessage.payload?.message||"Unknown error"}`)});function i(s=20){a(u=>({...u,loading:!0,error:null})),ee("INFO",`Loading recent receipts (limit: ${s})...`);let o;Ce.subscribe(u=>o=u)(),o&&o.connected?Ce.send({command:"getRecentReceipts",payload:{limit:s}}):(ee("WARNING","WebSocket not connected, skipping receipt load"),a(u=>({...u,loading:!1,error:"WebSocket connection not available"})))}function r(){ee("INFO","Refreshing receipts..."),i()}return{subscribe:e,loadReceipts:i,refresh:r}}const Ha=Go();class Wo{constructor(){this.store=bt([]),this.subscribe=this.store.subscribe,this.set=this.store.set,this.update=this.store.update}async refreshParkedOrders(){try{ee("DEBUG","Requesting parked transactions...");const n=this.generateUUID();ee("DEBUG",`Generated operationId: ${n}`);const a=await this.sendRequestWithFallback(n,"getParkedTransactions",{});ee("DEBUG",`Parked transactions response: ${JSON.stringify(a)}`),a.status==="success"?(ee("DEBUG",`Setting parked orders: ${JSON.stringify(a.payload)}`),this.set(a.payload||[])):(ee("ERROR",`Failed to fetch parked orders: ${JSON.stringify(a)}`),this.set([]))}catch(n){ee("ERROR",`Error fetching parked orders: ${n.message}`),this.set([])}}async sendRequestWithFallback(n,a,i){try{return await this.sendWebSocketRequest(n,a,i)}catch(r){ee("WARNING",`WebSocket request failed, trying HTTP fallback: ${r.message}`);try{return await this.sendHttpRequest(n,a,i)}catch(s){throw ee("ERROR",`Both WebSocket and HTTP requests failed: ${s.message}`),s}}}sendWebSocketRequest(n,a,i){return new Promise((r,s)=>{let o;if(Ce.subscribe(c=>o=c)(),!o||!o.connected){s(new Error("WebSocket is not connected"));return}const u=setTimeout(()=>{l(),s(new Error("WebSocket request timeout"))},3e3),l=Ce.subscribe(c=>{c.lastMessage&&c.lastMessage.operationId===n&&(clearTimeout(u),l(),r(c.lastMessage))});Ce.send({operationId:n,command:a,payload:i})})}async sendHttpRequest(n,a,i){const r=await fetch("/api/websocket-fallback",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({operationId:n,command:a,payload:i})});if(!r.ok)throw new Error(`HTTP request failed: ${r.status}`);return await r.json()}refresh(){return this.refreshParkedOrders()}async activateOrder(n,a=!1){try{const i=this.generateUUID(),r=await this.sendRequestWithFallback(i,"activateTransaction",{transactionId:n,userId:1,updateTimestamp:a});if(r.status==="success")return a&&await this.refreshParkedOrders(),r.payload;throw new Error(r.payload?.message||"Failed to activate order")}catch(i){throw ee("ERROR",`Error activating order: ${i.message}`),i}}generateUUID(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(n){const a=Math.random()*16|0;return(n==="x"?a:a&3|8).toString(16)})}}const Yn=new Wo,Wn={DE:[["q","w","e","r","t","z","u","i","o","p","ü","ß"],["a","s","d","f","g","h","j","k","l","ö","ä"],["y","x","c","v","b","n","m"]],EN:[["q","w","e","r","t","y","u","i","o","p"],["a","s","d","f","g","h","j","k","l"],["z","x","c","v","b","n","m"]],RU:[["й","ц","у","к","е","н","г","ш","щ","з","х","ъ"],["ф","ы","в","а","п","р","о","л","д","ж","э"],["я","ч","с","м","и","т","ь","б","ю"]]};function Ko(){const{subscribe:e,set:n,update:a}=bt({isActive:!1,mode:null,layout:"numeric",liveValue:{text:"",cursor:0},confirmCallback:null,cancelCallback:null,lastRedClickTime:0,errorMessage:null,currentLanguage:"DE",layouts:Wn});return{subscribe:e,activate(i,r,s,o="numeric"){n({isActive:!0,mode:i,layout:o,liveValue:o==="alpha"?{text:"",cursor:0}:"",confirmCallback:r,cancelCallback:s,lastRedClickTime:0,errorMessage:null,currentLanguage:"DE",layouts:Wn})},deactivate(){n({isActive:!1,mode:null,layout:"numeric",liveValue:{text:"",cursor:0},confirmCallback:null,cancelCallback:null,lastRedClickTime:0,errorMessage:null,currentLanguage:"DE",layouts:Wn})},append(i,r=null){a(s=>{if(!s.isActive)return s;if(s.layout==="alpha"){const o=s.liveValue.text,u=s.liveValue.cursor,l=o.slice(0,u)+i+o.slice(u),c={text:l,cursor:u+1};return s.mode==="agent"&&r&&r.updateDraftMessage(l),{...s,liveValue:c,errorMessage:null}}else return{...s,liveValue:s.liveValue+i,errorMessage:null}})},backspace(i=null){a(r=>{if(!r.isActive)return r;if(r.layout==="alpha"){const s=r.liveValue.text,o=r.liveValue.cursor;if(o>0){const u=s.slice(0,o-1)+s.slice(o),l={text:u,cursor:o-1};return r.mode==="agent"&&i&&i.updateDraftMessage(u),{...r,liveValue:l,errorMessage:null}}return{...r,errorMessage:null}}else return{...r,liveValue:r.liveValue.slice(0,-1),errorMessage:null}})},clear(i=null){a(r=>r.isActive?(r.mode==="agent"&&i&&i.updateDraftMessage(""),{...r,liveValue:r.layout==="alpha"?{text:"",cursor:0}:"",errorMessage:null}):r)},async confirm(){let i,r;if(a(u=>(i=u,u)),!i.isActive)return;r=i.layout==="alpha"?i.liveValue.text:i.liveValue;let s;if(Ze.subscribe(u=>s=u)(),s.activeTransactionItemId&&i.layout==="numeric"&&i.mode!=="agent"&&i.mode!=="table"){const u=r.trim();if(!u){this.deactivate();return}const l=s.items.find(c=>c.id===s.activeTransactionItemId);if(l){const{authStore:c}=await jt(async()=>{const{authStore:S}=await Promise.resolve().then(()=>is);return{authStore:S}},void 0);let C;c.subscribe(S=>C=S)();const p=C.currentUser?.permissions||[];if(u.includes(".")||u.includes(",")){const S=parseFloat(u.replace(",","."));if(!isNaN(S)&&S>0){const h=parseFloat(l.unit_price);let _=null;if(S<h&&(_="order.change_price"),p.includes("all")||(_?p.includes(_):!0)){const q=parseFloat(l.quantity)>1;Ze.updateItemPrice(l.id,S,q),Ze.deselectItem()}else{a(A=>({...A,errorMessage:"Permission denied to change price."}));return}}}else{const S=parseInt(u);if(!isNaN(S)&&S>0){const h=parseFloat(l.quantity);let _=null;if(S<h&&(_="order.reduce_quantity"),p.includes("all")||(_?p.includes(_):!0))Ze.updateItemQuantity(l.id,S),Ze.deselectItem();else{a(A=>({...A,errorMessage:"Permission denied to reduce quantity."}));return}}}}a(c=>({...c,liveValue:c.layout==="alpha"?{text:"",cursor:0}:"",errorMessage:null})),this.deactivate();return}if(i.mode==="agent"){if(i.layout==="numeric"&&/^\d{4,6}$/.test(r)){const{authStore:l}=await jt(async()=>{const{authStore:c}=await Promise.resolve().then(()=>is);return{authStore:c}},void 0);try{if((await l.login(null,r)).success){const{agentStore:C}=await jt(async()=>{const{agentStore:h}=await Promise.resolve().then(()=>Sn);return{agentStore:h}},void 0);let p;l.subscribe(h=>p=h)();const S=`✅ Erfolgreich angemeldet als ${p.currentUser.full_name}!

⏰ Überprüfe Systemzeit...
🔍 Prüfe ausstehende Transaktionen...

Bitte warten Sie einen Moment...`;C.addMessage({timestamp:new Date().toLocaleTimeString("en-GB",{hour:"2-digit",minute:"2-digit"}),type:"agent",message:S}),C.addMessage({timestamp:new Date().toLocaleTimeString("en-GB",{hour:"2-digit",minute:"2-digit"}),type:"agent",message:`🤖 KI-Assistent bereit!

Verfügbare Tools:
• findProduct - Produkte suchen und finden
• createProduct - Neue Produkte erstellen
• updateProduct - Produktdaten aktualisieren
• getSalesReport - Verkaufsberichte abrufen
• generateDsfinvkExport - DSFinV-K konforme Datenexporte erstellen

Ich wähle automatisch das richtige Tool für Ihre Anfrage aus. Stellen Sie einfach Ihre Frage!`}),setTimeout(async()=>{await this.checkSystemStatus(p.currentUser,C)},1e3),a(h=>({...h,liveValue:h.layout==="alpha"?{text:"",cursor:0}:"",errorMessage:null})),this.deactivate();return}else{const{agentStore:C}=await jt(async()=>{const{agentStore:p}=await Promise.resolve().then(()=>Sn);return{agentStore:p}},void 0);C.addMessage({timestamp:new Date().toLocaleTimeString("en-GB",{hour:"2-digit",minute:"2-digit"}),type:"agent",message:`❌ Ungültige PIN-Eingabe!

Bitte überprüfen Sie Ihre PIN und versuchen Sie es erneut. Sie können eine 4-6 stellige PIN über das Tastenfeld eingeben.`}),a(p=>({...p,liveValue:p.layout==="alpha"?{text:"",cursor:0}:"",errorMessage:null}));return}}catch{console.log("Direct login failed, falling back to agent message")}}const{agentStore:u}=await jt(async()=>{const{agentStore:l}=await Promise.resolve().then(()=>Sn);return{agentStore:l}},void 0);try{await u.sendMessage(r),a(l=>({...l,liveValue:l.layout==="alpha"?{text:"",cursor:0}:""}))}catch(l){console.error("Agent message send failed:",l),a(c=>({...c,liveValue:c.layout==="alpha"?{text:"",cursor:0}:""}))}return}if(!i.confirmCallback)return;const o=i.confirmCallback;try{await o(r),a(()=>({isActive:!1,mode:null,layout:"numeric",liveValue:{text:"",cursor:0},confirmCallback:null,cancelCallback:null,lastRedClickTime:0,errorMessage:null,currentLanguage:"DE",layouts:Wn}))}catch(u){console.error("Pinpad confirm callback failed:",u),a(()=>({isActive:!1,mode:null,layout:"numeric",liveValue:{text:"",cursor:0},confirmCallback:null,cancelCallback:null,lastRedClickTime:0,errorMessage:null,currentLanguage:"DE",layouts:Wn}))}},cancel(i=null){a(r=>{const s=Date.now();if(s-r.lastRedClickTime<300){const u=r.cancelCallback;r.mode==="agent"&&jt(async()=>{const{agentStore:c}=await Promise.resolve().then(()=>Sn);return{agentStore:c}},void 0).then(({agentStore:c})=>{c.cancelDraftMessage()});const l={isActive:!1,mode:null,layout:"numeric",liveValue:{text:"",cursor:0},confirmCallback:null,cancelCallback:null,lastRedClickTime:0,errorMessage:null,currentLanguage:"DE",layouts:Wn};return u&&setTimeout(()=>u(),0),l}else return r.mode==="agent"&&i&&i.updateDraftMessage(""),{...r,liveValue:r.layout==="alpha"?{text:"",cursor:0}:"",lastRedClickTime:s,errorMessage:null}})},activateTableEntry(){nt.set("order"),this.activate("table",async i=>{if(i&&i.trim())try{const r=await Ze.assignTableNumber(i.trim());if(r&&r.tableInUse){a(s=>({...s,liveValue:s.layout==="alpha"?{text:"",cursor:0}:""}));return}return r}catch(r){throw r}},()=>{})},activateTableEntryWithAutoCollapse(){nt.set("order"),this.activate("table",async i=>{if(i&&i.trim())try{const r=await Ze.assignTableNumber(i.trim());if(r&&r.tableInUse){a(l=>({...l,liveValue:l.layout==="alpha"?{text:"",cursor:0}:""}));return}let s;Ze.subscribe(l=>s=l)();const o=s.items&&s.items.length>0,u=s.metadata&&s.metadata.table;return o&&u?(await Ze.parkCurrentOrder(u,1,!1),await Yn.refresh(),Ze.resetOrder(),window.dispatchEvent(new CustomEvent("autoCollapseComplete")),{autoCollapsed:!0}):r}catch(r){throw r}},()=>{})},activateAlphaInput(i,r,s=null){s&&s.startDraftMessage(),this.activate("agent",i,r,"alpha")},moveCursorLeft(){a(i=>{if(!i.isActive||i.layout!=="alpha")return i;const r=Math.max(0,i.liveValue.cursor-1);return{...i,liveValue:{...i.liveValue,cursor:r}}})},moveCursorRight(){a(i=>{if(!i.isActive||i.layout!=="alpha")return i;const r=Math.min(i.liveValue.text.length,i.liveValue.cursor+1);return{...i,liveValue:{...i.liveValue,cursor:r}}})},switchLanguage(i=null){a(r=>{const s=Object.keys(r.layouts);if(i&&s.includes(i))return{...r,currentLanguage:i};if(!r.isActive||r.layout!=="alpha"){const c=(s.indexOf(r.currentLanguage)+1)%s.length;return{...r,currentLanguage:s[c]}}const u=(s.indexOf(r.currentLanguage)+1)%s.length;return{...r,currentLanguage:s[u]}})},async checkSystemStatus(i,r){try{const{wsStore:s}=await jt(async()=>{const{wsStore:c}=await Promise.resolve().then(()=>Uo);return{wsStore:c}},void 0);let o=0,u=!0;try{const c=await s.send({command:"systemTimeCheck",payload:{clientTime:new Date().toISOString()}});c.status==="success"?(o=c.payload.timeDifferenceSeconds,u=Math.abs(o)<=30):u=!1}catch{u=!1}if(u){r.addMessage({timestamp:new Date().toLocaleTimeString("en-GB",{hour:"2-digit",minute:"2-digit"}),type:"agent",message:`✅ Erfolgreich angemeldet als ${i.full_name}!`});return}let l=`🎉 Willkommen zurück, ${i.full_name}!

`;if(u||(o!==0?l+=`⚠️ Zeitabweichung erkannt: ${Math.abs(o)} Sekunden ${o>0?"voraus":"zurück"}
`:l+=`⚠️ Zeitprüfung fehlgeschlagen
`),i.permissions.includes("all")||i.permissions.includes("manage_transactions"))try{const c=await s.send({command:"getPendingTransactions",payload:{}});c.status==="success"&&c.payload.length>0?(l+=`
🔄 ${c.payload.length} ausstehende Transaktionen gefunden!

`,l+=`Als ${i.role} können Sie diese Transaktionen verwalten:
`,l+=`• Fiskalisieren (abschließen)
`,l+=`• Stornieren (rückgängig machen)
`,l+=`• Verschieben (später bearbeiten)

`,l+="Möchten Sie diese jetzt bearbeiten? Verwenden Sie die entsprechenden Schaltflächen oder fragen Sie mich nach Hilfe."):l+=`
✅ Keine ausstehenden Transaktionen
`}catch{l+=`
⚠️ Konnte ausstehende Transaktionen nicht überprüfen
`}else l+=`
📋 Ihre Rolle: ${i.role}
`,l+=`Sie haben Zugriff auf grundlegende Kassenfunktionen.
`;l+=`
🚀 System ist bereit! Sie können mit der Arbeit beginnen.`,r.addMessage({timestamp:new Date().toLocaleTimeString("en-GB",{hour:"2-digit",minute:"2-digit"}),type:"agent",message:l})}catch(s){r.addMessage({timestamp:new Date().toLocaleTimeString("en-GB",{hour:"2-digit",minute:"2-digit"}),type:"agent",message:`❌ Systemprüfung fehlgeschlagen: ${s.message}

Sie können trotzdem mit der Arbeit beginnen, aber einige Funktionen sind möglicherweise eingeschränkt.`})}}}}const Re=Ko();function Jo(){const e=parseInt(void 0)||160;return Hs({MIN_BUTTON_WIDTH:e})}const Ys=Jo(),os={hasNotification:!1,style:null};function Yo(){const{subscribe:e,set:n,update:a}=bt(os);return{subscribe:e,setNotification:i=>a(r=>({hasNotification:!0,style:i})),clearNotification:()=>n(os)}}const Ca=Yo();function Xo(){const{subscribe:e,set:n,update:a}=bt({history:[],messages:[{timestamp:new Date().toLocaleTimeString("en-GB",{hour:"2-digit",minute:"2-digit"}),type:"agent",message:`Willkommen bei ecKasse!

Eine Kasse, die hilft – nicht kostet.

👥 Verfügbare Benutzer:
• Admin (Vollzugriff)
• Kassier (Kassenfunktionen)
• Aushilfe (Grundfunktionen)

⏰ Überprüfe Systemzeit und ausstehende Transaktionen...

💡 Geben Sie einfach Ihre 4-6 stellige PIN ein - das System erkennt Sie automatisch. Bei neuer oder Testkasse: Admin-PIN ist 1234`}],draftMessage:null,shouldActivatePinpad:!0});return Ce.subscribe(i=>{if(i.lastMessage&&i.lastMessage.command==="firstRunAdminCreated"){const r=i.lastMessage.payload;a(s=>({...s,messages:[{timestamp:new Date().toLocaleTimeString("en-GB",{hour:"2-digit",minute:"2-digit"}),type:"agent",message:r.message||`Willkommen! Admin-Benutzer '${r.username}' wurde erstellt mit PIN: ${r.password}`}]}))}}),{subscribe:e,addMessage:i=>{a(r=>({...r,messages:[...r.messages,i]})),i.style&&tn(nt)!=="agent"&&Ca.setNotification(i.style)},setHistory:i=>{a(r=>({...r,history:i}))},getHistory:()=>{let i;return e(r=>i=r.history)(),i},clearMessages:()=>{a(i=>({...i,messages:[]}))},startDraftMessage:()=>{a(i=>({...i,draftMessage:{id:"draft-"+Date.now(),timestamp:new Date().toLocaleTimeString("en-GB",{hour:"2-digit",minute:"2-digit"}),type:"user",message:"",isDraft:!0}}))},updateDraftMessage:i=>{a(r=>({...r,draftMessage:r.draftMessage?{...r.draftMessage,message:i}:null}))},finalizeDraftMessage:()=>{a(i=>{if(!i.draftMessage)return i;const r={...i.draftMessage,isDraft:!1};return{...i,messages:[...i.messages,r],draftMessage:null}})},cancelDraftMessage:()=>{a(i=>({...i,draftMessage:null}))},sendMessage:async i=>{if(!(!i||!i.trim()))try{const s=tn(An).sessionId,o={timestamp:new Date().toLocaleTimeString("en-GB",{hour:"2-digit",minute:"2-digit"}),type:"user",message:i};let u;e(p=>u=p)(),a(p=>({...p,messages:[...p.messages,o],draftMessage:null}));const l=await fetch("/api/llm/ping-gemini",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:i,history:u.history,sessionId:s})});if(!l.ok)throw new Error(`HTTP error! status: ${l.status}`);const c=await l.json(),C={timestamp:new Date().toLocaleTimeString("en-GB",{hour:"2-digit",minute:"2-digit"}),type:"agent",message:c.gemini_response_text};a(p=>({...p,messages:[...p.messages,C],history:c.history}))}catch(r){console.error("Failed to send message to AI:",r);const s={timestamp:new Date().toLocaleTimeString("en-GB",{hour:"2-digit",minute:"2-digit"}),type:"agent",message:"Sorry, I encountered an error. Please try again."};a(o=>({...o,messages:[...o.messages,s]}))}},shouldActivatePinpadOnLoad(){let i=!1;return a(r=>(i=r.shouldActivatePinpad,{...r,shouldActivatePinpad:!1})),i}}}const he=Xo(),Sn=Object.freeze(Object.defineProperty({__proto__:null,agentStore:he},Symbol.toStringTag,{value:"Module"})),Qo=()=>typeof localStorage<"u"&&localStorage.getItem("app-locale")||"de-DE",ia=bt(Qo());ia.subscribe(e=>{typeof localStorage<"u"&&localStorage.setItem("app-locale",e)});const el=e=>{ia.set(e)},Mt=(e,n="EUR")=>{const a=tn(ia);return e==null||isNaN(e)?new Intl.NumberFormat(a,{style:"currency",currency:n}).format(0):new Intl.NumberFormat(a,{style:"currency",currency:n}).format(e)},tl=(e,n={})=>{const a=tn(ia);if(!e)return"";const i=typeof e=="string"?new Date(e):e;if(isNaN(i.getTime()))return"";const r={year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",...n};return new Intl.DateTimeFormat(a,r).format(i)};var nl=U('<div class="loading svelte-1dtcyze">Loading receipts...</div>'),al=U('<div class="error svelte-1dtcyze"> </div>'),rl=U('<div class="empty svelte-1dtcyze">No receipts found.</div>'),sl=U('<span class="receipt-table-large svelte-1dtcyze"> </span>'),il=U('<div><span class="item-qty svelte-1dtcyze"> </span> <span> </span> <span> </span></div>'),ol=U('<div class="receipt-details svelte-1dtcyze"><div class="items-list svelte-1dtcyze"></div> <div class="receipt-totals svelte-1dtcyze"><div class="total-row svelte-1dtcyze"><span>Tax:</span> <span class="price svelte-1dtcyze"> </span></div> <div class="total-row total svelte-1dtcyze"><span>Total:</span> <span class="price svelte-1dtcyze"> </span></div></div> <div class="receipt-actions svelte-1dtcyze"><button class="action-button svelte-1dtcyze">🖨️ Reprint</button></div></div>'),ll=U('<div><button class="receipt-summary svelte-1dtcyze"><div class="receipt-left svelte-1dtcyze"><div class="receipt-main-line svelte-1dtcyze"><span class="receipt-id-large svelte-1dtcyze"> </span> <!></div> <div class="receipt-date svelte-1dtcyze"> </div> <div class="receipt-payment svelte-1dtcyze"> </div></div> <div class="receipt-right svelte-1dtcyze"><div class="receipt-price svelte-1dtcyze"><span class="price svelte-1dtcyze"> </span></div> <div class="receipt-meta svelte-1dtcyze"><div class="receipt-items-count svelte-1dtcyze"> </div></div></div> <div class="expand-icon svelte-1dtcyze"> </div></button> <!></div>'),cl=U('<div class="receipt-list svelte-1dtcyze"></div>'),ul=U('<div class="receipt-feed svelte-1dtcyze"><!></div>');function dl(e,n){_t(n,!1);const[a,i]=Ma(),r=()=>ut(Ha,"$receiptsStore",a);let s=$e(n,"autoExpandLatest",8,!1),o=K(null),u=K(!1),l=K();nn(()=>{Ha.loadReceipts()});function c(v){g(u,!0),g(o,t(o)===v?null:v)}function C(v){return tl(v)}function p(v){return v.notes==="STORNO"&&v.display_names&&v.display_names.menu&&v.display_names.menu.de?`STORNO: ${v.display_names.menu.de}`:v.notes==="DISCOUNT"?"DISCOUNT":v.notes==="SURCHARGE"?"SURCHARGE":v.display_names&&v.display_names.menu&&v.display_names.menu.de?v.display_names.menu.de:"Unnamed Item"}function S(v){return v.notes==="STORNO"||v.notes==="DISCOUNT"||v.notes==="SURCHARGE"}function h(v){if(v.notes==="DISCOUNT"||v.notes==="SURCHARGE")return"";const D=parseFloat(v.quantity);return D===1?"":D+"x"}async function _(v){ee("INFO",`Reprint requested for receipt №${v.id}`),he.addMessage({timestamp:new Date().toLocaleTimeString("en-GB",{hour:"2-digit",minute:"2-digit"}),type:"agent",message:`Reprint initiated for receipt №${v.id}`,style:"info"}),Ce.send("reprintReceipt",{transactionId:v.id})}qe(()=>V(s()),()=>{s()&&g(u,!1)}),qe(()=>(V(s()),t(u),r(),t(o)),()=>{if(s()&&!t(u)&&r().receipts.length>0){const D=r().receipts.sort((L,y)=>new Date(y.fiscal_timestamp||y.updated_at)-new Date(L.fiscal_timestamp||L.updated_at))[0]?.id;D&&t(o)!==D&&g(o,D)}}),hn(),At();var E=ul(),A=f(E);{var q=v=>{var D=nl();M(v,D)},H=v=>{var D=Be(),L=we(D);{var y=I=>{var Y=al(),P=f(Y);ce(()=>ie(P,`Error: ${r(),x(()=>r().error)??""}`)),M(I,Y)},d=I=>{var Y=Be(),P=we(Y);{var W=T=>{var ne=rl();M(T,ne)},J=T=>{var ne=cl();Dt(ne,5,()=>(r(),x(()=>r().receipts.sort((z,j)=>new Date(z.fiscal_timestamp||z.updated_at)-new Date(j.fiscal_timestamp||j.updated_at)))),z=>z.id,(z,j)=>{var Ee=ll();let ke;var _e=f(Ee),me=f(_e),w=f(me),B=f(w),Q=f(B),oe=b(B,2);{var re=N=>{var Z=sl(),de=f(Z);ce(()=>ie(de,`#${t(j),x(()=>t(j).metadata.table)??""}`)),M(N,Z)};X(oe,N=>{t(j),x(()=>t(j).metadata?.table)&&N(re)})}var te=b(w,2),ge=f(te),se=b(te,2),ue=f(se),fe=b(me,2),ve=f(fe),Le=f(ve),Se=f(Le),Te=b(ve,2),je=f(Te),Ue=f(je),Ve=b(fe,2),xe=f(Ve),ye=b(_e,2);{var le=N=>{var Z=ol(),de=f(Z);Dt(de,5,()=>(t(j),x(()=>t(j).items)),Ge=>Ge.id,(Ge,Ie)=>{var We=il();let ht;var Tt=f(We),Cn=f(Tt),_n=b(Tt,2);let Fe;var et=f(_n),Ct=b(_n,2);let rt;var Ke=f(Ct);ce((Gt,Nt,sn,Rt,Wt,on)=>{ht=tt(We,1,"item-row svelte-1dtcyze",null,ht,Gt),ie(Cn,Nt),Fe=tt(_n,1,"item-name svelte-1dtcyze",null,Fe,sn),ie(et,Rt),rt=tt(Ct,1,"item-price svelte-1dtcyze",null,rt,Wt),ie(Ke,on)},[()=>({"modification-item":S(t(Ie))}),()=>(t(Ie),x(()=>h(t(Ie)))),()=>({"modification-name":S(t(Ie))}),()=>(t(Ie),x(()=>p(t(Ie)))),()=>({"negative-price":parseFloat(t(Ie).total_price)<0}),()=>(V(Mt),t(Ie),x(()=>Mt(t(Ie).total_price)))]),M(Ge,We)});var be=b(de,2),ze=f(be),ot=b(f(ze),2),lt=f(ot),Je=b(ze,2),at=b(f(Je),2),wt=f(at),dt=b(be,2),ct=f(dt);ce((Ge,Ie)=>{ie(lt,Ge),ie(wt,Ie)},[()=>(V(Mt),t(j),x(()=>Mt(t(j).tax_amount))),()=>(V(Mt),t(j),x(()=>Mt(t(j).total_amount)))]),ae("click",ct,()=>_(t(j))),M(N,Z)};X(ye,N=>{t(o),t(j),x(()=>t(o)===t(j).id)&&N(le)})}ce((N,Z,de)=>{ke=tt(Ee,1,"receipt-item svelte-1dtcyze",null,ke,N),ie(Q,`№${t(j),x(()=>t(j).id)??""}`),ie(ge,Z),ie(ue,(t(j),x(()=>t(j).payment_type||"Unknown"))),ie(Se,de),ie(Ue,`${t(j),x(()=>t(j).items?.length||0)??""} items`),ie(xe,(t(o),t(j),x(()=>t(o)===t(j).id?"▼":"▶")))},[()=>({expanded:t(o)===t(j).id}),()=>(t(j),x(()=>C(t(j).fiscal_timestamp||t(j).updated_at))),()=>(V(Mt),t(j),x(()=>Mt(t(j).total_amount)))]),ae("click",_e,()=>c(t(j).id)),M(z,Ee)}),mn(ne,z=>g(l,z),()=>t(l)),M(T,ne)};X(P,T=>{r(),x(()=>r().receipts.length===0)?T(W):T(J,!1)},!0)}M(I,Y)};X(L,I=>{r(),x(()=>r().error)?I(y):I(d,!1)},!0)}M(v,D)};X(A,v=>{r(),x(()=>r().loading)?v(q):v(H,!1)})}M(e,E),yt(),i()}var fl=U('<button class="order-item svelte-1gswy6n"><div class="table-number svelte-1gswy6n"> </div> <div class="order-stats svelte-1gswy6n"><div class="stat-price svelte-1gswy6n"> </div> <div class="stat-open svelte-1gswy6n"> </div> <div class="stat-activity svelte-1gswy6n"> </div></div></button>'),vl=U('<div class="parked-orders-container svelte-1gswy6n"><div class="orders-list svelte-1gswy6n"></div></div>');function pl(e,n){_t(n,!1);let a=K([]),i,r,s=!1;nn(async()=>{i=Yn.subscribe(h=>{g(a,h)}),r=Ce.subscribe(async h=>{h.connected&&!s&&(s=!0,await Yn.refreshParkedOrders())})}),Ws(()=>{i&&i(),r&&r()});async function o(h){try{let _;if(Ze.subscribe(A=>_=A)(),_.transactionId&&_.status==="active"){const A=_.items&&_.items.length>0,q=_.metadata&&_.metadata.table;if(A&&q)await Ze.parkCurrentOrder(q,1,!1),await Yn.refreshParkedOrders();else if(A&&!q){nt.set("order"),Re.activateTableEntry();return}else Ze.resetOrder()}const E=await Yn.activateOrder(h.id,!1);Ze.loadOrder(E)}catch(_){console.error("Failed to switch to order:",_)}}function u(h){const E=(h.metadata||{}).table||h.id.toString();return E.length>3?`#${E.substring(0,3)}`:`#${E}`}function l(h){return qa.formatTimeElapsed(h)}function c(h){const _=l(h.created_at),E=l(h.updated_at);return{price:Mt(h.total_amount),openMinutes:_,activityMinutes:E}}At();var C=Be(),p=we(C);{var S=h=>{var _=vl(),E=f(_);Dt(E,5,()=>t(a),A=>A.id,(A,q)=>{var H=fl(),v=f(H),D=f(v),L=b(v,2),y=f(L),d=f(y),I=b(y,2),Y=f(I),P=b(I,2),W=f(P);ce((J,T,ne,z)=>{ie(D,J),ie(d,T),ie(Y,`${ne??""}min`),ie(W,`${z??""}min`)},[()=>u(t(q)),()=>c(t(q)).price,()=>c(t(q)).openMinutes,()=>c(t(q)).activityMinutes]),ae("click",H,()=>o(t(q))),M(A,H)}),M(h,_)};X(p,h=>{t(a).length>0&&h(S)})}M(e,C),yt()}var ml=Rr(`<svg viewBox="0 0 100 100" preserveAspectRatio="xMidYMid meet" style="width: 100%; height: 100%;"><defs><filter height="150%" id="sh0" width="150%" x="-0.25" y="-0.25"><feConvolveMatrix id="3_|_y" in="SourceAlpha" result="19y" order="1,17" divisor="6632" bias="0" preserveAlpha="false" kernelMatrix=" 10 30 77 169 320 527 752 931 1000 931 752 527 320 169 77 30 10"></feConvolveMatrix><feConvolveMatrix id="3_|_x" result="19x" order="17,1" divisor="6632" bias="0" preserveAlpha="false" kernelMatrix=" 10 30 77 169 320 527 752 931 1000 931 752 527 320 169 77 30 10"></feConvolveMatrix><feConvolveMatrix id="9_|_y" in="SourceAlpha" result="49y" order="1,47" divisor="19856" bias="0" preserveAlpha="false" kernelMatrix=" 15 21 30 42 57 77 101 132 169 212 263 320 384 453 527 603 678 752 820 881 931 968 992 1000 992 968 931 881 820 752 678 603 527 453 384 320 263 212 169 132 101 77 57 42 30 21 15"></feConvolveMatrix><feConvolveMatrix id="9_|_x" result="49x" order="47,1" divisor="19856" bias="0" preserveAlpha="false" kernelMatrix=" 15 21 30 42 57 77 101 132 169 212 263 320 384 453 527 603 678 752 820 881 931 968 992 1000 992 968 931 881 820 752 678 603 527 453 384 320 263 212 169 132 101 77 57 42 30 21 15"></feConvolveMatrix><feTurbulence class="seed" result="noise" type="fractalNoise" stitchTiles="stitch" seed="43" baseFrequency="0.06 0.08 " numOctaves="3"></feTurbulence><feMorphology operator="erode" radius="1.2"></feMorphology><feComposite in="noise" operator="arithmetic" k1="0" k2="8" k3="0" k4="-3"></feComposite><feComposite in="49x" result="49noise" operator="arithmetic" k1="0" k2="2" k3="-0.2" k4="-1"></feComposite><feComposite in="49noise" in2="19x" operator="arithmetic" k1="0" k2="0.5" k3="1.5" k4="-1"></feComposite><feDiffuseLighting surfaceScale="2" lighting-color="#fff"><feDistantLight azimuth="240" elevation="20"></feDistantLight></feDiffuseLighting><feComposite in2="SourceGraphic" operator="arithmetic" k1="1" k2="0" k3="0" k4="0"></feComposite></filter><filter height="170%" id="sh2" width="170%" x="-0.2" y="-0.2"><feOffset dx="0" dy="0" in="SourceAlpha"></feOffset><feGaussianBlur stdDeviation="1.2"></feGaussianBlur><feColorMatrix result="out" type="matrix" values=" 
               0 0 0 0 0.4         
               0 0 0 0 0.4                    
               0 0 0 0 0.4                
               0 0 0 10 0 "></feColorMatrix><feMerge><feMergeNode in="out"></feMergeNode><feMergeNode in="SourceGraphic"></feMergeNode></feMerge></filter><filter height="130%" id="sh1" width="130%" x="-0.2" y="-0.2"><feOffset dx="3" dy="4" in="SourceAlpha"></feOffset><feGaussianBlur stdDeviation="3"></feGaussianBlur><feColorMatrix type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.8 0"></feColorMatrix><feBlend in="SourceGraphic"></feBlend></filter><linearGradient id="svg_66" x1="0" x2="1" y1="0" y2="0"><stop offset="0" stop-color="hsl(40, 23%, 35%)"></stop><stop offset="0.4" stop-color="hsl(40, 23%, 60%)"></stop><stop offset="0.65" stop-color="hsl(40, 23%, 70%)"></stop><stop offset="0.75" stop-color="hsl(40, 23%, 60%)"></stop><stop offset="1" stop-color="hsl(40, 23%, 35%)"></stop></linearGradient><circle id="bell" fill="#070" stroke="#030" r="5.5" filter="url(#sh0)"></circle><g id="cap" filter="url(#sh2)"><path id="capPath" fill="#070" filter="url(#sh0)" stroke="#030" d="M72,89 C78.6,68 67.2,30.7 89,68 C86.9,37.6 66.91,32 62,61 C58,44.1 67.5,38.8 52,10 C53.6,47 46.91,36.2 45,61 C39.3,43.4 22,46.6 13,43 C32.9,55.8 35.7,66.62 32,89 C35,97.9 68.6,99 72,89 Z"></path><use id="bell1" x="13" y="43" href="#bell"></use><use id="bell2" x="52" y="10" href="#bell"></use><use id="bell3" x="89" y="68" href="#bell"></use><ellipse cx="52.19" cy="90.01" fill="url(#svg_66)" rx="14.76" ry="3.56"></ellipse><path d="M34,86.5C36,82,53.5,81,60,83C54,81,34,81.5,34,86.5Z" fill="none" stroke="hsl(40, 23%, 60%)"></path></g></defs><use href="#cap"></use></svg>`);function gl(e){var n=ml();M(e,n)}var hl=U('<div class="slot-container svelte-rbbn8n"><!></div>'),Cl=U('<div class="button-icon-wrapper svelte-rbbn8n"><span class="button-icon svelte-rbbn8n"><!></span></div>'),_l=U("<div></div>"),yl=U("<!> <!>",1),bl=U('<span class="button-text svelte-rbbn8n"><!></span>'),wl=U('<button><div class="button-shape svelte-rbbn8n"><!></div></button>');function Jt(e,n){const a=yo(n);_t(n,!1);const i=K(),r=K(),s=K();let o=$e(n,"label",8,""),u=$e(n,"icon",8,""),l=$e(n,"color",8,"#666666"),c=$e(n,"textColor",8,""),C=$e(n,"backgroundStyle",8,""),p=$e(n,"customStyle",8,""),S=$e(n,"disabled",8,!1),h=$e(n,"data",8,null),_=$e(n,"width",8,120),E=$e(n,"height",8,80),A=$e(n,"shape",8,"rect"),q=$e(n,"side",8,""),H=$e(n,"active",8,!1),v=$e(n,"showShape",8,""),D=$e(n,"notificationStyle",8,null);const L=$n();let y,d=!1;function I(){!S()&&!d&&L("click",{data:h(),label:o()})}function Y(_e){S()||(_e.preventDefault(),L("secondaryaction",{data:h(),label:o(),mouseX:_e.clientX,mouseY:_e.clientY,originalEvent:_e}))}function P(_e){!S()&&_e.button===0&&(d=!1,y=setTimeout(()=>{d=!0,L("secondaryaction",{data:h(),label:o(),mouseX:_e.clientX,mouseY:_e.clientY,originalEvent:_e})},500))}function W(){clearTimeout(y),setTimeout(()=>{d=!1},10)}function J(){clearTimeout(y),d=!1}qe(()=>V(q()),()=>{g(i,q()==="left"||q()==="right")}),qe(()=>V(o()),()=>{g(r,o())}),qe(()=>(V(A()),t(i),V(q())),()=>{g(s,A()==="hex"&&t(i)?q()==="left"?"polygon(0% 0%, 100% 25%, 100% 75%, 0% 100%)":"polygon(0% 25%, 100% 0%, 100% 100%, 0% 75%)":A()==="hex"?"polygon(50% 0%, 100% 25%, 100% 75%, 50% 100%, 0% 75%, 0% 25%)":"none")}),hn(),At();var T=wl();let ne;var z=f(T),j=f(z);{var Ee=_e=>{var me=hl(),w=f(me);_o(w,n,"default",{}),M(_e,me)},ke=_e=>{var me=Be(),w=we(me);{var B=oe=>{var re=yl(),te=we(re);{var ge=fe=>{var ve=Cl(),Le=f(ve),Se=f(Le);Xr(Se,u),M(fe,ve)};X(te,fe=>{u()&&fe(ge)})}var se=b(te,2);{var ue=fe=>{var ve=_l();ce(()=>tt(ve,1,`shape-overlay ${v()??""}`,"svelte-rbbn8n")),M(fe,ve)};X(se,fe=>{v()&&fe(ue)})}M(oe,re)},Q=oe=>{var re=Be(),te=we(re);{var ge=se=>{var ue=bl(),fe=f(ue);Xr(fe,()=>t(r)),ce(()=>sa(ue,p())),M(se,ue)};X(te,se=>{o()&&se(ge)},!0)}M(oe,re)};X(w,oe=>{u()||v()?oe(B):oe(Q,!1)},!0)}M(_e,me)};X(j,_e=>{x(()=>a.default)?_e(Ee):_e(ke,!1)})}ce(_e=>{ne=tt(T,1,`universal-button ${A()??""}`,"svelte-rbbn8n",ne,_e),sa(T,`
    --button-width: ${_()??""}px; 
    --button-height: ${E()??""}px; 
    --button-color: ${l()??""};
    ${c()?`--button-text-color: ${c()};`:""}
    ${C()?`--button-background-style: ${C()};`:""}
    --clip-path: ${t(s)??""};
  `)},[()=>({disabled:S(),half:t(i),left:q()==="left",right:q()==="right",active:H(),notification:!!D(),error:D()==="error",warning:D()==="warning",success:D()==="success",print:D()?.startsWith("print")})]),ae("click",T,I),ae("contextmenu",T,Y),ae("mousedown",T,P),ae("mouseup",T,W),ae("mouseleave",T,J),M(e,T),yt()}var xl=U('<span class="table-number svelte-x88uh0"> </span>'),Sl=U('<div class="pinpad-error-message svelte-x88uh0"> </div>'),kl=U('<span class="qty svelte-x88uh0"> </span>'),Ll=U('<span class="input-overlay svelte-x88uh0"> </span>'),Ml=U('<li><!> <div class="name-container svelte-x88uh0"><span> </span> <!></div> <span class="price svelte-x88uh0"> </span></li>'),El=U('<div class="view-content order-view svelte-x88uh0"><div class="orders-stack svelte-x88uh0"><div class="parked-orders-section svelte-x88uh0"><!></div> <div class="active-order-section svelte-x88uh0"><div class="order-content svelte-x88uh0"><h2 class="svelte-x88uh0"><span class="order-number svelte-x88uh0"> </span><!></h2> <!> <div class="scrollable-items-content svelte-x88uh0"><ul class="item-list svelte-x88uh0"></ul></div> <div class="spacer svelte-x88uh0"></div> <div class="total svelte-x88uh0"><span class="svelte-x88uh0">Total:</span> <span class="price svelte-x88uh0"> </span></div></div></div></div></div>'),Al=U('<div class="view-content receipts-view svelte-x88uh0"><div class="receipts-stack svelte-x88uh0"><!></div></div>'),Tl=U('<div class="agent-header-icon svelte-x88uh0"><!></div>'),Il=U('<div class="message-actions svelte-x88uh0"></div>'),Bl=U('<div><div class="message-header svelte-x88uh0"><span class="message-timestamp svelte-x88uh0"> </span> <span class="message-type svelte-x88uh0"> </span></div> <div class="message-content svelte-x88uh0"> </div> <!></div>'),Dl=U(' <span class="cursor svelte-x88uh0">|</span>',1),$l=U(' <span class="cursor svelte-x88uh0">|</span>',1),Rl=U('<span class="cursor svelte-x88uh0">|</span>'),Ol=U('<div class="agent-message user draft svelte-x88uh0"><div class="message-header svelte-x88uh0"><span class="message-timestamp svelte-x88uh0"> </span> <span class="message-type svelte-x88uh0">User</span></div> <div class="message-content svelte-x88uh0"><!></div></div>'),Pl=U('<div class="view-content agent-view svelte-x88uh0"><!> <div class="scroll-content svelte-x88uh0"><div class="agent-messages svelte-x88uh0"><!> <!></div></div></div>'),Nl=U('<div class="console-view svelte-x88uh0"><div class="content-area svelte-x88uh0"><!></div></div>');function Fl(e,n){_t(n,!1);const[a,i]=Ma(),r=()=>ut(Ze,"$orderStore",a),s=()=>ut(nt,"$currentView",a),o=()=>ut(Ha,"$receiptsStore",a),u=()=>ut(he,"$agentStore",a),l=()=>ut(Re,"$pinpadStore",a),c=()=>ut(Ys,"$uiConstantsStore",a),C=$n();let p=K(),S=K(),h=K(),_=!1,E=K(!1),A=!1,q=K(!1),H=K("order"),v=K(!1),D=K(r().status),L=K(r().items.length),y=K(r().transactionId),d=K(r().metadata?.table);nn(()=>{setTimeout(()=>{if(A||(J(),W(),A=!0),s()==="agent"&&he.shouldActivatePinpadOnLoad()&&Re.activate("agent",()=>{},()=>{},"numeric"),t(p)){const w=new ResizeObserver(()=>{t(p)&&g(q,t(p).scrollHeight>t(p).clientHeight)});return w.observe(t(p)),g(q,t(p).scrollHeight>t(p).clientHeight),()=>{w.disconnect()}}},200)}),Ro(()=>{if(!t(E)){let w=null;s()==="order"?w=t(S):s()==="agent"?w=t(p):s()==="receipts"&&(w=t(h)),w&&setTimeout(()=>{if(w&&!t(E)){if(W(),s()==="agent"&&t(p)){const B=t(p).scrollHeight>t(p).clientHeight;B!==t(q)&&g(q,B)}_||(g(E,!0),w.scrollTop=w.scrollHeight,setTimeout(()=>{g(E,!1),W()},100))}},50)}});function I(w){if(typeof w=="object"&&w!==null)return w;if(typeof w=="string")try{return JSON.parse(w)}catch{return w}return w}function Y(){const B={timestamp:new Date().toLocaleTimeString("en-GB",{hour:"2-digit",minute:"2-digit"}),type:"agent",message:"Select language / Sprache auswählen / Выберите язык:",actions:[{id:"lang-de",label:"DE",action:"selectLanguage",param:"DE"},{id:"lang-en",label:"EN",action:"selectLanguage",param:"EN"},{id:"lang-ru",label:"RU",action:"selectLanguage",param:"RU"}]};he.addMessage(B),setTimeout(()=>{t(p)&&(He(p,t(p).scrollTop=t(p).scrollHeight),W())},100)}function P(w,B){if(w==="selectLanguage"){Re.switchLanguage(B);const Q=u().messages.filter(te=>!te.actions);he.clearMessages(),Q.forEach(te=>he.addMessage(te));const re={timestamp:new Date().toLocaleTimeString("en-GB",{hour:"2-digit",minute:"2-digit"}),type:"agent",message:`Language changed to ${B}`};he.addMessage(re),setTimeout(()=>{t(p)&&(He(p,t(p).scrollTop=t(p).scrollHeight),W())},100)}}function W(){if(!t(E)){let w=null;if(s()==="order"?w=t(S):s()==="agent"?w=t(p):s()==="receipts"&&(w=t(h)),w){const Q=w.scrollTop,oe=w.clientHeight,re=w.scrollHeight;_=Q+oe>=re-1}else _=!0;C("scrollstate",_)}}function J(){let w=null;s()==="order"?w=t(S):s()==="agent"?w=t(p):s()==="receipts"&&(w=t(h)),w&&(w.scrollTop=w.scrollHeight,_=!0)}function T(){if(tn(Ca).hasNotification){nt.set("agent");return}let B;switch(t(H)){case"order":B=["order","receipts","agent"];break;case"receipts":B=["receipts","order","agent"];break;case"agent":B=["agent","order","receipts"];break;default:B=["order","receipts","agent"]}const oe=(B.indexOf(s())+1)%B.length,re=B[oe];s()==="receipts"&&re!=="receipts"&&g(v,!1),nt.set(re)}function ne(){return _}nn(()=>{const w=Ce.subscribe(B=>{if(B.lastMessage?.command==="menu-import-progress"){const Q=new Date().toLocaleTimeString("en-GB",{hour:"2-digit",minute:"2-digit"});he.addMessage({timestamp:Q,type:"agent",message:B.lastMessage.payload.message}),setTimeout(()=>{t(p)&&s()==="agent"&&(He(p,t(p).scrollTop=t(p).scrollHeight),W())},100)}});return()=>{w()}}),typeof window<"u"&&window.electronAPI&&window.electronAPI.onImportComplete&&window.electronAPI.onImportComplete((w,B)=>{const Q=new Date().toLocaleTimeString("en-GB",{hour:"2-digit",minute:"2-digit"});he.addMessage({timestamp:Q,type:"agent",message:B}),w&&(ee("INFO","Refreshing categories after successful menu import"),Ce.send({command:"getCategories"}),setTimeout(()=>{const oe=new Date().toLocaleTimeString("en-GB",{hour:"2-digit",minute:"2-digit"});he.addMessage({timestamp:oe,type:"agent",message:"Menu import completed successfully! Your new menu structure is now ready for use. You can navigate back to the selection area to explore the imported categories and products."}),setTimeout(()=>{t(p)&&s()==="agent"&&(He(p,t(p).scrollTop=t(p).scrollHeight),W())},100)},1e3)),setTimeout(()=>{t(p)&&s()==="agent"&&(He(p,t(p).scrollTop=t(p).scrollHeight),W())},100)}),qe(()=>(s(),Ca),()=>{s()==="agent"&&Ca.clearNotification()}),qe(()=>(t(D),r(),t(h)),()=>{t(D)==="finished"&&r().status==="idle"&&(g(H,"receipts"),g(v,!0),nt.set("receipts"),Ha.refresh(),setTimeout(()=>{t(h)&&(He(h,t(h).scrollTop=t(h).scrollHeight),W())},300)),g(D,r().status)}),qe(()=>(o(),t(h),s()),()=>{o().receipts&&t(h)&&s()==="receipts"&&setTimeout(()=>{W()},100)}),qe(()=>(u(),t(p),s(),t(q)),()=>{u().messages&&t(p)&&s()==="agent"&&setTimeout(()=>{if(t(p)){const w=t(p).scrollHeight>t(p).clientHeight;w!==t(q)&&g(q,w)}},100)}),qe(()=>(s(),t(S),r(),t(L),t(y),t(d)),()=>{if(s()==="order"&&t(S)){const w=r().items.length,B=r().transactionId,Q=r().metadata?.table;(w!==t(L)||B!==t(y)||Q!==t(d))&&setTimeout(()=>{t(S)&&He(S,t(S).scrollTop=t(S).scrollHeight)},100),g(L,w),g(y,B),g(d,Q)}}),hn(),At();var z=Nl(),j=f(z),Ee=f(j);{var ke=w=>{var B=El(),Q=f(B),oe=f(Q),re=f(oe);pl(re,{});var te=b(oe,2),ge=f(te),se=f(ge),ue=f(se),fe=f(ue),ve=b(ue);{var Le=le=>{var N=xl(),Z=f(N);ce(()=>ie(Z,`#${l(),r(),x(()=>l().isActive&&l().mode==="table"?l().liveValue:r().metadata?.table)??""}`)),M(le,N)};X(ve,le=>{r(),l(),x(()=>r().metadata?.table||l().isActive&&l().mode==="table")&&le(Le)})}var Se=b(se,2);{var Te=le=>{var N=Sl(),Z=f(N);ce(()=>ie(Z,(l(),x(()=>l().errorMessage)))),M(le,N)};X(Se,le=>{l(),x(()=>l().errorMessage)&&le(Te)})}var je=b(Se,2),Ue=f(je);Dt(Ue,5,()=>(r(),x(()=>r().items)),le=>le.id,(le,N)=>{var Z=Ml();let de;var be=f(Z);{var ze=Ie=>{var We=kl(),ht=f(We);ce(Tt=>ie(ht,`${Tt??""}x`),[()=>(t(N),x(()=>parseFloat(t(N).quantity)))]),M(Ie,We)};X(be,Ie=>{t(N),x(()=>parseFloat(t(N).quantity)>1)&&Ie(ze)})}var ot=b(be,2),lt=f(ot);let Je;var at=f(lt),wt=b(lt,2);{var dt=Ie=>{var We=Ll(),ht=f(We);ce(()=>ie(ht,(l(),x(()=>l().liveValue)))),M(Ie,We)};X(wt,Ie=>{r(),t(N),l(),x(()=>r().activeTransactionItemId===t(N).id&&l().isActive&&l().mode!=="agent"&&l().liveValue)&&Ie(dt)})}var ct=b(ot,2),Ge=f(ct);ce((Ie,We,ht,Tt)=>{de=tt(Z,1,"svelte-x88uh0",null,de,Ie),Je=tt(lt,1,"name svelte-x88uh0",null,Je,We),ie(at,ht),ie(Ge,Tt)},[()=>({active:r().activeTransactionItemId===t(N).id}),()=>({"input-mode":r().activeTransactionItemId===t(N).id&&l().isActive&&l().mode!=="agent"&&l().liveValue}),()=>(t(N),x(()=>t(N).display_names?I(t(N).display_names).menu.de||"N/A":"Loading...")),()=>(V(Mt),t(N),x(()=>Mt(parseFloat(t(N).total_price))))]),M(le,Z)});var Ve=b(je,4),xe=b(f(Ve),2),ye=f(xe);mn(Q,le=>g(S,le),()=>t(S)),ce(le=>{ie(fe,`Order №${r(),x(()=>r().transactionId||"...")??""}`),ie(ye,le)},[()=>(V(Mt),r(),x(()=>Mt(r().total)))]),ae("scroll",Q,()=>!t(E)&&W()),M(w,B)},_e=w=>{var B=Be(),Q=we(B);{var oe=te=>{var ge=Al(),se=f(ge),ue=f(se);dl(ue,{get autoExpandLatest(){return t(v)}}),mn(se,fe=>g(h,fe),()=>t(h)),ae("scroll",se,()=>!t(E)&&W()),M(te,ge)},re=te=>{var ge=Be(),se=we(ge);{var ue=fe=>{var ve=Pl(),Le=f(ve);{var Se=ye=>{var le=Tl(),N=f(le);gl(N),M(ye,le)};X(Le,ye=>{t(q)||ye(Se)})}var Te=b(Le,2),je=f(Te),Ue=f(je);Dt(Ue,1,()=>(u(),x(()=>u().messages)),xa,(ye,le)=>{var N=Bl();let Z;var de=f(N),be=f(de),ze=f(be),ot=b(be,2),lt=f(ot),Je=b(de,2),at=f(Je),wt=b(Je,2);{var dt=ct=>{var Ge=Il();Dt(Ge,5,()=>(t(le),x(()=>t(le).actions)),xa,(Ie,We)=>{{let ht=pt(()=>(t(We),x(()=>({display:t(We).label,action:()=>P(t(We).action,t(We).param)})))),Tt=pt(()=>(c(),x(()=>({width:c().MIN_BUTTON_WIDTH,height:Math.round(c().MIN_BUTTON_WIDTH*.4)}))));Jt(Ie,{get content(){return t(ht)},get size(){return t(Tt)},style:"rectangular"})}}),M(ct,Ge)};X(wt,ct=>{t(le),x(()=>t(le).actions)&&ct(dt)})}ce(ct=>{Z=tt(N,1,"agent-message svelte-x88uh0",null,Z,ct),ie(ze,(t(le),x(()=>t(le).timestamp))),ie(lt,(t(le),x(()=>t(le).type==="user"?"User":"Agent"))),ie(at,(t(le),x(()=>t(le).message)))},[()=>({user:t(le).type==="user",agent:t(le).type==="agent",error:t(le).style==="error",success:t(le).style==="success",warning:t(le).style==="warning",print:t(le).style?.startsWith("print")})]),M(ye,N)});var Ve=b(Ue,2);{var xe=ye=>{var le=Ol(),N=f(le),Z=f(N),de=f(Z),be=b(N,2),ze=f(be);{var ot=Je=>{var at=Dl(),wt=we(at);ce(dt=>ie(wt,dt),[()=>(l(),x(()=>"*".repeat(l().liveValue.length)))]),M(Je,at)},lt=Je=>{var at=Be(),wt=we(at);{var dt=Ge=>{var Ie=$l(),We=we(Ie);ce(()=>ie(We,(u(),x(()=>u().draftMessage.message)))),M(Ge,Ie)},ct=Ge=>{var Ie=Rl();M(Ge,Ie)};X(wt,Ge=>{l(),u(),x(()=>l().layout==="alpha"&&u().draftMessage)?Ge(dt):Ge(ct,!1)},!0)}M(Je,at)};X(ze,Je=>{l(),x(()=>l().layout==="numeric")?Je(ot):Je(lt,!1)})}ce(Je=>ie(de,Je),[()=>x(()=>new Date().toLocaleTimeString("en-GB",{hour:"2-digit",minute:"2-digit"}))]),M(ye,le)};X(Ve,ye=>{l(),x(()=>l().isActive&&l().mode==="agent")&&ye(xe)})}mn(Te,ye=>g(p,ye),()=>t(p)),ae("scroll",Te,()=>!t(E)&&W()),M(fe,ve)};X(se,fe=>{s()==="agent"&&fe(ue)},!0)}M(te,ge)};X(Q,te=>{s()==="receipts"?te(oe):te(re,!1)},!0)}M(w,B)};X(Ee,w=>{s()==="order"?w(ke):w(_e,!1)})}M(e,z),$a(n,"scrollToBottom",J),$a(n,"cycleViews",T),$a(n,"getIsAtBottom",ne),$a(n,"displayLanguageSelector",Y);var me=yt({scrollToBottom:J,cycleViews:T,getIsAtBottom:ne,displayLanguageSelector:Y});return i(),me}const Nr=bt(!1);function jl(){Nr.update(e=>!e)}function Ul(){Nr.set(!1)}var zl=U('<div class="pinpad-grid numeric svelte-l3qs12"><button class="numpad-key svelte-l3qs12">1</button> <button class="numpad-key svelte-l3qs12">2</button> <button class="numpad-key svelte-l3qs12">3</button> <button class="function-key key-cancel svelte-l3qs12" aria-label="Cancel">X</button> <button class="numpad-key svelte-l3qs12">4</button> <button class="numpad-key svelte-l3qs12">5</button> <button class="numpad-key svelte-l3qs12">6</button> <button class="function-key key-correct svelte-l3qs12" aria-label="Correct">←</button> <button class="numpad-key svelte-l3qs12">7</button> <button class="numpad-key svelte-l3qs12">8</button> <button class="numpad-key svelte-l3qs12">9</button> <button class="function-key key-enter svelte-l3qs12" aria-label="Enter">↵</button> <button class="numpad-key function-key key-plus svelte-l3qs12">.99</button> <button class="numpad-key svelte-l3qs12">0</button> <button class="numpad-key function-key key-minus svelte-l3qs12">.</button></div>'),Zl=U('<button class="alpha-key letter-key svelte-l3qs12"> </button>'),Vl=U('<div class="alpha-row svelte-l3qs12"></div>'),ql=U('<div class="pinpad-grid alpha svelte-l3qs12"><!> <div class="alpha-bottom-row svelte-l3qs12"><button class="alpha-key space-key svelte-l3qs12" aria-label="Space">space</button> <button class="function-key cursor-key svelte-l3qs12" aria-label="Move cursor left">←</button> <button class="function-key cursor-key svelte-l3qs12" aria-label="Move cursor right">→</button> <button class="function-key language-key svelte-l3qs12" aria-label="Switch language"> </button> <button class="function-key key-cancel svelte-l3qs12" aria-label="Cancel">X</button> <button class="function-key key-correct svelte-l3qs12" aria-label="Backspace">⌫</button> <button class="function-key key-enter key-enter-large svelte-l3qs12" aria-label="Enter">↵</button></div></div>'),Hl=U('<div class="pinpad-wrapper svelte-l3qs12"><!></div>');function Gl(e,n){_t(n,!1);const[a,i]=Ma(),r=()=>ut(Re,"$pinpadStore",a);let s=$e(n,"onClose",8,()=>{}),o=$e(n,"minButtonSize",8,160),u=K(0),l=K(0),c=K(80),C=K(107),p=K(50),S=K(50),h=null,_=null;const E=6;let A=K(0),q=K(null),H=K(null),v=K(null),D=K(null);function L(me){Re.append(me,he)}function y(){Re.backspace(he)}function d(){Re.confirm()}function I(){Re.cancel(he)}function Y(){s()()}function P(me){_=me,h=setTimeout(()=>{_===me&&(Re.append(me.toUpperCase(),he),_=null)},500)}function W(){h&&(clearTimeout(h),h=null),_&&(Re.append(_.toLowerCase(),he),_=null)}function J(){h&&(clearTimeout(h),h=null),_=null}function T(){Re.moveCursorLeft()}function ne(){Re.moveCursorRight()}function z(){Re.switchLanguage()}qe(()=>(t(l),t(A),t(q)),()=>{t(l)>0&&Math.abs(t(l)-t(A))>5&&(t(q)&&clearTimeout(t(q)),g(q,setTimeout(()=>{g(A,t(l))},50)))}),qe(()=>(r(),t(A),t(H),t(v),t(D),V(o()),t(p),t(C)),()=>{const me=r().layout,w=r().currentLanguage;if(t(A)>0&&(t(H)!==me||t(v)!==w||t(D)!==o()||t(H)===null&&t(v)===null)){if(me==="alpha"&&r().layouts&&w){const B=r().layouts[w],Q=Math.max(...B.map(ge=>ge.length)),oe=t(A)-E*(Q-1);let re=Math.floor(oe/Q);const te=o();re>te&&(re=te),g(p,re),g(S,Math.floor(t(p)*(3/4)))}else if(me==="numeric"){const Q=t(A)-E*3;let oe=Math.floor(Q/4);const re=o();oe>re&&(oe=re),g(C,oe),g(c,Math.floor(t(C)*(3/4)))}g(H,me),g(v,w),g(D,o())}}),hn(),At();var j=Hl(),Ee=f(j);{var ke=me=>{var w=zl(),B=f(w),Q=b(B,2),oe=b(Q,2),re=b(oe,2),te=b(re,2),ge=b(te,2),se=b(ge,2),ue=b(se,2),fe=b(ue,2),ve=b(fe,2),Le=b(ve,2),Se=b(Le,2),Te=b(Se,2),je=b(Te,2),Ue=b(je,2);ce(()=>sa(w,`--button-height: ${t(c)??""}px; --button-width: ${t(C)??""}px;`)),ae("click",B,()=>L("1")),ae("click",Q,()=>L("2")),ae("click",oe,()=>L("3")),ae("click",re,I),ae("dblclick",re,Y),ae("click",te,()=>L("4")),ae("click",ge,()=>L("5")),ae("click",se,()=>L("6")),ae("click",ue,y),ae("click",fe,()=>L("7")),ae("click",ve,()=>L("8")),ae("click",Le,()=>L("9")),ae("click",Se,d),ae("click",Te,()=>L(".99")),ae("click",je,()=>L("0")),ae("click",Ue,()=>L(".")),M(me,w)},_e=me=>{var w=Be(),B=we(w);{var Q=oe=>{var re=ql(),te=f(re);Dt(te,1,()=>(r(),x(()=>r().layouts[r().currentLanguage])),xa,(Ue,Ve)=>{var xe=Vl();Dt(xe,5,()=>t(Ve),xa,(ye,le)=>{var N=Zl(),Z=f(N);ce(()=>{Mo(N,"aria-label",`Letter ${t(le)??""}`),ie(Z,t(le))}),ae("mousedown",N,()=>P(t(le))),ae("mouseup",N,W),ae("mouseleave",N,J),M(ye,N)}),M(Ue,xe)});var ge=b(te,2),se=f(ge),ue=b(se,2),fe=b(ue,2),ve=b(fe,2),Le=f(ve),Se=b(ve,2),Te=b(Se,2),je=b(Te,2);ce(()=>{sa(re,`--alpha-button-width: ${t(p)??""}px; --alpha-button-height: ${t(S)??""}px;`),ie(Le,(r(),x(()=>r().currentLanguage)))}),ae("click",se,()=>L(" ")),ae("click",ue,T),ae("click",fe,ne),ae("click",ve,z),ae("click",Se,I),ae("dblclick",Se,Y),ae("click",Te,y),ae("click",je,d),M(oe,re)};X(B,oe=>{r(),x(()=>r().layout==="alpha")&&oe(Q)},!0)}M(me,w)};X(Ee,me=>{r(),x(()=>r().layout==="numeric")?me(ke):me(_e,!1)})}ns(j,"clientHeight",me=>g(u,me)),ns(j,"clientWidth",me=>g(l,me)),M(e,j),yt(),i()}var Wl=U('<div class="detail-row svelte-yjty9j"><span class="label svelte-yjty9j">Description:</span> <span class="value svelte-yjty9j"> </span></div>'),Kl=U('<div class="detail-row svelte-yjty9j"><span class="label svelte-yjty9j">Allergens:</span> <span class="value svelte-yjty9j"> </span></div>'),Jl=U('<div class="detail-row svelte-yjty9j"><span class="label svelte-yjty9j">Dietary:</span> <span class="value svelte-yjty9j"> </span></div>'),Yl=U('<div class="detail-row svelte-yjty9j"><span class="label svelte-yjty9j">Category:</span> <span class="value svelte-yjty9j"> </span></div>'),Xl=U('<div class="detail-row svelte-yjty9j"><span class="label svelte-yjty9j">Status:</span> <span class="value svelte-yjty9j"> </span></div>'),Ql=U('<div class="detail-row svelte-yjty9j"><span class="label svelte-yjty9j">Last Modified:</span> <span class="value svelte-yjty9j"> </span></div>'),e1=U('<div class="detail-row svelte-yjty9j"><span class="label svelte-yjty9j">Product ID:</span> <span class="value svelte-yjty9j"> </span></div>'),t1=U('<div class="detail-row svelte-yjty9j"><span class="label svelte-yjty9j">Price:</span> <span class="value svelte-yjty9j"> </span></div> <!> <!> <!> <!> <!> <!> <!>',1),n1=U('<div class="detail-row svelte-yjty9j"><span class="label svelte-yjty9j">Type:</span> <span class="value svelte-yjty9j"> </span></div>'),a1=U('<div class="detail-row svelte-yjty9j"><span class="label svelte-yjty9j">Category ID:</span> <span class="value svelte-yjty9j"> </span></div>'),r1=U('<div class="detail-row svelte-yjty9j"><span class="label svelte-yjty9j">Parent Category:</span> <span class="value svelte-yjty9j"> </span></div>'),s1=U('<div class="detail-row svelte-yjty9j"><span class="label svelte-yjty9j">Main Group:</span> <span class="value svelte-yjty9j"> </span></div>'),i1=U('<div class="detail-row svelte-yjty9j"><span class="label svelte-yjty9j">Source ID:</span> <span class="value svelte-yjty9j"> </span></div>'),o1=U("<!> <!> <!> <!> <!>",1),l1=U('<div class="context-menu svelte-yjty9j"><div class="menu-header svelte-yjty9j"><h3 class="svelte-yjty9j"><!></h3></div> <div class="menu-content svelte-yjty9j"><!></div> <div class="menu-footer svelte-yjty9j"><button class="edit-button svelte-yjty9j">Edit</button> <button class="advanced-edit-button svelte-yjty9j">Advanced Edit</button> <button class="close-button svelte-yjty9j">Close</button></div></div>');function c1(e,n){_t(n,!1);const a=K(),i=K(),r=K();let s=$e(n,"item",8,null),o=$e(n,"x",8,0),u=$e(n,"y",8,0),l=$e(n,"visible",8,!1);const c=$n();let C=K(),p=K(0),S=K(0);nn(()=>{function d(Y){t(C)&&!t(C).contains(Y.target)&&c("close")}function I(Y){Y.key==="Escape"&&c("close")}return l()&&(document.addEventListener("click",d),document.addEventListener("keydown",I)),()=>{document.removeEventListener("click",d),document.removeEventListener("keydown",I)}});function h(d){return typeof d=="number"?`€${d.toFixed(2)}`:s()&&s().item_price_value&&typeof s().item_price_value=="number"?`€${s().item_price_value.toFixed(2)}`:d||"N/A"}function _(d){try{const I=JSON.parse(d);return I.menu?.de||I.button?.de||I.de||"Unnamed"}catch{return d||"Unnamed"}}function E(d){try{return JSON.parse(d).de||"Unnamed Category"}catch{return d||"Unnamed Category"}}function A(d){try{return JSON.parse(d)}catch{return{}}}function q(){if(!t(C))return;const d=t(C).getBoundingClientRect(),I=window.innerWidth,Y=window.innerHeight;if(d.width===0||d.height===0){setTimeout(()=>q(),10);return}const P=10,W=10,J=d.width>I-P*2,T=d.height>Y-P*2;let ne,z;J&&T?(ne=P,z=P):J?(ne=P,z=u()+W,z+d.height>Y-P&&(z=u()-d.height-W),z<P&&(z=P)):T?(z=P,ne=o()+W,ne+d.width>I-P&&(ne=o()-d.width-W),ne<P&&(ne=P)):(ne=o()+W,z=u()+W,ne+d.width>I-P&&(ne=o()-d.width-W),z+d.height>Y-P&&(z=u()-d.height-W),ne<P&&(ne=P),z<P&&(z=P)),g(p,ne),g(S,z)}function H(){c("edit",{item:s()}),c("close")}function v(){c("advanced-edit",{item:s()}),c("close")}qe(()=>V(s()),()=>{g(a,s()&&s().category_names)}),qe(()=>V(s()),()=>{g(i,s()&&s().display_names)}),qe(()=>(t(i),V(s())),()=>{g(r,t(i)&&s().additional_item_attributes?A(s().additional_item_attributes):{})}),qe(()=>(V(l()),t(C)),()=>{l()&&t(C)&&requestAnimationFrame(()=>q())}),hn(),At();var D=Be(),L=we(D);{var y=d=>{var I=l1(),Y=f(I),P=f(Y),W=f(P);{var J=B=>{var Q=Vt();ce(oe=>ie(Q,oe),[()=>(V(s()),x(()=>E(s().category_names)))]),M(B,Q)},T=B=>{var Q=Be(),oe=we(Q);{var re=ge=>{var se=Vt();ce(ue=>ie(se,ue),[()=>(V(s()),x(()=>_(s().display_names)))]),M(ge,se)},te=ge=>{var se=Vt("Item Details");M(ge,se)};X(oe,ge=>{t(i)?ge(re):ge(te,!1)},!0)}M(B,Q)};X(W,B=>{t(a)?B(J):B(T,!1)})}var ne=b(Y,2),z=f(ne);{var j=B=>{var Q=t1(),oe=we(Q),re=b(f(oe),2),te=f(re),ge=b(oe,2);{var se=N=>{var Z=Wl(),de=b(f(Z),2),be=f(de);ce(()=>ie(be,(t(r),x(()=>t(r).description)))),M(N,Z)};X(ge,N=>{t(r),x(()=>t(r).description)&&N(se)})}var ue=b(ge,2);{var fe=N=>{var Z=Kl(),de=b(f(Z),2),be=f(de);ce(ze=>ie(be,ze),[()=>(t(r),x(()=>t(r).allergens.join(", ")))]),M(N,Z)};X(ue,N=>{t(r),x(()=>t(r).allergens&&t(r).allergens.length>0)&&N(fe)})}var ve=b(ue,2);{var Le=N=>{var Z=Jl(),de=b(f(Z),2),be=f(de);ce(ze=>ie(be,ze),[()=>(t(r),x(()=>t(r).dietary_info.join(", ")))]),M(N,Z)};X(ve,N=>{t(r),x(()=>t(r).dietary_info&&t(r).dietary_info.length>0)&&N(Le)})}var Se=b(ve,2);{var Te=N=>{var Z=Yl(),de=b(f(Z),2),be=f(de);ce(()=>ie(be,(V(s()),x(()=>s().associated_category_unique_identifier)))),M(N,Z)};X(Se,N=>{V(s()),x(()=>s().associated_category_unique_identifier)&&N(Te)})}var je=b(Se,2);{var Ue=N=>{var Z=Xl(),de=b(f(Z),2),be=f(de);ce(()=>ie(be,(V(s()),x(()=>s().item_flags.is_sellable?"Available":"Not Available")))),M(N,Z)};X(je,N=>{V(s()),x(()=>s().item_flags&&s().item_flags.is_sellable!==void 0)&&N(Ue)})}var Ve=b(je,2);{var xe=N=>{var Z=Ql(),de=b(f(Z),2),be=f(de);ce(ze=>ie(be,ze),[()=>(V(s()),x(()=>new Date(s().audit_trail.updated_at||s().audit_trail.created_at).toLocaleDateString()))]),M(N,Z)};X(Ve,N=>{V(s()),x(()=>s().audit_trail)&&N(xe)})}var ye=b(Ve,2);{var le=N=>{var Z=e1(),de=b(f(Z),2),be=f(de);ce(()=>ie(be,(V(s()),x(()=>s().id)))),M(N,Z)};X(ye,N=>{V(s()),x(()=>s().id)&&N(le)})}ce(N=>ie(te,N),[()=>(V(s()),x(()=>h(s().item_price_value)))]),M(B,Q)},Ee=B=>{var Q=Be(),oe=we(Q);{var re=te=>{var ge=o1(),se=we(ge);{var ue=xe=>{var ye=n1(),le=b(f(ye),2),N=f(le);ce(()=>ie(N,(V(s()),x(()=>s().category_type)))),M(xe,ye)};X(se,xe=>{V(s()),x(()=>s().category_type)&&xe(ue)})}var fe=b(se,2);{var ve=xe=>{var ye=a1(),le=b(f(ye),2),N=f(le);ce(()=>ie(N,(V(s()),x(()=>s().id)))),M(xe,ye)};X(fe,xe=>{V(s()),x(()=>s().id)&&xe(ve)})}var Le=b(fe,2);{var Se=xe=>{var ye=r1(),le=b(f(ye),2),N=f(le);ce(()=>ie(N,(V(s()),x(()=>s().parent_category_unique_identifier)))),M(xe,ye)};X(Le,xe=>{V(s()),x(()=>s().parent_category_unique_identifier)&&xe(Se)})}var Te=b(Le,2);{var je=xe=>{var ye=s1(),le=b(f(ye),2),N=f(le);ce(()=>ie(N,(V(s()),x(()=>s().default_linked_main_group_unique_identifier)))),M(xe,ye)};X(Te,xe=>{V(s()),x(()=>s().default_linked_main_group_unique_identifier)&&xe(je)})}var Ue=b(Te,2);{var Ve=xe=>{var ye=i1(),le=b(f(ye),2),N=f(le);ce(()=>ie(N,(V(s()),x(()=>s().source_unique_identifier)))),M(xe,ye)};X(Ue,xe=>{V(s()),x(()=>s().source_unique_identifier)&&xe(Ve)})}M(te,ge)};X(oe,te=>{t(a)&&te(re)},!0)}M(B,Q)};X(z,B=>{t(i)?B(j):B(Ee,!1)})}var ke=b(ne,2),_e=f(ke),me=b(_e,2),w=b(me,2);mn(I,B=>g(C,B),()=>t(C)),ce(()=>sa(I,`left: ${(t(p)||o())??""}px; top: ${(t(S)||u())??""}px;`)),ae("click",_e,()=>H()),ae("click",me,()=>v()),ae("click",w,()=>c("close")),M(d,I)};X(L,d=>{l()&&s()&&d(y)})}M(e,D),yt()}var u1=U('<span class="error-message svelte-5hnlx2"> </span>'),d1=U('<span class="error-message svelte-5hnlx2"> </span>'),f1=U('<span class="error-message svelte-5hnlx2"> </span>'),v1=U('<span class="error-message svelte-5hnlx2"> </span>'),p1=U('<span class="error-message svelte-5hnlx2"> </span>'),m1=U('<div class="modal-overlay svelte-5hnlx2" role="dialog" tabindex="-1"><div class="modal-content svelte-5hnlx2"><div class="modal-header svelte-5hnlx2"><h2 class="svelte-5hnlx2">Edit Product</h2> <button class="close-button svelte-5hnlx2" aria-label="Close">×</button></div> <form class="product-form svelte-5hnlx2"><div class="form-group svelte-5hnlx2"><label for="product-name-menu" class="svelte-5hnlx2">Name (Menu)</label> <input id="product-name-menu" type="text" placeholder="Enter menu name"/> <!></div> <div class="form-group svelte-5hnlx2"><label for="product-name-button" class="svelte-5hnlx2">Name (Button)</label> <input id="product-name-button" type="text" placeholder="Enter button name"/> <!></div> <div class="form-group svelte-5hnlx2"><label for="product-name-receipt" class="svelte-5hnlx2">Name (Receipt)</label> <input id="product-name-receipt" type="text" placeholder="Enter receipt name"/> <!></div> <div class="form-group svelte-5hnlx2"><label for="product-price" class="svelte-5hnlx2">Price (€)</label> <input id="product-price" type="number" step="0.01" min="0" placeholder="0.00"/> <!></div> <div class="form-group svelte-5hnlx2"><label for="product-category" class="svelte-5hnlx2">Category</label> <input id="product-category" type="text" placeholder="Enter category name"/> <!></div> <div class="form-group svelte-5hnlx2"><label for="product-description" class="svelte-5hnlx2">Description</label> <textarea id="product-description" placeholder="Enter product description (optional)" rows="3" class="svelte-5hnlx2"></textarea></div> <div class="form-actions svelte-5hnlx2"><button type="button" class="btn-cancel svelte-5hnlx2">Cancel</button> <button type="submit" class="btn-save svelte-5hnlx2"><!></button></div></form></div></div>');function g1(e,n){_t(n,!1);const a=$n();let i=$e(n,"visible",8,!1),r=$e(n,"product",8,null),s=K({name_menu:"",name_button:"",name_receipt:"",price:"",categoryName:"",description:""}),o=K({}),u=K(!1),l=K(!1),c=K({});function C(v){if(typeof v=="object"&&v!==null)return v;if(typeof v=="string")try{return JSON.parse(v)}catch{return v}return v}function p(){if(g(c,{}),t(s).name_menu.trim()||He(c,t(c).name_menu="Menu name is required"),t(s).name_button.trim()||He(c,t(c).name_button="Button name is required"),t(s).name_receipt.trim()||He(c,t(c).name_receipt="Receipt name is required"),!t(s).price.trim())He(c,t(c).price="Price is required");else{const v=parseFloat(t(s).price);(isNaN(v)||v<0)&&He(c,t(c).price="Price must be a valid positive number")}return t(s).categoryName.trim()||He(c,t(c).categoryName="Category is required"),Object.keys(t(c)).length===0}async function S(){if(p()){g(l,!0);try{const v={};t(s).name_menu!==t(o).name_menu&&(v.name_menu=t(s).name_menu.trim()),t(s).name_button!==t(o).name_button&&(v.name_button=t(s).name_button.trim()),t(s).name_receipt!==t(o).name_receipt&&(v.name_receipt=t(s).name_receipt.trim()),t(s).price!==t(o).price&&(v.price=parseFloat(t(s).price)),t(s).categoryName!==t(o).categoryName&&(v.categoryName=t(s).categoryName.trim()),t(s).description!==t(o).description&&(v.description=t(s).description.trim()),Object.keys(v).length>0&&a("save",{productId:r().id,updates:v}),h()}catch(v){console.error("Error saving product:",v)}finally{g(l,!1)}}}function h(){a("close")}function _(v){v.target===v.currentTarget&&h()}function E(v){v.key==="Escape"&&h()}qe(()=>(V(r()),V(i()),t(s)),()=>{if(r()&&i()){const v=r().display_names?C(r().display_names):{},D=v.menu?.de||r().name||"",L=v.button?.de||v.menu?.de||r().name||"",y=v.receipt?.de||v.menu?.de||r().name||"";let d="Unknown Category";r().category_name?d=r().category_name:r().categoryName?d=r().categoryName:d=`Category ID: ${r().associated_category_unique_identifier||"N/A"}`,g(s,{name_menu:D,name_button:L,name_receipt:y,price:(r().item_price_value||r().price||0).toString(),categoryName:d,description:r().description||D}),g(o,{...t(s)}),g(u,!1),g(c,{})}}),qe(()=>(V(i()),t(s),t(o)),()=>{g(u,i()&&(t(s).name_menu!==t(o).name_menu||t(s).name_button!==t(o).name_button||t(s).name_receipt!==t(o).name_receipt||t(s).price!==t(o).price||t(s).categoryName!==t(o).categoryName||t(s).description!==t(o).description))}),hn(),At();var A=Be();ae("keydown",ba,E);var q=we(A);{var H=v=>{var D=m1(),L=f(D),y=f(L),d=b(f(y),2),I=b(y,2),Y=f(I),P=b(f(Y),2);let W;var J=b(P,2);{var T=Z=>{var de=u1(),be=f(de);ce(()=>ie(be,(t(c),x(()=>t(c).name_menu)))),M(Z,de)};X(J,Z=>{t(c),x(()=>t(c).name_menu)&&Z(T)})}var ne=b(Y,2),z=b(f(ne),2);let j;var Ee=b(z,2);{var ke=Z=>{var de=d1(),be=f(de);ce(()=>ie(be,(t(c),x(()=>t(c).name_button)))),M(Z,de)};X(Ee,Z=>{t(c),x(()=>t(c).name_button)&&Z(ke)})}var _e=b(ne,2),me=b(f(_e),2);let w;var B=b(me,2);{var Q=Z=>{var de=f1(),be=f(de);ce(()=>ie(be,(t(c),x(()=>t(c).name_receipt)))),M(Z,de)};X(B,Z=>{t(c),x(()=>t(c).name_receipt)&&Z(Q)})}var oe=b(_e,2),re=b(f(oe),2);let te;var ge=b(re,2);{var se=Z=>{var de=v1(),be=f(de);ce(()=>ie(be,(t(c),x(()=>t(c).price)))),M(Z,de)};X(ge,Z=>{t(c),x(()=>t(c).price)&&Z(se)})}var ue=b(oe,2),fe=b(f(ue),2);let ve;var Le=b(fe,2);{var Se=Z=>{var de=p1(),be=f(de);ce(()=>ie(be,(t(c),x(()=>t(c).categoryName)))),M(Z,de)};X(Le,Z=>{t(c),x(()=>t(c).categoryName)&&Z(Se)})}var Te=b(ue,2),je=b(f(Te),2),Ue=b(Te,2),Ve=f(Ue),xe=b(Ve,2),ye=f(xe);{var le=Z=>{var de=Vt("Saving...");M(Z,de)},N=Z=>{var de=Vt("Save Changes");M(Z,de)};X(ye,Z=>{t(l)?Z(le):Z(N,!1)})}ce((Z,de,be,ze,ot,lt)=>{P.disabled=t(l),W=tt(P,1,"svelte-5hnlx2",null,W,Z),z.disabled=t(l),j=tt(z,1,"svelte-5hnlx2",null,j,de),me.disabled=t(l),w=tt(me,1,"svelte-5hnlx2",null,w,be),re.disabled=t(l),te=tt(re,1,"svelte-5hnlx2",null,te,ze),fe.disabled=t(l),ve=tt(fe,1,"svelte-5hnlx2",null,ve,ot),je.disabled=t(l),Ve.disabled=t(l),xe.disabled=lt},[()=>({error:t(c).name_menu}),()=>({error:t(c).name_button}),()=>({error:t(c).name_receipt}),()=>({error:t(c).price}),()=>({error:t(c).categoryName}),()=>(t(u),t(l),t(c),x(()=>!t(u)||t(l)||Object.keys(t(c)).length>0))]),ae("click",d,h),Yt(P,()=>t(s).name_menu,Z=>He(s,t(s).name_menu=Z)),Yt(z,()=>t(s).name_button,Z=>He(s,t(s).name_button=Z)),Yt(me,()=>t(s).name_receipt,Z=>He(s,t(s).name_receipt=Z)),Yt(re,()=>t(s).price,Z=>He(s,t(s).price=Z)),Yt(fe,()=>t(s).categoryName,Z=>He(s,t(s).categoryName=Z)),Yt(je,()=>t(s).description,Z=>He(s,t(s).description=Z)),ae("click",Ve,h),ae("submit",I,qs(S)),ae("click",D,_),ae("keydown",D,E),M(v,D)};X(q,v=>{i()&&r()&&v(H)})}M(e,A),yt()}var h1=U('<div class="modal-overlay svelte-3d9wpg"><div class="modal-content svelte-3d9wpg"><div class="modal-header svelte-3d9wpg"><h2 class="svelte-3d9wpg">Edit Category</h2> <button class="close-button svelte-3d9wpg">×</button></div> <form class="product-form svelte-3d9wpg"><div class="form-group svelte-3d9wpg"><label for="category-name" class="svelte-3d9wpg">Category Name</label> <input id="category-name" type="text" class="svelte-3d9wpg"/></div> <div class="form-group svelte-3d9wpg"><label for="category-type" class="svelte-3d9wpg">Category Type</label> <select id="category-type" class="svelte-3d9wpg"><option>Food</option><option>Drink</option><option>Other</option></select></div> <div class="form-actions svelte-3d9wpg"><button type="button" class="btn-cancel svelte-3d9wpg">Cancel</button> <button type="submit" class="btn-save svelte-3d9wpg"> </button></div></form></div></div>');function C1(e,n){_t(n,!1);let a=$e(n,"visible",8,!1),i=$e(n,"category",8,null);const r=$n();let s=K({name:"",type:"food"}),o=K({}),u=K(!1);async function l(){if(!t(s).name.trim()){alert("Category name is required.");return}g(u,!0);const E={};t(s).name!==t(o).name&&(E.name=t(s).name.trim()),t(s).type!==t(o).type&&(E.type=t(s).type),Object.keys(E).length>0&&r("save",{categoryId:i().id,updates:E}),c()}function c(){g(u,!1),r("close")}function C(E){E.target===E.currentTarget&&c()}function p(E){E.key==="Escape"&&c()}qe(()=>(V(i()),V(a()),t(s)),()=>{if(i()&&a()){const E=JSON.parse(i().category_names||"{}");g(s,{name:E.de||"",type:i().category_type||"food"}),g(o,{...t(s)})}}),hn(),At();var S=Be();ae("keydown",ba,p);var h=we(S);{var _=E=>{var A=h1(),q=f(A),H=f(q),v=b(f(H),2),D=b(H,2),L=f(D),y=b(f(L),2),d=b(L,2),I=b(f(d),2);ce(()=>{t(s),$s(()=>{t(u)})});var Y=f(I);Y.value=Y.__value="food";var P=b(Y);P.value=P.__value="drink";var W=b(P);W.value=W.__value="other";var J=b(d,2),T=f(J),ne=b(T,2),z=f(ne);ce(()=>{y.disabled=t(u),I.disabled=t(u),T.disabled=t(u),ne.disabled=t(u),ie(z,t(u)?"Saving...":"Save Changes")}),ae("click",v,c),Yt(y,()=>t(s).name,j=>He(s,t(s).name=j)),Zs(I,()=>t(s).type,j=>He(s,t(s).type=j)),ae("click",T,c),ae("submit",D,qs(l)),ae("click",A,C),M(E,A)};X(h,E=>{a()&&i()&&E(_)})}M(e,S),yt()}var _1=Rr(`<svg viewBox="-10 -10 120 120" preserveAspectRatio="xMidYMid meet" style="width: 100%; height: 100%;"><defs><filter height="170%" id="sh2" width="170%" x="-0.2" y="-0.2"><feOffset dx="0" dy="0" in="SourceAlpha"></feOffset><feGaussianBlur stdDeviation="1.2"></feGaussianBlur><feColorMatrix result="out" type="matrix" values=" 
               0 0 0 0 0.2         
               0 0 0 0 0.2                    
               0 0 0 0 0.2                
               0 0 0 10 0 "></feColorMatrix><feMerge><feMergeNode in="out"></feMergeNode><feMergeNode in="SourceGraphic"></feMergeNode></feMerge></filter></defs><g filter="url(#sh2)"><path fill="#2c2c2e" stroke="#666" stroke-width="1.5" d="M72,89 C78.6,68 67.2,30.7 89,68 C86.9,37.6 66.91,32 62,61 C58,44.1 67.5,38.8 52,10 C53.6,47 46.91,36.2 45,61 C39.3,43.4 22,46.6 13,43 C32.9,55.8 35.7,66.62 32,89 C35,97.9 68.6,99 72,89 Z"></path><circle fill="#2c2c2e" stroke="#666" stroke-width="1.5" cx="13" cy="43" r="5.5"></circle><circle fill="#2c2c2e" stroke="#666" stroke-width="1.5" cx="52" cy="10" r="5.5"></circle><circle fill="#2c2c2e" stroke="#666" stroke-width="1.5" cx="89" cy="68" r="5.5"></circle></g></svg>`);function y1(e){var n=_1();M(e,n)}var b1=Rr('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 128 96" fill="none" class="svelte-1cmb9l6"><rect x="0" y="0" width="128" height="96" rx="8" ry="8" fill="#2A2A2A" stroke="none"></rect><g><rect x="7" y="6" width="34" height="24" rx="3" fill="#3A3A3A" stroke="#555555" stroke-width="0.5"></rect><text x="24" y="19" font-family="Arial, sans-serif" font-size="14" font-weight="600" text-anchor="middle" dominant-baseline="middle" fill="#BBBBBB">1</text><rect x="47" y="6" width="34" height="24" rx="3" fill="#3A3A3A" stroke="#555555" stroke-width="0.5"></rect><text x="64" y="19" font-family="Arial, sans-serif" font-size="14" font-weight="600" text-anchor="middle" dominant-baseline="middle" fill="#BBBBBB">2</text><rect x="87" y="6" width="34" height="24" rx="3" fill="#883333" stroke="#555555" stroke-width="0.5"></rect><text x="104" y="19" font-family="Arial, sans-serif" font-size="14" font-weight="600" text-anchor="middle" dominant-baseline="middle" fill="#BBBBBB">3</text><rect x="7" y="36" width="34" height="24" rx="3" fill="#3A3A3A" stroke="#555555" stroke-width="0.5"></rect><text x="24" y="49" font-family="Arial, sans-serif" font-size="14" font-weight="600" text-anchor="middle" dominant-baseline="middle" fill="#BBBBBB">4</text><rect x="47" y="36" width="34" height="24" rx="3" fill="#3A3A3A" stroke="#555555" stroke-width="0.5"></rect><text x="64" y="49" font-family="Arial, sans-serif" font-size="14" font-weight="600" text-anchor="middle" dominant-baseline="middle" fill="#BBBBBB">5</text><rect x="87" y="36" width="34" height="24" rx="3" fill="#885533" stroke="#555555" stroke-width="0.5"></rect><text x="104" y="49" font-family="Arial, sans-serif" font-size="14" font-weight="600" text-anchor="middle" dominant-baseline="middle" fill="#BBBBBB">6</text><rect x="7" y="66" width="34" height="24" rx="3" fill="#3A3A3A" stroke="#555555" stroke-width="0.5"></rect><text x="24" y="79" font-family="Arial, sans-serif" font-size="14" font-weight="600" text-anchor="middle" dominant-baseline="middle" fill="#BBBBBB">7</text><rect x="47" y="66" width="34" height="24" rx="3" fill="#3A3A3A" stroke="#555555" stroke-width="0.5"></rect><text x="64" y="79" font-family="Arial, sans-serif" font-size="14" font-weight="600" text-anchor="middle" dominant-baseline="middle" fill="#BBBBBB">8</text><rect x="87" y="66" width="34" height="24" rx="3" fill="#385b4a" stroke="#555555" stroke-width="0.5"></rect><text x="104" y="79" font-family="Arial, sans-serif" font-size="14" font-weight="600" text-anchor="middle" dominant-baseline="middle" fill="#BBBBBB">9</text></g></svg>');function w1(e){var n=b1();M(e,n)}var x1=U("<div><div><!></div></div>"),S1=U('<p class="status-message svelte-48cijx"> </p>'),k1=U('<div class="empty-category-info svelte-48cijx"><p class="empty-message svelte-48cijx">Diese Kategorie enthält noch keine Produkte.</p> <p class="empty-hint svelte-48cijx">Verwenden Sie das Menü-Import Tool oder fügen Sie Produkte manuell hinzu.</p></div>'),L1=U("<div></div>"),M1=U("<div><!> <!></div>"),E1=U('<div class="selection-area svelte-48cijx"><!> <!> <!> <!> <div class="grid-container svelte-48cijx"><!></div></div>');function A1(e,n){_t(n,!1);const[a,i]=Ma(),r=()=>ut(Ys,"$uiConstantsStore",a),s=()=>ut(Ze,"$orderStore",a),o=()=>ut(Re,"$pinpadStore",a),u=()=>ut(An,"$authStore",a),l=()=>ut(Js,"$currentTime",a),c=K();let C=K([]),p=K([]),S=K("Connecting to backend..."),h=!1,_=K("categories"),E=null,A=K("6-6-6"),q=K(!1),H=K(null),v=K(0),D=K(0),L=K(!1),y=K(null),d=K(!1),I=K(null),Y=0,P=$e(n,"isAtBottom",8,!1),W=$e(n,"consoleViewComponent",8,null),J=0,T=K([]),ne=$e(n,"handleSmartAction",8,()=>{}),z=null;Ca.subscribe(m=>{z=m.style});const j=6,Ee=6,ke=6,_e=6,me=6;function w(m){if(!m)return"Login";const k=m.split(" ");let F;if(k.length===1){const G=k[0];G.length<=4?F=G:F=G.substring(0,4)}else{const G=k[0],R=k[1]||"";F=G.substring(0,3)+(R?R.charAt(0):"")}return"✓ "+F}function B(m){if(typeof m=="object"&&m!==null)return m;if(typeof m=="string")try{return JSON.parse(m)}catch{return m}return m}function Q(m,k,F,G,R,$,pe=!1){const Oe=m,Ye=k-2*$;function Fn(vt){const St=(Oe-(vt+1)*R)/vt;if(St<F)return null;let xn=St*G*.75+R,De=Math.floor(Ye/xn),cn=(Ye-(De-1)*R)/(1+(De-1)*.75);const Ot=St*(G*.7);let Qe;cn>=Ot&&De>0?Qe=De:Qe=Math.max(1,De-1);let kt;return pe?Qe>0?kt=(Ye-(Qe-1)*R)/(1+(Qe-1)*.75):kt=Math.max(Ye,Ot):Qe>0?kt=(Ye-(Qe-1)*R)/Qe:kt=Math.max(Ye,Ot),{columns:vt,rows:Qe,buttonWidth:St,buttonHeight:kt,layout:"symmetrical"}}function wn(vt){const St=(Oe-(vt+1)*R)/(vt+.5);if(St<F)return null;let xn=St*G*.75+R,De=Math.floor(Ye/xn),cn=(Ye-(De-1)*R)/(1+(De-1)*.75);const Ot=St*(G*.7);let Qe;cn>=Ot&&De>0?Qe=De:Qe=Math.max(1,De-1);let kt;return pe?Qe>0?kt=(Ye-(Qe-1)*R)/(1+(Qe-1)*.75):kt=Math.max(Ye,Ot):Qe>0?kt=(Ye-(Qe-1)*R)/Qe:kt=Math.max(Ye,Ot),{columns:vt,rows:Qe,buttonWidth:St,buttonHeight:kt,layout:"asymmetrical"}}let Xe=null,O=Math.floor((Oe-R)/F);for(let vt=1;vt<=O;vt++){const St=Fn(vt),ua=wn(vt),xn=[St,ua].filter(De=>De!==null);for(const De of xn)Xe?(De.columns>Xe.columns||De.columns===Xe.columns&&(De.layout==="asymmetrical"&&Xe.layout==="symmetrical"||De.buttonWidth>Xe.buttonWidth))&&(Xe=De):Xe=De}return Xe||{columns:1,rows:1,buttonWidth:Math.max(F,Oe-2*R),buttonHeight:Math.max(F,Ye),layout:"symmetrical"}}let oe=K(t(c)),re=K(7.5625*16),te=1,ge=K(1),se=K(t(c)),ue=K(t(c)),fe=1,ve=K(1),Le="symmetrical";function Se(){if(!(Y<=0||J<=0)){if(t(A)==="6-6-6"){const m=Q(Y,J,t(c),.75,Ee,_e,!0);te=m.columns,g(ge,m.rows),g(oe,m.buttonWidth),g(re,m.buttonHeight),Le=m.layout,te>0&&t(ge)>0&&g(T,Te())}else if(t(A)==="4-4-4"){const m=Q(Y,J,t(c),.75,ke,me,!1);fe=m.columns,g(ve,m.rows),g(se,m.buttonWidth),g(ue,m.buttonHeight),Le=m.layout,fe>0&&t(ve)>0&&g(T,Te())}else te=1,g(oe,t(c)),fe=1,g(se,t(c)),g(ue,t(c));t(T).length>0&&ye()}}function Te(){const m=[];if(t(A)==="6-6-6")for(let k=0;k<t(ge);k++)je(m,k,Le);else t(A)==="4-4-4"&&Ue(m,Le);return m}function je(m,k,F){const G=k%2===1;if(F==="symmetrical"){const R=G?te:te-1;if(R<0)return;if(G)for(let $=0;$<R;$++)m.push({id:`full-${k}-${$}`,type:"full",content:null,rowIndex:k,columnIndex:$});else{m.push({id:`half-start-${k}`,type:"left-half",content:null,rowIndex:k,columnIndex:0});for(let $=0;$<R;$++)m.push({id:`full-${k}-${$}`,type:"full",content:null,rowIndex:k,columnIndex:$+1});m.push({id:`half-end-${k}`,type:"right-half",content:null,rowIndex:k,columnIndex:R+1})}}else{const R=te;if(G){for(let $=0;$<R;$++)m.push({id:`full-${k}-${$}`,type:"full",content:null,rowIndex:k,columnIndex:$});m.push({id:`half-end-${k}`,type:"right-half",content:null,rowIndex:k,columnIndex:R})}else{m.push({id:`half-start-${k}`,type:"left-half",content:null,rowIndex:k,columnIndex:0});for(let $=0;$<R;$++)m.push({id:`full-${k}-${$}`,type:"full",content:null,rowIndex:k,columnIndex:$+1})}}}function Ue(m,k){for(let F=0;F<t(ve);F++)Ve(m,F,k)}function Ve(m,k,F){const G=k%2===1;if(F==="symmetrical"){const R=G?fe:fe-1;if(R<0)return;if(G)for(let $=0;$<R;$++)m.push({id:`rect-full-${k}-${$}`,type:"rect-grid",content:null,rowIndex:k,columnIndex:$,width:t(se),height:t(ue)});else{m.push({id:`rect-half-start-${k}`,type:"left-half-rect",content:null,rowIndex:k,columnIndex:0,width:t(se)/2-ke/2,height:t(ue)});for(let $=0;$<R;$++)m.push({id:`rect-full-${k}-${$}`,type:"rect-grid",content:null,rowIndex:k,columnIndex:$+1,width:t(se),height:t(ue)});m.push({id:`rect-half-end-${k}`,type:"right-half-rect",content:null,rowIndex:k,columnIndex:R+1,width:t(se)/2-ke/2,height:t(ue)})}}else{const R=fe;if(G){for(let $=0;$<R;$++)m.push({id:`rect-full-${k}-${$}`,type:"rect-grid",content:null,rowIndex:k,columnIndex:$,width:t(se),height:t(ue)});m.push({id:`rect-half-end-${k}`,type:"right-half-rect",content:null,rowIndex:k,columnIndex:R,width:t(se)/2-ke/2,height:t(ue)})}else{m.push({id:`rect-half-start-${k}`,type:"left-half-rect",content:null,rowIndex:k,columnIndex:0,width:t(se)/2-ke/2,height:t(ue)});for(let $=0;$<R;$++)m.push({id:`rect-full-${k}-${$}`,type:"rect-grid",content:null,rowIndex:k,columnIndex:$+1,width:t(se),height:t(ue)})}}}function xe(){t(T).forEach(m=>{m.content=null})}function ye(){t(T).length!==0&&(xe(),de(t(T)),le(t(T)),t(_)==="categories"?N(t(T),t(C)):Z(t(T),t(p)),g(T,[...t(T)]))}function le(m){const k=m.filter($=>$.type==="left-half"||$.type==="left-half-rect");if(k.length>0){if(k.sort((pe,Oe)=>pe.rowIndex-Oe.rowIndex),k.length>1){const pe=k[1];pe.content={isUserButton:!0}}k.sort((pe,Oe)=>Oe.rowIndex-pe.rowIndex);const $=k[0];$.content={isSmartNavigation:!0}}const F=m.filter($=>$.type==="right-half"||$.type==="right-half-rect");if(F.length>0){if(F.sort(($,pe)=>$.rowIndex-pe.rowIndex),F[0]){const $=o().currentLanguage,Oe=(t(A)==="6-6-6"?"rect":"hex")==="rect"?`<svg width="50" height="50" viewBox="0 0 50 50" xmlns="http://www.w3.org/2000/svg">
            <rect x="2" y="5" width="46" height="40" rx="2" stroke="#666" stroke-width="1.5" fill="none"/>
            <text x="25" y="25" font-family="Arial, sans-serif" font-size="20" font-weight="bold" text-anchor="middle" dominant-baseline="middle" fill="#666">${$}</text>
          </svg>`:`<svg width="50" height="50" viewBox="0 0 50 50" xmlns="http://www.w3.org/2000/svg">
            <polygon points="25,2 47.99,12.5 47.99,37.5 25,48 2.01,37.5 2.01,12.5" stroke="#666" stroke-width="1.5" fill="none"/>
            <text x="25" y="25" font-family="Arial, sans-serif" font-size="20" font-weight="bold" text-anchor="middle" dominant-baseline="middle" fill="#666">${$}</text>
          </svg>`;F[0].content={isLayoutToggle:!0,icon:Oe,showShape:""}}F[1]&&(F[1].content={isBetrugerCap:!0}),F[2]&&(F[2].content={isKeyboardToggle:!0,icon:`<svg width="72" height="72" viewBox="0 0 24 24" fill="#404040">
            <path d="M20 5H4c-1.1 0-1.99.9-1.99 2L2 17c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm-9 3h2v2h-2V8zm0 3h2v2h-2v-2zM8 8h2v2H8V8zm0 3h2v2H8v-2zm-1 2H5v-2h2v2zm0-3H5V8h2v2zm9 7H8v-2h8v2zm0-4h-2v-2h2v2zm0-3h-2V8h2v2zm3 3h-2v-2h2v2zm0-3h-2V8h2v2z"/>
          </svg>`,color:"#404040",textColor:"#666"}),F.length>1&&(F[F.length-1].content={isTimeButton:!0})}const G=Math.max(...m.map($=>$.rowIndex));let R=m.filter($=>($.type==="full"||$.type==="rect-grid")&&!$.content);if(R.length>0&&(R.sort(($,pe)=>pe.rowIndex-$.rowIndex||$.columnIndex-pe.columnIndex),R[0].isPinpadTrigger=!0),G>0){const $=G-1;let pe=m.filter(Oe=>(Oe.type==="full"||Oe.type==="rect-grid")&&Oe.rowIndex===$&&!Oe.content&&!Oe.isPinpadTrigger);pe.length>0&&(pe.sort((Oe,Ye)=>Oe.columnIndex-Ye.columnIndex),pe[0].isTableButton=!0)}}function N(m,k){let F=0;for(const G of m){if(F>=k.length)break;(G.type==="full"||G.type==="rect-grid")&&!G.isPinpadTrigger&&!G.isTableButton&&!G.content&&(G.content=k[F],F++)}}function Z(m,k){const F=m.filter(R=>(R.type==="left-half"||R.type==="left-half-rect")&&!R.content);if(F.length>0){F.sort(($,pe)=>$.rowIndex-pe.rowIndex);const R=F[0];R.content={isBackButton:!0,icon:"←"}}let G=0;for(const R of m){if(G>=k.length)break;(R.type==="full"||R.type==="rect-grid")&&!R.isPinpadTrigger&&!R.isTableButton&&!R.content&&(R.content=k[G],G++)}}function de(m){const k=Math.max(...m.map(R=>R.rowIndex)),F=m.filter(R=>R.rowIndex===k&&(R.type==="full"||R.type==="rect-grid")&&!R.isPinpadTrigger&&!R.isTableButton&&!R.content);F.sort((R,$)=>$.columnIndex-R.columnIndex);const G=[{type:"bar",label:"Bar",color:"#5a7a5a",icon:'<?xml version="1.0" encoding="utf-8" ?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="128" height="96" viewBox="0 0 128 96"><path fill="#473736" transform="matrix(0.0937729 0 0 0.09375 3.05176e-05 0)" d="M860.049 42.5451C863.174 42.624 864.396 43.2157 867.135 44.649C899.278 61.4706 930.616 79.3737 962.241 97.0455L1140.06 196.515L1235.83 249.392C1244.2 254.024 1279.17 272.625 1283.9 277.585C1282.44 280.57 1281.27 282.302 1279.45 285.063C1282.58 292.135 1296.05 322.182 1296.51 327.834C1294.74 332.438 1289.84 335.037 1285.72 337.876C1288.3 345.822 1294.55 360.167 1297.81 368.289C1294.05 372.162 1290.61 374.451 1286.23 377.548C1289.54 386.869 1295.46 400.922 1297.78 409.853C1294.56 413.357 1291.61 414.85 1287.52 417.236C1290.52 427.181 1296.24 437.43 1299.15 447.79C1295.53 451.696 1291.99 453.323 1287.39 455.808C1291.55 465.344 1300.2 486.142 1302.74 495.595C1300.26 497.252 1297.58 498.606 1294.99 500.086C1280.56 508.342 1266.12 516.628 1251.85 525.174L1139.03 593.407L784.062 803.333L568.699 931.564C544.412 945.804 520.233 960.147 496.127 974.691C493.279 976.409 490.339 977.962 487.355 979.433C482.346 976.418 477.284 972.61 472.507 969.184C419.655 931.492 366.284 906.945 308.516 877.93C246.547 846.805 187.533 807.107 130.367 768.004C109.446 753.693 89.6758 737.836 69.6562 722.326C67.6909 720.788 66.5047 719.127 66.4393 716.66C68.933 711.97 79.7318 705.333 84.8102 701.638C80.3582 697.5 66.4077 688.821 65.9928 683.839C67.4568 679.274 79.8188 670.984 84.5252 667.263C62.3668 647.79 57.3531 652.544 84.8764 632.52C60.2719 609.41 57.851 620.244 83.8486 596.689C61.5012 576.407 56.2767 581.092 83.5163 559.902C78.7788 555.355 65.7634 547.292 65.5365 541.128C66.4298 538.823 67.721 538.009 69.9547 536.831C110.119 515.654 150.867 494.877 189.936 471.676L442.039 318.543C574.814 237.077 708.69 156.693 833.113 62.8355C842.043 56.0988 850.441 48.3397 860.049 42.5451Z"/><path fill="#C3DEA2" transform="matrix(0.0937729 0 0 0.09375 3.05176e-05 0)" d="M437.354 362.52C440.468 362.724 453.229 370.573 456.645 372.576C456.248 411.173 470.048 437.93 496.698 465.191C535.474 505.015 587.787 528.835 640.955 542.632C663.451 548.469 686.655 552.888 709.82 554.963C713.453 555.288 721.068 555.741 724.211 556.957C735.116 561.174 750.44 569.728 760.561 574.97C753.804 579.772 739.809 587.316 732.134 591.946L669.659 629.727L529.807 716.115C509.311 728.821 489.035 740.492 468.5 753.531L460.175 748.22C380.381 698.429 296.612 654.368 217.514 603.59C191.072 586.615 156.144 564.027 132.384 544.176C159.606 527.584 189.257 513.528 216.644 496.662C246.139 478.497 276.856 461.286 306.409 443.286L437.354 362.52Z"/><path fill="#473736" transform="matrix(0.0937729 0 0 0.09375 3.05176e-05 0)" d="M432.603 379.871C433.645 380.086 437.093 381.244 437.144 382.487C438.791 442.392 490.02 487.403 537.337 514.789C596.404 549.752 662.499 562.556 729.71 570.091C731.937 570.341 734.147 574.935 729.179 577.671C716.909 584.428 704.675 592.104 692.723 599.379L602.992 654.239C577.877 669.443 547.915 688.824 522.338 702.561C519.263 701.134 515.523 698.889 512.498 697.182C481.961 681.362 440.641 679.265 407.87 688.789C406.567 688.288 404.507 687.394 403.295 686.669C374.494 669.436 345.564 652.574 316.516 635.765L261.137 604.086C252.052 598.921 242.711 593.921 233.779 588.521C231.308 587.027 230.306 586.046 229.463 583.32C230.908 581.26 234.513 577.718 236.32 576.107C255.415 559.082 260.677 539.318 247.048 516.743C244.349 512.273 239.119 505.351 238.102 500.399C241.624 496.163 261.502 486.587 267.152 483.284C323.079 450.594 379.073 416.312 432.603 379.871Z"/><path fill="#FCF7C3" transform="matrix(0.0937729 0 0 0.09375 3.05176e-05 0)" d="M427.755 394.648C428.427 395.385 433.323 416.495 434.744 420.094C459.781 483.513 526.563 524.948 587.468 548.864C624.138 563.264 672.331 572.498 712.153 577.016C695.782 588.268 673.468 600.738 656.112 611.431L521.867 692.386C519.632 690.964 516.728 689.382 514.39 688.03C486.171 672.098 440.303 671.74 409.318 679.477C354.86 647.196 298.177 613.73 242.73 583.323C268.545 554.332 271.645 536.924 249.926 503.745C274.308 489.403 298.626 475.702 322.89 460.996C358.43 439.456 392.74 416.944 427.755 394.648Z"/><path fill="#473736" transform="matrix(0.0937729 0 0 0.09375 3.05176e-05 0)" d="M420.928 529.557C440.364 527.204 462.006 533.996 478.231 544.432C505.824 562.18 515.928 600.707 474.606 607.832C454.695 610.962 434.049 605.236 417.133 593.494C402.754 583.514 382.618 560.384 395.572 541.734C401.072 533.816 411.655 530.807 420.928 529.557Z"/><path fill="#C3DEA2" transform="matrix(0.0937729 0 0 0.09375 3.05176e-05 0)" d="M422.396 537.572C439.811 536.323 454.996 540.394 470.629 549.858C482.293 556.92 499.445 575.18 490.349 590.521C487.135 595.941 479.225 598.025 473.215 599.15C451.773 602.522 429.989 593.983 414.337 579.352C406.313 571.858 395.794 557.307 403.413 546.275C407.534 540.308 415.724 538.43 422.396 537.572Z"/><path fill="#473736" transform="matrix(0.0937729 0 0 0.09375 3.05176e-05 0)" d="M431.608 541.652C444.113 540.518 460.635 548.703 470.113 556.27C487.388 570.061 493.855 594.7 463.692 595.478C440.635 595.539 414.37 580.096 409.069 556.385C412.156 543.961 420.397 542.15 431.608 541.652Z"/><path fill="#C3DEA2" transform="matrix(0.0937729 0 0 0.09375 3.05176e-05 0)" d="M430.903 549.572C448.069 550.417 469.541 559.747 476.043 577.382C478.355 583.655 470.553 586.503 465.732 587.494C449.066 587.673 424.543 577.138 418.728 559.024C416.76 552.894 426.122 550.234 430.903 549.572Z"/><path fill="#C3DEA2" transform="matrix(0.0937729 0 0 0.09375 3.05176e-05 0)" d="M863.232 87.2873C868.567 89.6681 886.32 100.38 892.447 103.717L979.224 151.934L1114.89 227.794L1173.27 260.337C1186.49 267.632 1202.25 275.698 1214.72 283.907C1209 289.833 1199.51 297.299 1193.06 302.539C1171.88 319.752 1149.38 334.848 1126.86 350.222C1068.59 390.001 1009.09 427.414 948.803 464.056C943.611 467.224 938.593 470.196 933.305 473.202C924.501 468.621 915.791 464.102 907.108 459.282C906.201 449.664 904.907 440.279 901.844 431.01C875.061 354.618 788.264 311.126 715.725 289.766C690.219 282.255 665.241 278.117 639.239 274.945C635.813 274.527 610.758 260.836 605.986 258.388C614.148 253.38 622.098 248.137 630.126 242.907C691.186 203.12 754.381 166.396 813.541 123.77C830.223 111.75 846.473 99.1284 863.232 87.2873Z"/><path fill="#473736" transform="matrix(0.0937729 0 0 0.09375 3.05176e-05 0)" d="M815.169 143.23C820.01 143.65 833.17 150.547 839.172 152.369C874.725 163.16 897.612 162.491 932.11 152.143C942.359 156.464 964.128 169.229 974.479 174.967L1058.24 221.96L1094.81 242.726C1100.33 245.843 1112.84 252.545 1117.13 256.195C1117.34 260.585 1105.49 276.929 1103.32 286.649C1100.24 300.451 1104.41 311.66 1113.37 322.128C1115.87 325.056 1119.01 327.92 1121.01 331.197C1121.62 332.201 1122.93 334.597 1122.42 335.804C1120.61 340.094 970.753 433.542 952.784 444.112C947.193 447.448 933.215 456.755 927.395 457.038C922.096 455.492 923.587 449.148 922.925 444.574C919.499 423.328 908.247 398.45 894.432 382.153C832.481 309.078 733.877 272.032 640.4 263.141C638.522 262.962 635.673 262.607 634.669 260.853C633.123 258.153 634.219 255.542 636.744 253.994C643.855 249.564 651.066 245.211 658.22 240.808L696.671 216.774C735.109 192.526 776.172 165.946 815.169 143.23Z"/><path fill="#FCF7C3" transform="matrix(0.0937729 0 0 0.09375 3.05176e-05 0)" d="M816.101 153.267C820.938 154.455 832.096 159.798 838.708 161.788C869.421 171.029 899.584 172.361 930.24 162.219C947.297 169.696 972.382 184.596 989.162 193.882C1028.19 215.481 1066.9 238.259 1106.14 259.543C1088.09 286.126 1087.98 309.936 1111.16 333.263C1060.03 366.162 1007.49 400.291 955.796 431.906L931.939 446.143C927.207 420.913 921.429 401.986 905.252 381.29C844.52 303.595 746.727 268.758 652.988 254.98C663.751 247.371 676.39 240.21 687.734 233.247C730.593 206.94 772.911 178.996 816.101 153.267Z"/><path fill="#473736" transform="matrix(0.0937729 0 0 0.09375 3.05176e-05 0)" d="M888.123 236.906C907.271 234.803 932.137 243.119 947.369 254.887C974.635 275.953 981.482 312.727 938.595 317.809C918.294 320.264 896.142 310.455 880.077 298.717C851.933 278.153 845.179 241.729 888.123 236.906Z"/><path fill="#C3DEA2" transform="matrix(0.0937729 0 0 0.09375 3.05176e-05 0)" d="M890.004 245.573C937.28 239.841 993.388 301.88 937.771 309.217C918.326 309.468 904.878 305.036 888.766 294.023C866.822 279.023 851.144 250.275 890.004 245.573Z"/><path fill="#473736" transform="matrix(0.0937729 0 0 0.09375 3.05176e-05 0)" d="M892.847 249.501C931.261 247.398 982.077 294.562 935.937 303.868C890.274 305.892 849.093 257.039 892.847 249.501Z"/><path fill="#C3DEA2" transform="matrix(0.0937729 0 0 0.09375 3.05176e-05 0)" d="M891.042 258.136C909.921 256.863 934.938 267.401 943.991 285.485C946.571 290.639 940.383 294.001 936.192 295.279C918.197 296.181 894.229 286.385 884.441 270.486C880.864 264.675 886.294 260.418 891.042 258.136Z"/><path fill="#473736" transform="matrix(0.0937729 0 0 0.09375 3.05176e-05 0)" d="M569.917 250.985C600.071 265.336 632.286 283.54 662.879 298.923C711.717 323.48 766.327 347.323 809.98 379.871C826.232 391.988 846.064 414.687 853.035 433.848C854.302 437.33 855.088 441.13 857.422 443.983C863.801 446.774 872.064 451.533 878.336 455.01C902.214 468.252 927.647 480.196 951.405 493.459C908.132 517.066 865.758 544.694 822.8 569.044C814.508 573.744 806.127 579.048 798.227 584.4C766.533 568.817 735.905 551.346 704.091 536.024C702.171 535.099 698.985 533.607 697.306 532.481C673.358 521.726 648.07 509.769 624.496 498.22C583.418 478.096 532.775 457.445 510.864 414.593C506.97 406.225 502.743 397.162 503.534 387.804C476.645 373.018 448.813 356.935 421.883 342.599L528.917 276.068C542.309 267.916 556.415 258.63 569.917 250.985Z"/><defs><linearGradient id="gradient_0" gradientUnits="userSpaceOnUse" x1="544.67743" y1="255.5813" x2="738.42389" y2="525.00348"><stop offset="0" stop-color="#F8EB90"/><stop offset="1" stop-color="#FFFFD2"/></linearGradient></defs><path fill="url(#gradient_0)" transform="matrix(0.0937729 0 0 0.09375 3.05176e-05 0)" d="M569.917 250.985C600.071 265.336 632.286 283.54 662.879 298.923C711.717 323.48 766.327 347.323 809.98 379.871C826.232 391.988 846.064 414.687 853.035 433.848C854.302 437.33 855.088 441.13 857.422 443.983C853.575 445.243 804.676 422.223 797.335 418.71C769.583 376.013 706.172 385.172 664.305 394.727C652.184 388.193 632.718 378.227 621.721 370.91C630.035 366.065 667.548 352.436 670.579 347.151C671.017 346.386 671.238 346.007 670.935 345.145C669.188 340.164 647.653 329.692 642.244 327.013C624.624 331.338 598.901 338.381 584.078 349.222C575.251 344.602 566.965 339.622 557.836 335.447C552.574 339.326 538.585 346.698 539.551 353.13C542.187 357.322 555.973 363.928 561.107 366.698C549.376 382.992 546.393 398.072 555.473 416.545C553.228 416.274 550.212 415.039 547.914 414.849C535.217 413.802 523.166 411.107 510.864 414.593C506.97 406.225 502.743 397.162 503.534 387.804C476.645 373.018 448.813 356.935 421.883 342.599L528.917 276.068C542.309 267.916 556.415 258.63 569.917 250.985Z"/><path fill="#FCF7C3" transform="matrix(0.0937729 0 0 0.09375 3.05176e-05 0)" d="M797.335 418.71C804.676 422.223 853.575 445.243 857.422 443.983C863.801 446.774 872.064 451.533 878.336 455.01C902.214 468.252 927.647 480.196 951.405 493.459C908.132 517.066 865.758 544.694 822.8 569.044C814.508 573.744 806.127 579.048 798.227 584.4C766.533 568.817 735.905 551.346 704.091 536.024C702.171 535.099 698.985 533.607 697.306 532.481L697.873 532.018C700.327 526.361 701.065 520.78 700.101 514.628C703.495 512.657 713.957 509.832 718.378 508.193C735.602 501.808 750.436 496.233 765.745 486.115C774.383 490.846 783.039 495.918 791.597 500.82C819.215 485.313 812.782 481.683 789.782 468.353C793.85 464.364 796.947 461.728 799.157 456.387C804.272 444.025 801.874 430.64 797.335 418.71Z"/><path fill="#FCF7C3" transform="matrix(0.0937729 0 0 0.09375 3.05176e-05 0)" d="M510.864 414.593C523.166 411.107 535.217 413.802 547.914 414.849C550.212 415.039 553.228 416.274 555.473 416.545C580.97 454.453 635.267 440.421 671.257 430.401C687.885 439.97 712.836 453.889 728.216 464.596C705.104 476.524 685.157 483.456 658.974 481.774C653.66 481.432 648.928 480.59 647.24 485.37C648.235 489.553 662.656 496.087 666.635 498.036C673.281 501.292 693.907 515.244 700.101 514.628C701.065 520.78 700.327 526.361 697.873 532.018L697.306 532.481C673.358 521.726 648.07 509.769 624.496 498.22C583.418 478.096 532.775 457.445 510.864 414.593Z"/><path fill="#C3DEA2" transform="matrix(0.0937729 0 0 0.09375 3.05176e-05 0)" d="M640.185 336.046C642.83 335.508 653.255 343.434 656.336 345.46C645.76 350.701 612.377 362.37 605.617 369.018C605.368 369.963 605.028 370.443 605.403 371.393C606.759 374.84 655.877 401.06 662.736 404.42C676.979 400.771 688.966 397.925 703.859 396.505C730.277 393.985 759.902 396.222 781.406 413.504C787.341 418.274 788.821 423.006 790.903 427.556C799.425 446.176 777.023 464.451 777.514 469.565C780.218 473.679 794.229 481.385 799.309 484.577C796.768 487.06 794.581 488.468 791.672 490.483C782.636 486.244 773.886 479.946 765.086 476.211C760.594 478.571 754.374 482.673 750.07 484.872C741.459 489.272 702.648 507.972 695.517 503.867C688.167 499.397 681.096 495.283 673.599 491.064C693.635 488.397 712.157 482.521 730.623 474.385C734.361 472.738 745.292 469.144 744.592 464.398C739.087 458.429 682.333 426.511 671.894 420.729C641.877 428.698 610.614 440.045 580.05 426.53C566.213 420.412 559.105 408.835 559.609 393.973C560.034 381.437 568.245 374.725 573.232 364.366C570.541 360.45 558.019 354.151 552.879 350.762C554.682 349.216 556.807 347.722 558.729 346.299C566.619 349.644 575.646 355.465 583.82 359.403C606.463 345.801 614.955 343.283 640.185 336.046Z"/><path fill="#473736" transform="matrix(0.0937729 0 0 0.09375 3.05176e-05 0)" d="M722.101 411.605C737.772 411.348 758.748 414.519 764.527 431.839C767.317 440.202 765.15 455.657 755.317 458.84C752.4 459.784 743.566 453.412 740.728 451.599C726.943 442.578 704.381 431.65 690.422 421.497C689.301 420.681 689.132 419.302 689.298 417.982C693.653 413.301 715.287 412.062 722.101 411.605Z"/><path fill="#FCF7C3" transform="matrix(0.0937729 0 0 0.09375 3.05176e-05 0)" d="M710.515 421.038C727.155 419.458 767.026 420.763 753.881 448.036C753.467 448.009 753.052 447.982 752.638 447.955C747.23 443.878 711.218 424.966 709.383 421.771L710.515 421.038Z"/><path fill="#473736" transform="matrix(0.0937729 0 0 0.09375 3.05176e-05 0)" d="M591.602 375.857C597.22 376.002 638.908 399.26 645.236 404.957C646.316 405.929 645.976 406.073 645.946 407.497C643.067 410.968 637.218 411.321 632.606 412.183C619.004 414.782 595.21 419.653 585.345 407.827C576.495 397.218 582.398 383.484 591.602 375.857Z"/><path fill="#FCF7C3" transform="matrix(0.0937729 0 0 0.09375 3.05176e-05 0)" d="M593.621 385.939C597.317 387.28 623.862 401.502 627.032 403.761C626.254 405.165 624.38 405.444 622.523 406.143C608.472 409.297 578.03 407.704 593.621 385.939Z"/><path fill="#FCF7C3" transform="matrix(0.0937729 0 0 0.09375 3.05176e-05 0)" d="M958.26 500.59C958.309 500.625 958.368 500.65 958.407 500.696C962.834 505.853 957.008 663.434 960.509 688.464C950.668 693.822 939.461 701.527 929.263 707.407L808.704 777.941C808.442 778.033 807.839 777.914 807.504 777.878C806.214 772.473 807.171 739.691 807.157 732.541L806.953 588.7L905.241 531.681C923.167 521.165 940.027 510.784 958.26 500.59Z"/><path fill="#FCF7C3" transform="matrix(0.0937729 0 0 0.09375 3.05176e-05 0)" d="M412.322 347.92C416.816 350.025 423.761 354.119 428.31 356.61C422.313 361.097 411.451 367.39 404.908 371.418L360.596 398.714C302.781 434.608 244.266 469.314 185.486 503.604C172.48 511.191 159.621 518.247 146.399 525.395C137.481 530.216 125.773 535.714 117.759 541.377C116.952 547.239 127.828 553.362 132.282 556.711C210.683 615.672 296.46 661.42 380.672 711.072L437.39 745.031C447.127 750.877 458.251 757.912 468.159 763.233C475.752 760.476 490.892 750.508 498.41 745.867L544.998 717.293C619.75 671.852 694.616 623.998 770.082 580.078C775.451 582.717 781.943 586.585 787.255 589.575L761.206 604.833C722.229 627.901 683.446 652.216 644.859 675.97L559.799 727.884C528.141 747.473 492.014 771.026 459.842 789.273C447.919 780.414 435.816 772.359 423.345 764.354C324.641 700.998 216.927 652.431 123.988 580.014C109.003 568.338 91.9762 556.103 78.3558 542.954C90.0386 536.171 103.574 529.531 115.655 523.282C177.727 491.173 236.95 454.856 296.607 418.571L412.322 347.92Z"/><path fill="#FCF7C3" transform="matrix(0.0937729 0 0 0.09375 3.05176e-05 0)" d="M861.831 52.5308C864.57 53.4612 866.642 54.7966 869.163 56.1524C895.556 70.3495 921.356 85.7755 947.671 100.079L1230.57 257.315C1243.69 264.517 1256.59 272.149 1269.71 279.217C1175.6 356.192 1064.94 422.527 962.281 487.861C955.8 484.64 949.585 481.389 943.198 477.985C957.053 471.093 969.852 462.305 983.014 454.139C1002.69 441.928 1022.29 429.641 1041.75 417.075C1091.21 385.124 1141.82 353.315 1188.62 317.456C1196.79 310.96 1204.7 304.43 1212.88 297.641C1214.61 296.561 1229.81 283.569 1227.54 281.605C1214.93 270.713 1176.54 251.32 1163.95 244.234L1006.02 155.809L910.312 102.616C896.349 94.9347 875.909 82.8363 861.902 76.4106C848.931 86.0075 836.038 95.7336 823.008 105.255C772.056 142.483 717.854 176.355 664.456 209.85L618.677 238.899C611.474 243.382 602.599 249.25 595.166 252.922L579.38 244.973C586.064 239.989 596.866 233.954 604.242 229.447C694.042 174.577 778.363 116.742 861.831 52.5308Z"/><path fill="#C3DEA2" transform="matrix(0.0937729 0 0 0.09375 3.05176e-05 0)" d="M1270.8 289.893C1272.96 292.825 1283.87 319.801 1286.62 325.591C1278.17 331.226 1270.07 337.936 1261.81 343.912C1187.3 397.796 1108.04 445.022 1030.56 494.428C1013.74 505.152 996.892 515.727 979.854 526.156L969.058 532.999L969.14 493.949C1015.46 466.402 1064.52 434.21 1109.86 404.585C1162.52 370.179 1222.97 330.276 1270.8 289.893Z"/><path fill="#C3DEA2" transform="matrix(0.0937729 0 0 0.09375 3.05176e-05 0)" d="M91.6453 638.482C103.953 646.879 115.372 656.633 127.826 665.029C166.574 690.715 206.543 715.44 246.478 739.271C296.476 769.107 349.931 793.164 399.496 823.956C424.004 839.181 444.342 855.915 466.744 873.715C468.112 879.395 469.588 884.456 471.626 889.956C472.58 892.531 473.366 894.901 471.384 897.008C468.81 897.241 466.72 895.563 464.34 894.178C445.231 882.901 427.416 872.021 407.602 861.914C357.452 836.333 306.383 813.11 258.107 783.947C236.427 770.85 215.516 755.041 195.065 740.053C155.645 711.164 115.611 680.647 77.7347 649.719C80.709 646.876 88.1036 641.359 91.6453 638.482Z"/><path fill="#C3DEA2" transform="matrix(0.0937729 0 0 0.09375 3.05176e-05 0)" d="M796.964 594.669C797.903 595.624 797.706 628.46 797.791 632.87C758.677 654.126 713.854 682.432 675.547 705.861L564.05 773.108L502.681 810.522C496.455 814.362 480.297 825.458 474.689 827.69C473.102 826.709 473.456 826.243 472.719 823.847C470.606 814.956 467.488 805.868 464.666 797.139L626.169 698.15C682.708 663.228 739.441 627.95 796.964 594.669Z"/><path fill="#C3DEA2" transform="matrix(0.0937729 0 0 0.09375 3.05176e-05 0)" d="M797.044 747.362C798.209 749.044 797.339 779.545 797.277 784.393C774.596 798.797 748.409 813.318 725.074 827.162L584.117 911.18L516.906 951.046C512.152 953.879 495.739 964.606 491.921 965.861C490.855 964.386 490.673 962.102 490.285 960.157C487.96 952.624 485.662 942.556 483.859 934.791C510.263 920.072 538.617 901.898 564.811 886.326L797.044 747.362Z"/><path fill="#C3DEA2" transform="matrix(0.0937729 0 0 0.09375 3.05176e-05 0)" d="M1278.83 460.526C1280.31 461.728 1289.87 487.117 1291.76 491.296C1273.36 503.483 1250.57 515.042 1231.25 527.038C1147.83 578.839 1061.93 627.476 978.162 678.58L969.392 683.776L969.349 650.115C1071.39 586.385 1178.34 525.899 1278.83 460.526Z"/><path fill="#C3DEA2" transform="matrix(0.0937729 0 0 0.09375 3.05176e-05 0)" d="M90.6621 566.012C94.2425 567.739 115.922 585.196 120.908 588.956C144.752 606.934 168.463 623.812 193.672 639.907C279.732 694.853 371.914 737.515 455.181 796.902C457.255 805.975 461.882 818.644 464.919 827.744L456.302 821.837C437.304 809.215 412.935 793.127 392.689 783.515C308.973 743.771 230.258 701.308 157.306 643.444C130.213 621.955 102.537 601.283 76.0478 578.105C81.1274 573.239 85.0668 570.269 90.6621 566.012Z"/><path fill="#C3DEA2" transform="matrix(0.0937729 0 0 0.09375 3.05176e-05 0)" d="M1276.97 343.922C1278.24 345.07 1284.96 362.277 1286.21 365.269C1271.33 378.179 1252.43 390.146 1236.17 401.458C1196.88 428.81 1155.67 452.679 1114.91 477.692C1068.35 506.266 1022.13 535.903 975.567 564.486L969.426 568.438L969.312 543.759C987.076 531.966 1006.12 521.007 1024.2 509.396C1097.52 462.302 1172.29 417.417 1244.13 368.024C1255.34 360.312 1265.94 351.871 1276.97 343.922Z"/><path fill="#C3DEA2" transform="matrix(0.0937729 0 0 0.09375 3.05176e-05 0)" d="M92.073 707.244C96.827 710.25 108.054 720.177 113.454 724.178C125.763 733.665 138.563 742.511 151.197 751.557C252.777 824.288 368.724 870.892 474.29 936.516C477.145 945.066 480.447 956.714 482.505 965.345L474.413 959.924C417.838 916.715 348.082 889.14 285.76 855.459C260.338 841.719 233.831 825.241 209.48 809.701C165.084 781.369 120.105 750.32 78.5487 717.975C82.4679 714.298 87.7255 710.538 92.073 707.244Z"/><path fill="#C3DEA2" transform="matrix(0.0937729 0 0 0.09375 3.05176e-05 0)" d="M1278.91 423.435C1281.04 425.688 1286.56 441.72 1287.81 445.22C1260.55 459.216 1226.9 483.491 1199.93 499.704L976.397 634.607L969.635 638.524L969.638 614.354C976.112 610.606 983.222 605.713 989.667 601.682L1025.65 579.519L1125.76 517.752C1156.88 498.516 1189.21 480.238 1220.42 461.007C1240.34 448.74 1259.36 436.262 1278.91 423.435Z"/><path fill="#C3DEA2" transform="matrix(0.0937729 0 0 0.09375 3.05176e-05 0)" d="M1277.32 383.851C1279.11 386.469 1285.26 403.4 1286.42 406.966C1247.12 436.113 1197.35 463.842 1155.47 489.164C1094.9 525.782 1034.48 562.538 974.788 600.595L969.632 604.061C969.216 595.803 969.345 587.057 969.34 578.749C985.442 569.917 1003.34 558.104 1019.1 548.208L1096.43 499.974C1157.19 462.339 1219.68 426.187 1277.32 383.851Z"/><path fill="#C3DEA2" transform="matrix(0.0937729 0 0 0.09375 3.05176e-05 0)" d="M797.018 644.025C798.153 645.984 797.717 664.168 797.697 667.478L490.319 853.219C488.322 854.41 484.175 857.184 481.944 856.791L481.351 855.179L476.3 837.531C550.982 790.866 627.053 746.037 702.297 700.274C733.407 681.354 765.234 661.666 797.018 644.025Z"/><path fill="#C3DEA2" transform="matrix(0.0937729 0 0 0.09375 3.05176e-05 0)" d="M796.144 713.972C797.169 714.023 796.659 713.897 797.588 714.689C798.143 720.767 797.863 729.708 797.825 736.041C782.372 746.246 763.437 756.647 747.252 766.178L704.245 792.073C685.865 802.946 667.108 813.601 648.921 824.75L528.827 896.917L497.329 915.851C494.328 917.646 483.987 924.921 481.059 923.763C479.578 917.212 478.162 912.409 476.125 905.996C491.621 896.09 507.834 886.696 523.541 877.046L668.598 789.446L744.023 744.402C761.137 734.168 778.593 723.339 796.144 713.972Z"/><path fill="#C3DEA2" transform="matrix(0.0937729 0 0 0.09375 3.05176e-05 0)" d="M797.64 679.311C798.227 682.105 797.864 697.514 797.82 701.35C786.406 709.726 763.622 722.011 750.562 729.739L665.998 780.086C647.975 790.673 485.471 890.39 480.91 890.217L480.102 888.511C478.566 883.691 476.899 878.8 475.309 873.988C489.856 863.025 514.844 848.467 530.871 838.655L631.938 777.669L723.655 722.582C747.011 708.427 773.636 691.801 797.64 679.311Z"/><path fill="#C3DEA2" transform="matrix(0.0937729 0 0 0.09375 3.05176e-05 0)" d="M91.5519 673.89C94.0596 674.424 103.861 682.738 106.766 684.98L136.633 707.935C143.937 713.582 151.332 719.396 158.81 724.823C198 753.261 236.647 783.513 279.107 806.966C319.861 829.477 362.019 848.87 403.394 870.089C425.017 881.179 445.701 894.414 466.887 906.253L472.42 924.781L462.864 918.825C442.691 905.435 423.47 895.715 402.129 884.387L315.476 838.814C229.524 793.403 152.982 746.575 77.734 684.331C81.0255 681.446 87.818 676.674 91.5519 673.89Z"/><path fill="#C3DEA2" transform="matrix(0.0937729 0 0 0.09375 3.05176e-05 0)" d="M90.3191 603.13C92.5802 603.689 114.003 621.952 118.142 624.953C179.105 672.678 242.2 718.726 311.635 753.489C335.205 765.524 359.003 776.963 382.617 788.933C395.682 795.556 407.921 803.048 420.577 810.087C436.39 818.88 451.715 831.588 467.306 839.637C468.645 843.999 475.978 862.421 471.238 864.567C468.558 864.134 467.138 862.414 465.033 860.548C460.124 856.525 455.213 852.33 450.246 848.404C394.909 804.664 330.579 776.139 269.507 741.688C222.574 715.213 175.837 685.643 130.831 655.876C112.798 643.948 93.8019 627.776 76.7684 614.098C80.6892 610.639 86.155 606.482 90.3191 603.13Z"/><path fill="#C3DEA2" transform="matrix(0.0937729 0 0 0.09375 3.05176e-05 0)" d="M661.488 287.464C666.79 287.508 683.545 291.363 689.038 292.6C735.859 303.144 783.592 321.731 823.292 349.114C849.832 367.42 877.716 395.337 890.122 425.594C893.947 434.925 896.091 444.606 897.907 454.483C890.221 451.644 871.851 440.831 863.779 436.415C836.913 363.545 745.72 332.104 682.551 298.555C675.873 295.009 668.394 291.864 662.044 287.825L661.488 287.464Z"/><path fill="#C3DEA2" transform="matrix(0.0937729 0 0 0.09375 3.05176e-05 0)" d="M466.427 378.102C473.667 381.407 486.484 389.411 494.354 393.581L495.094 396.757C506.731 448.249 551.905 472.032 595.063 494.104C629.895 511.917 665.547 527.413 700.781 544.266C700.963 544.388 701.145 544.509 701.327 544.631C701.124 544.64 700.921 544.649 700.718 544.658C613.241 536.538 468.049 479.249 466.427 378.102Z"/></svg>'},{type:"karte",label:"Karte",color:"#4a5a7a",backgroundStyle:"radial-gradient(ellipse at center, #5A6A8A 0%, #4a5a7a 30%, #3A4A6A 70%, #2A3A5A 100%)",icon:'<?xml version="1.0" encoding="utf-8" ?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="128" height="96" viewBox="0 0 128 96"><path fill="#302E2E" transform="matrix(0.0937729 0 0 0.09375 3.05176e-05 0)" d="M807.317 68.2765C820.431 67.1691 839.986 70.5919 851.168 77.146C871.678 89.1672 892.165 104.257 911.939 117.564L1058.95 217.842L1251.96 348.212L1305.11 383.997C1324.51 397.057 1348.69 408.252 1349.32 435.089C1349.98 463.165 1349.57 484.093 1323.01 500.326C1309.22 508.749 1294.33 516.538 1280.14 524.698L1187.81 577.679L969.575 704.01L725.739 844.823L635.963 896.542C611.948 910.372 588.598 928.335 560.366 930.79C544.542 932.596 524.547 929.561 510.257 922.328C502.731 918.519 493.633 911.938 486.43 907.014L445.147 878.285L326.803 796.265L137.69 665.856L69.5758 619.048C57.5273 610.719 46.0634 602.385 33.5897 593.767C14.6332 580.671 14.3808 550.176 18.0428 529.767C22.2786 506.161 54.0385 492.179 73.8552 480.614L173.588 423.356L475.458 248.277L683.605 128.121L741.28 95.2464C764.06 82.331 780.246 70.693 807.317 68.2765Z"/><path fill="#AAAAAA" transform="matrix(0.0937729 0 0 0.09375 3.05176e-05 0)" d="M936.748 147.946L937.77 147.891C942.322 150.05 964.642 165.687 970.563 169.585C1003.05 190.969 1035.2 213.353 1067.43 235.177L1243.46 354.268C1268.75 371.322 1294.36 387.897 1319.63 404.988C1334.95 415.342 1346.56 432.664 1336.1 450.727C1327.38 465.775 1313.25 471.674 1298.83 479.793C1289.65 484.984 1280.42 490.214 1271.27 495.454L1162.81 557.59L850.887 737.966L673.514 841.046L618.993 872.441C586.839 891.265 570.187 905.144 529.877 896.119C512.311 890.821 495.623 876.782 480.303 866.465L388.562 803.416L122.035 619.757L656.364 309.793L840.708 203.156C872.355 184.879 904.869 165.554 936.748 147.946Z"/><path fill="#302E2E" transform="matrix(0.0937729 0 0 0.09375 3.05176e-05 0)" d="M1161.77 370.492C1173.22 372.496 1241.89 425.373 1258.54 433.493C1260.14 434.273 1266.07 438.028 1265.86 440.095C1258.27 445.232 1250.27 449.417 1242.35 454.007L1193.99 481.788L1046.72 566.731L555.865 847.933C552.887 846.965 529.695 830.843 524.649 827.513L477.564 796.522C472.543 793.186 452.343 781.095 451.831 776.897C453.513 774.571 455.582 773.347 458.048 771.919L1161.77 370.492Z"/><path fill="#AAAAAA" transform="matrix(0.0937729 0 0 0.09375 3.05176e-05 0)" d="M857.797 551.203C857.939 551.182 858.079 551.139 858.223 551.14C860.445 551.148 946.229 609.038 952.579 614.614C938.402 622.454 924.084 631.09 909.953 639.14L781.27 713.125L687.953 766.285C643.976 791.506 599.469 817.572 555.24 842.242C523.233 820.465 490.085 799.52 458.339 777.647L857.797 551.203Z"/><path fill="#6E8CB8" transform="matrix(0.0937729 0 0 0.09375 3.05176e-05 0)" d="M1217.5 413.246C1221.19 414.057 1251.71 435.529 1256.75 439.034C1248.63 445.038 1229.83 455.136 1220.38 460.515L1161.49 494.461L957.758 611.648C947.806 603.009 929.553 591.892 917.834 584.298C927.179 578.035 942.554 570.31 952.873 564.431L1025.25 523.034L1217.5 413.246Z"/><path fill="#6E8CB8" transform="matrix(0.0937729 0 0 0.09375 3.05176e-05 0)" d="M1162.36 376.583C1171.49 381.779 1183.81 390.4 1192.99 396.42C1177.54 404.066 1160 414.692 1144.91 423.314L1070.17 465.987L894.011 566.571C891.947 567.092 867.851 550.574 863.441 548.007C871.109 543.134 879.848 538.019 887.836 533.616C980.128 482.739 1070.04 427.356 1162.36 376.583Z"/><path fill="#BB6970" transform="matrix(0.0937729 0 0 0.09375 3.05176e-05 0)" d="M1197.45 399.952C1199.96 399.929 1210.55 407.508 1213.43 409.42L913.375 580.978C911.734 580.31 899.704 572.175 897.439 570.669L1063.8 475.702L1149.75 426.579C1164.68 418.132 1182.32 407.534 1197.45 399.952Z"/><path fill="#302E2E" transform="matrix(0.0937729 0 0 0.09375 3.05176e-05 0)" d="M403.688 544.292C422.838 543.09 438.409 553.924 452.99 564.812C463.405 572.589 496.507 595.156 497.777 607.636C498.196 611.753 495.33 615.907 492.773 618.907C480.135 633.735 414.255 669.516 394.805 677.039C386.235 680.355 377.249 682.668 368.077 683.399C358.89 683.961 349.562 683.63 340.79 680.584C327.058 675.816 298.294 652.776 286.017 642.535C279.066 636.737 272.499 630.504 271.734 620.975C271.215 614.514 273.249 609.964 277.439 605.163C288.357 592.656 360.191 555.78 377.803 549.499C386.236 546.492 394.793 544.946 403.688 544.292Z"/><path fill="#C0BEB0" transform="matrix(0.0937729 0 0 0.09375 3.05176e-05 0)" d="M337.742 576.219C346.772 575.546 361.015 575.433 369.847 576.735C369.951 579.148 369.783 583.536 369.721 586.084C369.455 596.973 381.251 595.7 388.422 598.989C392.034 600.645 396.912 606.146 400.654 608.063C408.915 612.267 419.427 614.316 426.474 620.492C430.098 623.668 428.337 633.161 428.299 637.752C428.274 640.922 428.925 649.356 427.07 651.198C418.968 650.405 406.333 649.673 398.939 647.192C383.865 642.135 378.86 623.473 364.379 619.127C361.236 618.184 356.37 617.851 352.992 617.554C347.327 612.725 341.196 607.678 335.915 602.493C336.827 595.865 336.08 581.149 337.742 576.219Z"/><path fill="#C0BEB0" transform="matrix(0.0937729 0 0 0.09375 3.05176e-05 0)" d="M330.815 577.94L331.302 578.112C332.32 579.827 331.25 599.789 331.127 603.389C325.927 606.537 282.158 630.279 280.339 630.224C277.885 626.526 277.439 624.288 276.45 620.075C278.573 609.07 285.196 603.516 294.628 598.127C306.617 591.277 318.694 584.555 330.815 577.94Z"/><path fill="#C0BEB0" transform="matrix(0.0937729 0 0 0.09375 3.05176e-05 0)" d="M487.135 599.276C488.907 599.828 489.531 600.732 490.574 602.232C495.569 609.229 489.776 616.365 484.197 620.758C470.147 631.822 453.914 640.267 438.317 648.879C436.506 649.928 435.772 650.262 433.824 651.043L433.196 650.414C432.769 643.478 433.367 633.859 433.621 626.71C451.117 618.788 469.432 607.797 487.135 599.276Z"/><path fill="#C0BEB0" transform="matrix(0.0937729 0 0 0.09375 3.05176e-05 0)" d="M354.705 622.14C365.643 623.422 367.96 624.22 374.597 633.284C357.443 642.898 340.347 652.2 322.922 661.308L321.28 661.904C316.675 660.586 308.097 653.455 304.077 650.299C320.701 640.868 338.483 631.732 354.705 622.14Z"/><path fill="#C0BEB0" transform="matrix(0.0937729 0 0 0.09375 3.05176e-05 0)" d="M424.264 552.584C428.813 553.574 438.947 560.892 443.095 563.738C431.172 571.74 405.87 583.995 392.142 591.766C387.563 594.419 378.19 592.975 375.457 588.009C375.009 587.196 375.215 580.419 375.24 579.074C389.534 572.77 411.124 560.655 424.264 552.584Z"/><path fill="#C0BEB0" transform="matrix(0.0937729 0 0 0.09375 3.05176e-05 0)" d="M447.098 567.329C451.663 569.704 460.007 576.853 464.147 580.284C446.747 588.653 428.209 599.82 411.084 607.412C403.323 604.314 399.456 602.179 393.781 596.158C411.2 587.447 429.797 576.692 447.098 567.329Z"/><path fill="#C0BEB0" transform="matrix(0.0937729 0 0 0.09375 3.05176e-05 0)" d="M376.8 637.927C380.222 638.53 388.1 647.192 390.908 650.021C383.596 654.755 373.86 659.224 366.207 663.747C361.749 666.382 346.148 676.185 342.056 676.04C335.014 672.888 331.573 670.65 325.514 666.231C339.278 657.494 362.113 645.85 376.8 637.927Z"/><path fill="#C0BEB0" transform="matrix(0.0937729 0 0 0.09375 3.05176e-05 0)" d="M332.477 608.607C335.914 608.905 345.535 617.557 348.755 620.181C333.936 627.447 315.504 638.131 300.662 646.066C297.215 645.946 287.745 637.47 284.629 634.881C298.693 626.213 317.752 616.448 332.477 608.607Z"/><path fill="#C0BEB0" transform="matrix(0.0937729 0 0 0.09375 3.05176e-05 0)" d="M467.892 583.145C471.002 584.059 480.517 592.964 483.348 595.513C467.525 604.337 450.136 612.207 433.654 621.357L433.171 621.219C427.803 615.11 425.31 613.343 417.71 610.041C434.18 600.767 451.322 592.533 467.892 583.145Z"/><path fill="#C0BEB0" transform="matrix(0.0937729 0 0 0.09375 3.05176e-05 0)" d="M397.303 652.26C403.955 654.29 418.448 655.141 425.874 655.688C411.237 665.107 395.646 672.341 378.85 676.82C368.915 679.041 360.224 678.731 350.175 678.495C365.632 669.319 382.029 661.232 397.303 652.26Z"/><path fill="#C0BEB0" transform="matrix(0.0937729 0 0 0.09375 3.05176e-05 0)" d="M399.472 549.54C402.797 549.185 414.827 547.907 416.524 550.577C414.558 554.173 382.431 569.829 375.596 574.404C372.386 572.747 371.461 572.38 367.988 571.389C358.755 570.256 352.31 570.798 343.11 571.432C359.595 561.618 380.463 552.638 399.472 549.54Z"/><path fill="#302E2E" transform="matrix(0.0937729 0 0 0.09375 3.05176e-05 0)" d="M564.117 631.48C579.235 631.18 622.042 655.383 593.894 664.699C581.903 664.931 560.467 653.865 555.151 642.198C552.485 636.346 559.567 632.964 564.117 631.48Z"/><path fill="#AAAAAA" transform="matrix(0.0937729 0 0 0.09375 3.05176e-05 0)" d="M562.219 636.708C572.862 635.691 584.042 642.372 592.282 648.534C596.748 651.873 598.161 655.388 594.46 659.66C586.069 659.902 577.83 655.436 570.83 651.166C565.408 647.857 557.21 643.451 562.219 636.708Z"/><path fill="#302E2E" transform="matrix(0.0937729 0 0 0.09375 3.05176e-05 0)" d="M530.637 648.756C544.383 647.853 561.14 657.341 569.293 668.326C573.625 674.161 569.131 678.826 564.033 681.732C555.621 683.184 548.141 679.416 541.056 675.143C531.811 669.567 514.196 658.012 530.637 648.756Z"/><path fill="#AAAAAA" transform="matrix(0.0937729 0 0 0.09375 3.05176e-05 0)" d="M531.836 653.41C534.123 653.307 537.731 653.079 539.713 653.966C546.712 657.099 571.427 667.226 562.233 677.358C553.226 677.743 532.034 666.602 529.594 657.634C529.993 654.903 529.795 655.813 531.836 653.41Z"/><path fill="#302E2E" transform="matrix(0.0937729 0 0 0.09375 3.05176e-05 0)" d="M851.436 469.541C868.316 470.058 906.808 496.956 876.056 502.507C859.509 502.018 821.368 475.885 851.436 469.541Z"/><path fill="#AAAAAA" transform="matrix(0.0937729 0 0 0.09375 3.05176e-05 0)" d="M850.489 474.607C858.276 474.498 880.683 485.282 881.34 493.553C880.168 496.139 880.546 495.329 877.818 497.145C873.036 497.524 870.609 497.149 866.237 494.958C860.231 491.947 847.062 486.209 846.724 478.412C848.015 475.731 847.515 476.631 850.489 474.607Z"/><path fill="#302E2E" transform="matrix(0.0937729 0 0 0.09375 3.05176e-05 0)" d="M756.101 522.058C771.474 520.96 812.567 545.356 786.698 554.743C774.983 555.124 763.571 547.697 754.361 540.774C744.992 533.731 743.537 526.419 756.101 522.058Z"/><path fill="#AAAAAA" transform="matrix(0.0937729 0 0 0.09375 3.05176e-05 0)" d="M756.136 526.772C765.275 526.513 789.215 537.089 788.899 546.93C788.013 549.137 787.49 549.222 785.346 550.562C777.681 549.855 753.405 538.383 752.749 530.09C753.885 527.717 753.586 528.431 756.136 526.772Z"/><path fill="#302E2E" transform="matrix(0.0937729 0 0 0.09375 3.05176e-05 0)" d="M816.511 488.171C831.922 485.578 872.059 508.75 849.173 520.201C835.941 521.342 817.97 511.387 810.423 500.61C806.416 494.889 811.696 490.556 816.511 488.171Z"/><path fill="#AAAAAA" transform="matrix(0.0937729 0 0 0.09375 3.05176e-05 0)" d="M817.516 492.68C824.622 492.135 830.726 494.28 836.569 498.179C842.255 501.973 854.332 507.42 849.022 515.215C844.474 515.74 841.537 515.647 837.271 513.788C830.291 510.747 817.544 504.871 815.397 496.96C815.829 494.175 815.599 495.12 817.516 492.68Z"/><path fill="#302E2E" transform="matrix(0.0937729 0 0 0.09375 3.05176e-05 0)" d="M643.316 586.097C656.231 585.523 674.192 594.698 681.348 605.71C685.378 611.911 678.78 616.173 673.737 618.31C662.418 618.958 647.768 610.206 639.395 602.833C631.268 595.675 633.789 589.64 643.316 586.097Z"/><path fill="#AAAAAA" transform="matrix(0.0937729 0 0 0.09375 3.05176e-05 0)" d="M645.188 590.631C653.318 590.912 677.042 601.163 676.339 610.233C674.719 612.71 675.409 611.865 672.352 613.511C664.154 613.196 640.883 602.429 640.952 593.924C642.003 591.89 642.999 591.711 645.188 590.631Z"/><path fill="#302E2E" transform="matrix(0.0937729 0 0 0.09375 3.05176e-05 0)" d="M594.482 614.119C604.796 613.551 611.909 618.856 620.44 623.94C630.485 629.926 640.941 640.994 624.197 647.302C610.664 646.464 567.48 625.857 594.482 614.119Z"/><path fill="#AAAAAA" transform="matrix(0.0937729 0 0 0.09375 3.05176e-05 0)" d="M593.591 619.401C602.762 618.293 624.92 629.032 627.083 637.678C626.56 640.5 626.964 639.437 624.699 641.926C615.401 642.594 605.394 636.509 597.874 631.561C592.933 628.309 589.223 624.627 593.591 619.401Z"/><path fill="#302E2E" transform="matrix(0.0937729 0 0 0.09375 3.05176e-05 0)" d="M673.86 568.723C687.236 568.007 704.894 577.332 712.214 588.742C715.811 594.351 710.612 598.771 705.711 600.928C694.765 602.298 684.778 594.921 676.103 589.037C667.381 583.12 660.801 574.355 673.86 568.723Z"/><path fill="#AAAAAA" transform="matrix(0.0937729 0 0 0.09375 3.05176e-05 0)" d="M674.664 573.363C684.884 572.856 692.409 577.733 700.653 583.216C705.412 586.38 709.809 590.534 705.561 595.886C700.164 596.64 696.573 595.628 691.807 593.09C685.824 589.904 674.477 584.41 672.461 577.63C672.883 574.72 672.43 575.842 674.664 573.363Z"/><path fill="#302E2E" transform="matrix(0.0937729 0 0 0.09375 3.05176e-05 0)" d="M786.467 505.422C799.353 504.564 817.443 514.055 824.613 524.969C828.486 530.865 822.362 535.062 817.536 537.237C809.002 538.097 801.555 534.295 794.453 529.928C784.679 523.918 770.14 514.488 786.467 505.422Z"/><path fill="#AAAAAA" transform="matrix(0.0937729 0 0 0.09375 3.05176e-05 0)" d="M788.709 510.142C797.074 510.733 820.221 519.824 819.502 529.273C818.253 531.492 817.706 531.636 815.377 532.764C807.647 532.382 784.324 521.643 784.784 513.043C786.112 511.055 786.38 511.078 788.709 510.142Z"/><path fill="#302E2E" transform="matrix(0.0937729 0 0 0.09375 3.05176e-05 0)" d="M705.268 550.776C714.018 549.967 720.774 553.726 728.042 558.223C737.095 563.824 752.572 573.799 736.1 582.101C722.328 585.076 681.774 562.703 705.268 550.776Z"/><path fill="#AAAAAA" transform="matrix(0.0937729 0 0 0.09375 3.05176e-05 0)" d="M706.208 555.352C713.91 555.225 735.902 565.565 737.506 573.308C736.771 575.96 737.091 575.077 734.868 577.214C731.992 577.373 729.259 577.571 726.528 576.538C719.662 573.94 704.361 567.596 703.351 559.347C703.837 557.11 704.354 556.942 706.208 555.352Z"/><path fill="#616161" transform="matrix(0.0937729 0 0 0.09375 3.05176e-05 0)" d="M859.65 93.2116C861.365 93.7071 874.565 103.599 877.163 105.283C895.471 117.151 914.302 131.469 932.805 142.723L380.67 463.194L222.357 555.471C188.649 574.909 154.378 593.689 121.187 613.983C118.568 615.584 118.076 616.239 115.666 615.655C91.4549 598.361 65.7243 581.334 41.1063 564.473C48.0179 560.173 57.108 555.336 64.3181 551.185L122.889 517.534L350.607 386.197C520.316 288.254 688.719 189.186 859.65 93.2116Z"/><path fill="#AAAAAA" transform="matrix(0.0937729 0 0 0.09375 3.05176e-05 0)" d="M811.797 77.6227C829.227 78.2349 838.757 81.2249 853.447 90.359C817.495 108.799 776.147 133.728 740.498 154.079L512.515 285.725L239.825 443.644C179.643 478.303 117.287 513.093 57.7702 548.585L37.7528 560.049C25.7713 544.982 23.0862 532.467 36.4147 516.968C45.4604 506.45 64.7845 497.124 76.9363 490.154L132.206 458.238L295.315 364.073L606.183 183.909L718.359 119.382C733.43 110.786 748.655 102.216 763.673 93.5524C780.285 83.9691 792.381 78.8536 811.797 77.6227Z"/><path fill="#AAAAAA" transform="matrix(0.0937729 0 0 0.09375 3.05176e-05 0)" d="M1338.12 464.556C1339.76 471.772 1325.9 486.742 1320.33 490.207C1313.14 494.678 1305.33 499.169 1297.98 503.414L1244.09 533.833L1089.55 622.993L593.037 910.515C571.488 922.752 537.442 925.981 514.703 913.64C502.47 907.002 488.5 896.428 476.77 888.336L406.144 839.196L256.809 736.167L123.547 644.238L70.6681 607.943C57.5625 598.927 37.4812 587.934 29.8121 574.277C28.0185 569.49 27.4902 567.155 26.9498 562.118C37.9678 572.775 50.817 581.317 63.4023 590.028L100.327 615.677L258.961 724.868L387.861 813.891C410.299 829.422 432.17 845.428 455.089 860.374C474.08 872.597 492.496 887.594 511.807 899.104C532.199 911.259 569.819 910.356 590.482 899.583C605.135 891.944 619.663 882.735 633.971 874.515L722.916 823.578L1035.32 641.778L1239.98 523.884L1296.55 491.535C1315.12 480.815 1321.41 479.201 1338.12 464.556Z"/></svg>'},{type:"zwischenrechnung",label:"Zwischen&shy;rechnung",color:"#7a6a4a",textColor:"#F5E5C8",backgroundStyle:"radial-gradient(ellipse at center, #8A7A5A 0%, #7a6a4a 30%, #6A5A3A 70%, #5A4A2A 100%)"}];for(let R=0;R<Math.min(G.length,F.length);R++){const $=G[R],pe=F[R];pe.content={isPaymentButton:!0,paymentType:$.type,label:$.label,color:$.color,icon:$.icon,textColor:$.textColor,backgroundStyle:$.backgroundStyle}}}let be,ze=K(),ot,lt=!1;nn(()=>{t(ze)&&(be=new ResizeObserver(k=>{ot&&clearTimeout(ot),ot=setTimeout(()=>{for(let F of k){const G=F.contentRect.width,R=F.contentRect.height;(Y!==G||J!==R)&&(Y=G,J=R,Se())}},150)}),be.observe(t(ze)),setTimeout(()=>{Y=t(ze).clientWidth,J=t(ze).clientHeight,Se()},100));const m=()=>{g(_,"categories"),E=null,nt.set("order")};return window.addEventListener("autoCollapseComplete",m),()=>{be?.disconnect(),window.removeEventListener("autoCollapseComplete",m)}}),Ce.subscribe(m=>{h=m.isConnected,h&&!lt&&(lt=!0,g(S,"Loading categories..."),setTimeout(()=>{Ce.send({command:"getCategories"}).then(F=>{F.status==="success"&&Array.isArray(F.payload)?(g(C,F.payload),g(S,""),ye()):(g(S,"Error: Could not load categories from backend."),console.error("Failed to load categories:",F))}).catch(F=>{g(S,"Error: Failed to get response for categories."),console.error("Error in getCategories promise:",F)})},500)),m.lastMessage?.command==="getItemsByCategoryResponse"&&(m.lastMessage.status==="success"&&Array.isArray(m.lastMessage.payload)?(g(p,m.lastMessage.payload),g(_,"products"),g(S,"")):g(S,"Error: Could not load products from backend."))});let Je=K([]);async function at(m){try{await m()}catch(k){if(k.message&&k.message.includes("User must be authenticated")){nt.set("agent"),he.addMessage({timestamp:new Date().toLocaleTimeString("en-GB",{hour:"2-digit",minute:"2-digit"}),type:"agent",message:"Aktion erfordert Anmeldung. Bitte geben Sie Ihren PIN-Code ein.",style:"error"}),Re.activate("agent",null,null,"numeric");return}throw k}}function wt(m){const k=m.detail.data;k&&k.id&&(E=k,g(S,"Loading products..."),Ce.send({command:"getItemsByCategory",payload:{categoryId:k.id}}))}async function dt(m){const k=m.detail.data;k&&k.id&&await at(async()=>{await Ze.addItem(k.id,1)})}function ct(){g(_,"categories"),E=null,g(p,[]),g(S,"")}function Ge(){g(A,t(A)==="6-6-6"?"4-4-4":"6-6-6")}async function Ie(){await at(async()=>{jl()})}async function We(){if(u().isAuthenticated){const m=u().currentUser,k=`👤 **${m.full_name}** (${m.role})

🔐 **Status:** Erfolgreich angemeldet
💡 **Tipp:** Lange drücken zum Abmelden`,{agentStore:F}=await jt(async()=>{const{agentStore:G}=await Promise.resolve().then(()=>Sn);return{agentStore:G}},void 0);F.addMessage({timestamp:new Date().toLocaleTimeString("en-GB",{hour:"2-digit",minute:"2-digit"}),type:"agent",message:k})}}async function ht(){if(u().isAuthenticated){await An.logout();const{agentStore:m}=await jt(async()=>{const{agentStore:k}=await Promise.resolve().then(()=>Sn);return{agentStore:k}},void 0);m.clearMessages(),m.addMessage({timestamp:new Date().toLocaleTimeString("en-GB",{hour:"2-digit",minute:"2-digit"}),type:"agent",message:`Willkommen bei ecKasse!

👥 Verfügbare Benutzer:
• Admin (Vollzugriff)
• Kassier (Kassenfunktionen)
• Aushilfe (Grundfunktionen)

⏰ Überprüfe Systemzeit und ausstehende Transaktionen...

💡 Geben Sie einfach Ihre 4-6 stellige PIN ein - das System erkennt Sie automatisch.

🔑 Bei neuer oder Testkasse: Admin-PIN ist 1234`}),Re.activate("agent",null,null,"numeric")}}function Tt(m){return m.toLocaleTimeString("de-DE",{hour:"2-digit",minute:"2-digit"})}function Cn(m){let k;if(Ze.subscribe(F=>k=F)(),!(k.total<=0)&&(m==="bar"||m==="karte")){const F={type:m==="bar"?"Bar":"Karte",amount:k.total};Ze.finishOrder(F)}}async function _n(){let m;Ze.subscribe($=>m=$)();const k=m.items&&m.items.length>0,F=m.metadata&&m.metadata.table,G=m.status==="active",R=m.transactionId;if(G&&R&&k&&F)try{await Ze.parkCurrentOrder(F,!1),await Yn.refresh()}catch($){throw $}else{if(G&&R&&k&&!F)throw new Error("FORCE_TABLE_ASSIGNMENT");R&&Ze.resetOrder()}}async function Fe(){await at(async()=>{nt.set("order");let m;Ze.subscribe($=>m=$)();const k=m.items&&m.items.length>0,F=m.metadata&&m.metadata.table,G=m.status==="active",R=m.transactionId;if(G&&R&&(k||F))try{await _n(),Ze.resetOrder(),g(_,"categories"),E=null}catch($){if($.message==="FORCE_TABLE_ASSIGNMENT"){Re.activateTableEntryWithAutoCollapse();return}}else if(R)Re.activateTableEntry();else try{await Ze.initializeOrder({}),Re.activateTableEntry()}catch{}})}function et(){nt.set("agent"),Re.activateAlphaInput(m=>he.sendMessage(m),()=>{},he)}function Ct(){o().isActive?Re.deactivate():Re.activateAlphaInput(m=>{},()=>{},he)}function rt(m){const{data:k,mouseX:F,mouseY:G}=m.detail;if(k&&k.isUserButton&&k.authenticated){ht();return}k&&!k.isBackButton&&(g(H,k),g(v,F),g(D,G),g(q,!0))}function Ke(){g(q,!1),g(H,null)}function Gt(m){const{item:k}=m.detail;if(k.category_names)g(I,k),g(d,!0);else{let F={...k};if(k.associated_category_unique_identifier&&t(C).length>0){const G=t(C).find(R=>R.source_unique_identifier===k.associated_category_unique_identifier);G&&(F.category_name=G.category_names)}g(y,F),g(L,!0)}g(q,!1)}async function Nt(m){const{item:k}=m.detail;try{nt.set("agent");const F=k.category_names?"category":"item";console.log("🔍 [handleAdvancedEdit] wsStore:",Ce),console.log("🔍 [handleAdvancedEdit] get(wsStore):",tn(Ce)),console.log("🔍 [handleAdvancedEdit] wsStore methods:",Object.keys(tn(Ce)||{}));const G=await Ce.send({command:"getEntityJson",payload:{entityType:F,entityId:k.id}});if(G&&G.success){console.log("Entity data loaded for advanced editing:",G);const R=JSON.stringify(G.payload.entity,null,2);he.addMessage({type:"agent",message:`Advanced Edit - ${F==="category"?"Category":"Item"} Data:

${R}`,timestamp:new Date().toLocaleTimeString("en-GB",{hour:"2-digit",minute:"2-digit"})}),he.startDraftMessage(),he.updateDraftMessage(R),Re.activateAlphaInput(()=>{},()=>{},he),setTimeout(()=>{Re.clear(he);for(let $ of R)Re.append($,he)},50)}}catch(F){console.error("Error loading entity for advanced editing:",F),he.addMessage({type:"agent",message:`Failed to load ${k.category_names?"category":"item"} data for advanced editing: ${F.message}`,style:"error",timestamp:new Date().toLocaleTimeString("en-GB",{hour:"2-digit",minute:"2-digit"})})}g(q,!1)}async function sn(m){const{productId:k,updates:F}=m.detail;try{const G=await Ce.send({command:"updateProduct",payload:{productId:k,updates:F,sessionId:"admin-session-placeholder"}});G&&G.success&&t(_)==="products"&&E&&await loadProductsForCategory(E.id)}catch(G){console.error("Error saving product:",G)}g(L,!1),g(y,null)}function Rt(){g(L,!1),g(y,null)}async function Wt(m){const{categoryId:k,updates:F}=m.detail;try{const G=await Ce.send({command:"updateCategory",payload:{categoryId:k,updates:F}});G&&G.success&&t(_)==="categories"&&await loadCategories()}catch(G){console.error("Error saving category:",G)}g(d,!1),g(I,null)}function on(){g(d,!1),g(I,null)}function xt(m){const k=t(A)==="6-6-6"?"hex":"rect",F=m.type.includes("half"),G=m.type.includes("left")?"left":m.type.includes("right")?"right":"";let R,$;return t(A)==="6-6-6"?(R=F?t(oe)/2-j/2:t(oe),$=t(re)):(R=m.width||t(se),$=m.height||t(ue)),{shape:k,side:G,width:R,height:$}}function Rn(m){if(m.isPinpadTrigger)return{component:w1,onClick:()=>Re.activate("general",null,null),active:!0};if(m.isTableButton)return{icon:'<?xml version="1.0" encoding="utf-8" ?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="128" height="96" viewBox="0 0 128 96"><path fill="#312E2B" transform="matrix(0.0937729 0 0 0.09375 3.05176e-05 0)" d="M657.249 45.5326C661.809 44.9168 674.909 47.1424 679.872 47.8092L732.69 55.4381C800.705 65.1855 868.927 73.974 936.595 85.9405C1052.09 106.364 1167.06 129.61 1280.79 158.382C1293.38 161.569 1309.98 164.895 1321.49 170.599C1324.6 172.14 1323.03 212.195 1322.96 216.805C1317.16 219.727 1306.52 222.701 1300.01 224.708L1257.97 237.319L1130.3 276.416L899.334 347.199L803.807 376.657C787.511 381.667 770.045 387.867 753.759 391.908L753.502 400.777C773.208 410.24 765.714 426.758 751.438 436.493C754.672 454.83 760.404 477.222 766.292 495.043C778.312 531.425 788.232 547.55 775.428 586.479C793.644 611.173 788.351 632.852 778.653 658.961C787.232 666.586 790.02 670.215 791.077 681.45C816.727 679.381 846.371 680.664 871.117 688.624C896.232 697.171 921.595 711.801 943.908 726.18C987.586 754.326 1018.17 778.997 1072.77 768.261C1079.02 771.023 1095.27 781.56 1100.36 786.271C1100.42 792.121 1102.19 817.606 1098.13 820.178C1090.59 824.961 1075.24 828.435 1066.09 830.014C1026.48 836.849 984.219 830.616 947.21 815.373C903.854 796.249 890.566 784.975 842.244 781.116C874.83 831.877 906.209 889.241 960.618 920.012C970.24 925.454 980.474 930.082 990.275 935.297C991.235 941.66 992.421 969.949 989.016 974.859C982.424 979.02 920.144 989.34 910.409 990.417C891.68 982.492 859.397 965.44 844.008 953.414C822.81 936.804 809.128 922.88 792.581 901.291C771.86 874.258 756.399 849.065 728.483 828.685C709.892 832.319 688.586 833.255 669.549 831.452C646.125 829.234 618.374 825.196 598.494 811.371C593.269 807.737 589.282 802.843 585.24 798.042C553.887 805.691 525.245 819.378 497.608 835.771C474.784 849.308 452.002 863.701 427.523 874.18C398.834 886.461 367.611 893.439 336.763 897.587C325.42 899.112 313.771 899.376 302.513 900.919C297.191 897.145 279.362 881.142 273.369 875.976C272.239 864.432 272.049 850.606 272.646 839.051C272.945 833.27 288.443 833.361 293.319 832.373C329.846 824.972 357.628 805.289 386.466 782.888C410.121 764.513 433.906 747.931 459.941 733.052C460.128 730.331 460.85 706.908 463.218 706.014C467.046 704.569 477.641 704.496 482.581 704.061C512.165 701.457 535.516 683.606 561.036 670.641C571.404 665.423 582.207 666.893 593.593 660.02C579.677 635.479 573.135 610.932 594.816 588.27C582.616 563.27 588.1 529.223 598.913 504.722C611.77 475.589 613.546 463.845 614.222 432.534C598.269 422.101 596.589 405.793 614.366 396.46C614.916 389.423 615.173 383.967 615.187 376.913C601.03 371.777 575.26 366.981 559.569 363.156L455.12 337.098L149.251 259.442L78.6884 241.856C70.8122 239.899 47.2998 234.635 41.3126 231.387C41.1346 216.556 41.2485 201.692 41.3079 186.857C52.606 182.381 74.5142 177.545 86.9381 174.175L188.572 147.241C344.279 107.555 499.183 74.6893 657.249 45.5326Z"/><path fill="#cd853f" transform="matrix(0.0937729 0 0 0.09375 3.05176e-05 0)" d="M420.229 124.166C424.763 124.387 448.286 130.465 454.175 131.795L556.452 155.95L957.321 252.581C949.04 255.627 938.05 258.529 929.375 261.058L886.853 273.626L854.033 283.277C845.312 285.83 836.648 289.668 827.72 287.599C816.05 284.384 803.289 281.652 791.4 278.686L695.251 254.949L425.023 187.912L321.344 162.553C310.289 159.791 298.633 157.77 287.78 154.656C291.796 153.246 300.364 151.569 304.85 150.555L337.183 143.199C362.773 137.305 394.744 128.962 420.229 124.166Z"/><path fill="#cd853f" transform="matrix(0.0937729 0 0 0.09375 3.05176e-05 0)" d="M265.311 160.166C271.96 159.128 330.655 174.855 340.205 177.175L614.2 245.123L754.377 279.532L791.082 288.479C798.826 290.304 808.42 292.26 815.884 294.598C798.173 298.797 777.535 306.024 759.539 310.801C751.938 312.819 725.345 320.341 719.054 323.255L708.348 320.687L340.92 233.906C278.558 219.097 214.755 204.895 152.712 189.304C178.812 181.738 205.403 175.185 231.74 168.482C242.918 165.638 254.014 162.53 265.311 160.166Z"/><path fill="#cd853f" transform="matrix(0.0937729 0 0 0.09375 3.05176e-05 0)" d="M559.563 94.147C564.323 93.0834 660.812 115.531 674.236 118.506L1032.02 198.855C1052.72 203.552 1074.42 207.6 1094.86 212.553C1086.19 214.072 1075.33 217.458 1066.87 220.121C1037.65 229.314 1007.69 237.298 978.575 246.67C975.46 247.822 967.588 244.868 963.832 244.007C919.197 233.783 874.677 223.11 830.203 212.212L620.593 161.84L486.932 129.495C472.482 126.135 458.327 122.4 443.789 119.363C482.366 111.803 520.981 102.191 559.563 94.147Z"/><path fill="#cd853f" transform="matrix(0.0937729 0 0 0.09375 3.05176e-05 0)" d="M663.851 71.5367C665.361 71.3618 679.991 73.6973 682.831 74.1066L737.389 81.9234C870.666 100.961 1003 122.298 1134.39 151.955C1166.22 159.141 1198.22 165.349 1230.05 172.81L1135.38 200.78C1109.48 208.026 1113.44 210.356 1086.54 204.395L1054.04 197.176L929.57 168.933L577.539 90.2681C586.12 88.0049 598.001 85.7609 606.831 83.8393L663.851 71.5367Z"/><path fill="#cd853f" transform="matrix(0.0937729 0 0 0.09375 3.05176e-05 0)" d="M52.4513 194.985L436.98 287.312L600.468 326.447C638.618 335.571 678.926 345.626 717.219 353.656C717.103 366.111 717.561 379.259 717.876 391.766C706.809 388.47 691.336 385.371 679.717 382.553L609.544 365.177L396.545 311.727L183.856 257.687C140.964 246.728 95.9731 233.944 52.5878 225.461L52.4513 194.985Z"/><path fill="#cd853f" transform="matrix(0.0937729 0 0 0.09375 3.05176e-05 0)" d="M1310.72 180.02L1312.21 180.469C1313.6 183.901 1312.7 204.674 1312.59 209.673L972.38 314.284L809.82 364.294C783.127 372.669 754.979 381.051 728.641 390.189L727.572 390.487L726.69 389.944C725.828 385.97 726.31 359.443 726.343 353.678C780.964 338.681 833.379 322.736 887.61 306.745L1135.88 232.703L1254.47 197.077C1273.01 191.51 1292.19 185.212 1310.72 180.02Z"/><path fill="#cd853f" transform="matrix(0.0937729 0 0 0.09375 3.05176e-05 0)" d="M620.114 722.96C621.643 722.623 620.891 722.602 622.444 723.12C622.867 725.606 622.77 728.103 622.741 730.616C622.549 747.337 622.764 764.048 622.959 780.768C574.546 786.74 534.079 802.224 492.118 826.937C470.122 839.891 454.766 850.731 430.89 861.276C391.069 878.863 355.524 885.432 312.749 890.15C311.688 890.079 311.162 889.92 310.105 889.696C308.486 886.724 309.07 870.789 309.026 866.203C324.133 863.927 337.868 861.939 352.201 856.167C380.696 844.692 405.167 824.332 429.815 806.373C466.157 779.894 502.481 755.26 544.832 739.046C570.655 729.159 593.12 726.328 620.114 722.96Z"/><path fill="#cd853f" transform="matrix(0.0937729 0 0 0.09375 3.05176e-05 0)" d="M755.632 719.582C759.625 719.872 768.079 724.301 771.796 726.34C819.586 752.549 842.732 804.289 872.235 847.142C890.079 873.06 910.745 897.364 935.687 916.069C947.219 924.716 960.753 930.875 973.602 936.757C959.182 938.338 932.528 943.624 918.021 946.509L912.07 947.576C834.474 912.334 812.96 855.779 766.927 789.626C750.539 766.074 724.326 742.584 700.665 726.352C718.289 725.658 738.197 722.499 755.632 719.582Z"/><path fill="#cd853f" transform="matrix(0.0937729 0 0 0.09375 3.05176e-05 0)" d="M821.485 710.951C852.221 708.347 884.956 714.537 913.942 725.293C972.374 746.977 1021.52 805.461 1087.66 797.013C1087.77 802.462 1087.59 807.786 1087.45 813.229C1076.76 817.434 1064.81 820.253 1053.41 821.475C1042.39 823.549 1026.8 822.585 1015.73 821.763C980.762 819.165 951.792 807.816 920.817 791.886C894.666 778.436 866.437 771.502 836.685 771.166C825.545 759.691 814.844 746.427 802.755 735.623C797.587 731.005 791.851 727.062 786.278 722.925L789.31 713.634C798.939 711.881 811.533 711.47 821.485 710.951Z"/><path fill="#cd853f" transform="matrix(0.0937729 0 0 0.09375 3.05176e-05 0)" d="M95.0261 182.731C116.32 188.557 143.894 194.249 165.886 199.507L336.593 239.863C463.935 270.042 589.06 301.282 717.095 328.91C716.776 335.187 716.731 340.867 716.734 347.147L693.992 341.791L236.058 231.946L124.738 205.043C108.661 201.222 80.3098 195.452 65.5004 190.665C75.2858 188.495 85.3474 185.473 95.0261 182.731Z"/><path fill="#cd853f" transform="matrix(0.0937729 0 0 0.09375 3.05176e-05 0)" d="M1242.09 176.022C1246.73 175.263 1270.04 181.6 1275.54 183.259C1254.38 190.189 1230.21 196.641 1208.62 203.142L1064.07 246.452L750.487 339.919L725.918 347.386C725.795 341.295 725.242 334.403 724.878 328.261C746.736 321.377 770.936 314.995 793.127 308.485L933.459 267.212L1242.09 176.022Z"/><path fill="#cd853f" transform="matrix(0.0937729 0 0 0.09375 3.05176e-05 0)" d="M695.761 732.899C698.958 734.483 712.611 744.804 715.668 747.23C729.167 757.941 744.621 772.529 755.221 786.186C787.884 828.27 809.688 877.966 848.808 915.216C866.973 932.513 884.689 942.08 906.427 953.803L906.598 978.022C900.462 975.576 890.438 969.456 884.299 966.347C846.518 947.216 820.24 921.727 795.688 887.524C783.05 869.918 767.037 848.738 751.184 833.937C734.45 818.313 717.172 808.794 696.339 799.489C696.318 777.179 696.242 755.209 695.761 732.899Z"/><path fill="#cd853f" transform="matrix(0.0937729 0 0 0.09375 3.05176e-05 0)" d="M721.095 444.994C721.74 445.951 722.488 454.614 722.652 456.155C726.459 492.003 735.831 527.197 736.827 563.335C737.231 577.963 735.255 592.56 733.562 607.055C722.914 610.092 708.005 611.509 697.122 612.546L680.464 612.967C680.5 557.644 681.317 502.652 682.432 447.351C696.986 447.433 706.687 446.824 721.095 444.994Z"/><path fill="#cd853f" transform="matrix(0.0937729 0 0 0.09375 3.05176e-05 0)" d="M588.97 703.586C592.193 702.961 593.261 703.162 596.019 704.836C602.414 708.718 608.959 712.255 615.652 715.589C587.132 719.987 564.868 722.86 537.899 733.847C487.857 754.234 447.162 785.188 403.854 816.655C374.626 837.891 351.185 853.806 314.422 857.743L307.052 858.553C302.182 853.699 294.161 848.511 288.373 843.907C329.143 834.493 345.626 825.568 379.086 800.995C405.009 781.956 434.016 759.932 461.361 743.611C498.258 721.589 546.592 708.861 588.97 703.586Z"/><path fill="#cd853f" transform="matrix(0.0937729 0 0 0.09375 3.05176e-05 0)" d="M656.567 55.6023L657.409 56.0937C658.357 58.7556 658.624 62.7661 658.951 65.7059C648.279 68.4296 634.069 70.7138 622.84 73.1663L548.785 89.7786L421.401 116.86C365.061 129.132 307.868 142.451 251.912 156.318L189.659 172.309C176.034 175.866 154.816 180.662 142.643 186.858C135.351 185.074 127.925 183.428 120.601 181.743L109.615 178.989C138.051 170.406 167.393 163.831 196.055 156.061C269.859 136.053 343.689 119.588 418.358 103.459L572.15 71.6785C600.203 66.1278 628.345 60.0544 656.567 55.6023Z"/><path fill="#cd853f" transform="matrix(0.0937729 0 0 0.09375 3.05176e-05 0)" d="M641.252 442.601C651.714 444.866 665.945 446.234 676.615 446.787C674.816 501.128 674.068 558.424 674.324 612.834C668.364 612.485 664.376 612.049 658.469 611.15C649.594 610.454 637.87 606.792 629.491 604.056C614.818 567.2 630.007 517.652 637.813 480.931C640.232 469.556 641.017 454.215 641.252 442.601Z"/><path fill="#cd853f" transform="matrix(0.0937729 0 0 0.09375 3.05176e-05 0)" d="M779.771 683.251L780.189 683.675C782.095 688.866 779.558 711.114 778.917 718.025C773.337 715.781 763.388 710.909 757.152 709.766C754.879 709.349 750.562 710.192 748.108 710.627C728.234 714.151 708.361 716.06 688.207 717.135C687.095 728.218 687.256 743.7 687.278 754.971L687.426 804.224C674.376 804.095 628.242 800.449 618.913 792.637L619.421 791.906C623.154 791.049 628.538 791.264 632.492 791.258L632.413 764.037L632.055 714.12C616.543 703.199 603.123 701.101 591.994 688.284L592.961 686.224L591.622 687.785L592.656 686.119C598.33 688.363 604.868 693.598 610.447 695.701C653.524 711.939 743.875 715.997 779.771 683.251Z"/><path fill="#cd853f" transform="matrix(0.0937729 0 0 0.09375 3.05176e-05 0)" d="M664.251 55.7541C678.423 56.86 695.972 59.9207 710.308 62.0055L786.469 72.8571C956.427 96.3677 1125.44 129.586 1291.79 171.529C1294.06 172.1 1299.71 173.229 1301.11 174.721L1299.5 175.508C1294.67 177.05 1289.66 178.259 1284.75 179.518C1239.2 166.941 1193.07 157.955 1146.99 147.874C1077.42 132.657 1006.92 117.785 936.707 105.858C880.631 96.3334 823.473 88.363 767.235 79.4483C733.541 74.1072 699.31 70.5312 665.388 65.1981L664.251 55.7541Z"/><path fill="#cd853f" transform="matrix(0.0937729 0 0 0.09375 3.05176e-05 0)" d="M741.293 440.823L742.032 441.489C743.797 453.106 745.759 463.677 748.938 475.167C759.976 515.06 783.511 554.87 759.018 595.046C757.125 598.151 753.202 599.511 749.999 600.849L739.398 605.053C747.375 570.283 741.722 537.06 736.002 502.546C732.709 482.673 729.837 463.831 727.609 443.81C732.443 442.945 736.55 441.983 741.293 440.823Z"/><path fill="#cd853f" transform="matrix(0.0937729 0 0 0.09375 3.05176e-05 0)" d="M740.782 627.401L742.483 627.433C743.589 628.955 743.434 634.97 743.514 637.103C744.102 652.789 740.595 665.161 732.34 678.439C714.667 682.864 699.742 683.749 681.667 683.92C681.008 683.885 680.289 683.622 679.619 683.435C677.903 679.541 678.966 642.68 679.046 635.734C701.614 635.101 719.044 633.384 740.782 627.401Z"/><path fill="#cd853f" transform="matrix(0.0937729 0 0 0.09375 3.05176e-05 0)" d="M616.749 624.704C634.624 630.932 653.104 633.848 671.905 635.496C671.874 642.688 673.212 680.551 671.078 683.5C652.601 680.996 644.274 679.981 626.619 673.917C624.77 670.297 622.135 666.382 620.119 662.516C613.933 650.652 614.449 637.569 616.749 624.704Z"/><path fill="#cd853f" transform="matrix(0.0937729 0 0 0.09375 3.05176e-05 0)" d="M623.958 437.215C627.785 438.603 631.93 439.914 635.811 441.219C634.967 495.424 605.538 545.766 622.048 601.195C620.497 600.763 618.368 599.559 616.879 598.795C590.594 580.935 596.423 537.379 607.437 512.274C620.805 481.804 623.782 469.698 623.958 437.215Z"/><path fill="#cd853f" transform="matrix(0.0937729 0 0 0.09375 3.05176e-05 0)" d="M771.255 666.621C774.318 668.48 775.015 669.241 777.545 671.722C758.119 712.073 629.311 705.553 597.329 681.511C590.028 673.756 594.335 671.366 601.551 667.225C617.676 686.827 679.013 692.009 703.192 689.554C723.014 687.542 757.739 682.458 771.255 666.621Z"/><path fill="#cd853f" transform="matrix(0.0937729 0 0 0.09375 3.05176e-05 0)" d="M768.644 596.376C770.632 596.972 771.032 598.024 771.772 599.683C771.556 603.803 768.539 607.312 765.202 609.468C726.979 634.172 636.377 636.608 600.992 607.958C598.683 604.721 596.916 601.74 599.454 597.963C603.874 596.325 605.189 600.445 608.42 602.563C643.104 625.302 739.083 626.124 768.644 596.376Z"/><path fill="#cd853f" transform="matrix(0.0937729 0 0 0.09375 3.05176e-05 0)" d="M976.922 944.167C978.571 943.955 978.602 943.792 980.078 944.455C982.004 947.947 981.067 962.735 981.002 967.555L919.234 978.759C917.852 979.071 917.917 979.012 916.51 978.736C914.399 974.99 915.197 959.904 915.249 954.984C933.902 952.829 958.336 947.841 976.922 944.167Z"/><path fill="#cd853f" transform="matrix(0.0937729 0 0 0.09375 3.05176e-05 0)" d="M614.17 407.026C615.452 407.807 619.189 411.832 620.817 412.992C623.518 414.918 628.808 417.37 632.018 418.571C665.01 430.299 704.507 429.811 737.862 419.912C747.567 417.032 748.197 412.212 752.712 410.336L754.126 411.177C755.726 414.35 755.053 417.322 754.164 420.527C732.62 444.282 651.417 440.182 624.027 426.407C615.395 422.066 609.366 416.936 614.17 407.026Z"/><path fill="#cd853f" transform="matrix(0.0937729 0 0 0.09375 3.05176e-05 0)" d="M774.412 609.189C781.051 615.742 773.659 642.773 770.556 650.932C764.339 667.277 758.257 668.853 743.354 675.297C742.389 674.107 744.728 668.486 745.413 666.631C750.508 652.823 750.557 639.171 748.648 624.721C758.268 621.135 767.664 617.17 774.412 609.189Z"/><path fill="#cd853f" transform="matrix(0.0937729 0 0 0.09375 3.05176e-05 0)" d="M641.258 383.544C653.465 386.229 664.999 388.938 677.105 392.038C677.243 401.961 677.199 411.457 677.055 421.365C665.818 420.931 651.853 417.985 640.94 415.364L641.258 383.544Z"/><path fill="#cd853f" transform="matrix(0.0937729 0 0 0.09375 3.05176e-05 0)" d="M596.678 795.928C608.545 796.203 625.876 804.348 638.695 806.761C655.572 809.937 672.5 811.399 689.66 811.139C696.737 811.032 711.109 816.536 715.42 821.118C687.452 824.996 615.436 820.02 596.678 795.928Z"/><path fill="#cd853f" transform="matrix(0.0937729 0 0 0.09375 3.05176e-05 0)" d="M580.188 675.508L581.46 675.494C583.776 678.273 579.785 685.082 585.455 694.253C577.261 696.485 561.604 698.03 551.751 700.191C523.131 706.471 501.262 713.801 474.825 725.257C473.354 726.018 472.844 726.487 471.227 726.194C469.77 723.937 470.91 718.362 471.224 715.376C492.853 715.385 519.52 707.057 538.103 696.08C552.368 687.655 563.264 678.408 580.188 675.508Z"/><path fill="#cd853f" transform="matrix(0.0937729 0 0 0.09375 3.05176e-05 0)" d="M683.607 393.549L719.562 400.983C719.59 405.052 720.527 413.769 719.288 417.675C719.028 418.492 718.198 418.433 717.016 418.771C704.695 420.821 696.355 421.265 683.742 421.799C683.389 412.768 683.05 402.52 683.607 393.549Z"/><path fill="#cd853f" transform="matrix(0.0937729 0 0 0.09375 3.05176e-05 0)" d="M801.597 690.948C829.327 688.55 865.078 696.285 890.612 707.203C886.863 706.625 882.157 705.512 878.369 704.73C845.464 699.93 823.801 700.398 790.465 703.779C790.687 699.892 790.686 695.733 790.748 691.815L801.597 690.948Z"/><path fill="#cd853f" transform="matrix(0.0937729 0 0 0.09375 3.05176e-05 0)" d="M593.423 609.771C594.502 610.503 597.482 613.409 599.077 614.602C603.189 617.681 606.383 619.284 610.893 621.565L610.763 622.069C606.498 639.309 608.892 654.749 617.826 669.801C615.262 669.181 613.141 667.974 610.769 666.802C599.251 648.997 586.795 632.152 593.423 609.771Z"/><path fill="#cd853f" transform="matrix(0.0937729 0 0 0.09375 3.05176e-05 0)" d="M1070.51 779.664C1075.74 780.699 1085.68 785.983 1090.57 788.493C1077.83 790.82 1069.98 790.063 1057.59 787.916C1050.56 786.337 1041.41 784.569 1035.15 781.26C1046.42 781.142 1059.43 781.246 1070.51 779.664Z"/><path fill="#cd853f" transform="matrix(0.0937729 0 0 0.09375 3.05176e-05 0)" d="M282.9 852.231C286.022 853.329 296.217 861.873 299.229 864.317L299.261 884.393C295.513 882.17 286.596 873.322 283.246 870.092C283.284 864.045 283.102 858.268 282.9 852.231Z"/><path fill="#cd853f" transform="matrix(0.0937729 0 0 0.09375 3.05176e-05 0)" d="M624.936 379.015L635.404 381.942C634.891 390.625 635.121 405.552 634.018 413.256C630.293 411.756 626.404 409.313 623.34 406.708C625.179 395.523 625.184 390.478 624.936 379.015Z"/><path fill="#cd853f" transform="matrix(0.0937729 0 0 0.09375 3.05176e-05 0)" d="M743.298 395.403C743.563 395.671 744.025 396.335 744.073 396.699C746.048 411.811 739.731 412.997 727.737 416.59L726.893 416.151C726.136 412.914 726.461 404.344 726.489 400.614C732.119 399.14 737.756 397.208 743.298 395.403Z"/></svg>',onClick:Fe,active:!0,disabled:!1,color:"#3E2723",textColor:"#F5DEB3",backgroundStyle:"radial-gradient(ellipse at center, #4A2F2A 0%, #3E2723 30%, #2E1A16 70%, #1A0F0D 100%)"};if(!m.content)return{disabled:!0};if(m.content.isBackButton)return{icon:"←",onClick:ct,active:!0};if(m.content.isLayoutToggle)return{icon:m.content.icon||"",onClick:Ge,secondaryaction:()=>{W()&&typeof W().displayLanguageSelector=="function"&&(nt.set("agent"),W().displayLanguageSelector())},active:!0,showShape:m.content.showShape};if(m.content.isUserButton){const pe=u().currentUser;return pe?{label:w(pe.full_name),data:{isUserButton:!0,authenticated:!0},onClick:We,active:!0,color:"#28a745",textColor:"white",customStyle:"font-family: Arial, sans-serif; font-size: 14px; font-weight: bold; line-height: 1.1; white-space: pre-line; text-align: center;"}:{label:"Login",data:{isUserButton:!0,authenticated:!1},onClick:()=>Re.activate("agent",null,null,"numeric"),active:!0,color:"#6c757d",textColor:"#666",customStyle:"font-family: Arial, sans-serif; font-size: 14px; font-weight: bold; line-height: 1.1; white-space: pre-line; text-align: center;"}}if(m.content.isSmartNavigation){let pe="#2c2c2e";if(z)switch(z){case"error":pe="#d32f2f";break;case"warning":pe="#ffc107";break;case"success":pe="#28a745";break;default:z?.startsWith("print")&&(pe="#6366f1");break}return P()?{icon:`<svg width="50" height="50" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
          <rect x="3" y="3" width="12" height="10" rx="1" stroke="#404040" stroke-width="1.5" fill="none"/>
          <rect x="9" y="11" width="12" height="10" rx="1" stroke="#404040" stroke-width="1.5" fill="none"/>
          <line x1="3" y1="7" x2="15" y2="7" stroke="#404040" stroke-width="1.5"/>
          <line x1="9" y1="15" x2="21" y2="15" stroke="#404040" stroke-width="1.5"/>
        </svg>`,onClick:ne(),active:!0,showShape:"",color:pe,notificationStyle:z}:{icon:"",onClick:ne(),active:!0,showShape:"double-arrow-down",color:pe,notificationStyle:z}}if(m.content.isTimeButton){const pe=Tt(l()),Oe=l().getDate().toString().padStart(2,"0"),Ye=(l().getMonth()+1).toString().padStart(2,"0"),Fn=`${Oe}.${Ye}`;return{icon:`<svg width="50" height="50" viewBox="0 0 50 50" xmlns="http://www.w3.org/2000/svg">
          <!-- Background gear icon - bigger and properly centered -->
          <g transform="translate(25,25) scale(2.2)" opacity="0.3">
            <path d="M0,7.5A1.5,1.5 0 0,1 -1.5,6A1.5,1.5 0 0,1 0,4.5A1.5,1.5 0 0,1 1.5,6A1.5,1.5 0 0,1 0,7.5M7.43,0.97C7.47,-0.35 7.5,-0.67 7.5,-1C7.5,-1.33 7.47,-1.66 7.43,-2L9.54,-3.63C9.73,-3.78 9.78,-4.05 9.66,-4.27L7.66,-7.73C7.54,-7.95 7.27,-8.04 7.05,-7.95L4.56,-6.95C4.04,-7.34 3.5,-7.68 2.87,-7.93L2.5,-10.58C2.46,-10.82 2.25,-11 2,-11H-2C-2.25,-11 -2.46,-10.82 -2.5,-10.58L-2.87,-7.93C-3.5,-7.68 -4.04,-7.34 -4.56,-6.95L-7.05,-7.95C-7.27,-8.04 -7.54,-7.95 -7.66,-7.73L-9.66,-4.27C-9.78,-4.05 -9.73,-3.78 -9.54,-3.63L-7.43,-2C-7.47,-1.66 -7.5,-1.33 -7.5,-1C-7.5,-0.67 -7.47,-0.35 -7.43,0.97L-9.54,2.63C-9.73,2.78 -9.78,3.05 -9.66,3.27L-7.66,6.73C-7.54,6.95 -7.27,7.03 -7.05,6.95L-4.56,5.94C-4.04,6.34 -3.5,6.68 -2.87,6.93L-2.5,9.58C-2.46,9.82 -2.25,10 -2,10H2C2.25,10 2.46,9.82 2.5,9.58L2.87,6.93C3.5,6.68 4.04,6.34 4.56,5.94L7.05,6.95C7.27,7.03 7.54,6.95 7.66,6.73L9.66,3.27C9.78,3.05 9.73,2.78 9.54,2.63L7.43,0.97Z" fill="#999"/>
          </g>
          <!-- Time text on top line -->
          <text x="25" y="20" font-family="Arial, sans-serif" font-size="11" font-weight="700" text-anchor="middle" dominant-baseline="middle" fill="#666">${pe}</text>
          <!-- Date text on bottom line -->
          <text x="25" y="32" font-family="Arial, sans-serif" font-size="9" font-weight="600" text-anchor="middle" dominant-baseline="middle" fill="#777">${Fn}</text>
        </svg>`,onClick:Ie,active:!0,color:"#2c2c2e"}}if(m.content.isBetrugerCap)return{isBetrugerCap:!0,label:m.content.label,color:m.content.color,onClick:et,active:!0};if(m.content.isKeyboardToggle)return{isKeyboardToggle:!0,label:m.content.label,icon:m.content.icon,color:m.content.color,textColor:m.content.textColor,onClick:Ct,active:!0};if(m.content.isPaymentButton){const pe=s().total>0&&s().status==="active";return{label:m.content.label,onClick:pe?()=>Cn(m.content.paymentType):void 0,active:pe,disabled:!pe,paymentButton:!0,color:pe?m.content.color:"#666",icon:m.content.icon,textColor:pe?m.content.textColor:void 0,backgroundStyle:pe?m.content.backgroundStyle:void 0}}const k=t(_)==="categories",F=k?B(m.content.category_names).de||"Unnamed":B(m.content.display_names).button.de||"Unnamed Product",G=k?wt:dt;let R;!k&&m.content?.additional_item_attributes?.ui_suggestions?.background_color_hex?(R=m.content.additional_item_attributes.ui_suggestions.background_color_hex,console.log("🎨 [Frontend] Using AI color for product:",F,"color:",R)):k||(R="#666666",console.log("🎨 [Frontend] Using default color for product:",F,"additional_item_attributes:",m.content?.additional_item_attributes));const $={label:F,data:m.content,onClick:G,active:!0};return k?($.color="#3A2F20",$.backgroundStyle="radial-gradient(ellipse at center, #645540 0%, #5A4B35 30%, #4A3B28 70%, #3A2F20 100%)",$.textColor="#DDDDD0",console.log("🎨 [Category] Setting gradient for:",F,"backgroundStyle:",$.backgroundStyle)):R&&($.color=R),$}qe(()=>r(),()=>{g(c,r().MIN_BUTTON_WIDTH)}),qe(()=>t(A),()=>{t(A)&&Se()}),qe(()=>(t(T),s()),()=>{t(T).length>0&&s()&&g(T,[...t(T)])}),qe(()=>(t(T),t(_),t(C),t(p)),()=>{t(T).length>0&&(t(_)==="categories"&&t(C).length>=0||t(_)==="products"&&t(p).length>=0)&&ye()}),qe(()=>(t(T),t(A),t(ve),t(ge)),()=>{const m=[],k=new Map;t(T).forEach(G=>{k.has(G.rowIndex)||k.set(G.rowIndex,[]),k.get(G.rowIndex).push(G)});const F=t(A)==="4-4-4"?t(ve):t(ge);for(let G=0;G<F;G++)k.has(G)&&m.push(k.get(G).sort((R,$)=>R.columnIndex-$.columnIndex));g(Je,m)}),hn(),At();var ln=E1(),yn=f(ln);{var ca=m=>{var k=x1();let F;var G=f(k);let R;var $=f(G);{let pe=pt(()=>t(c)/4*3);Gl($,{onClose:()=>Re.deactivate(),get minButtonSize(){return t(pe)}})}ce((pe,Oe)=>{F=tt(k,1,"pinpad-overlay svelte-48cijx",null,F,pe),R=tt(G,1,"pinpad-container svelte-48cijx",null,R,Oe)},[()=>({numeric:o().layout==="numeric",alpha:o().layout==="alpha"}),()=>({numeric:o().layout==="numeric",alpha:o().layout==="alpha"})]),M(m,k)};X(yn,m=>{o(),x(()=>o().isActive)&&m(ca)})}var On=b(yn,2);c1(On,{get item(){return t(H)},get x(){return t(v)},get y(){return t(D)},get visible(){return t(q)},$$events:{close:Ke,edit:Gt,"advanced-edit":Nt}});var Pn=b(On,2);g1(Pn,{get visible(){return t(L)},get product(){return t(y)},$$events:{save:sn,close:Rt}});var Nn=b(Pn,2);C1(Nn,{get visible(){return t(d)},get category(){return t(I)},$$events:{save:Wt,close:on}});var Kt=b(Nn,2),ft=f(Kt);{var bn=m=>{var k=S1(),F=f(k);ce(()=>ie(F,t(S))),M(m,k)},ar=m=>{var k=M1();let F;var G=f(k);{var R=pe=>{var Oe=k1();M(pe,Oe)};X(G,pe=>{t(_),t(p),x(()=>t(_)==="products"&&t(p).length===0)&&pe(R)})}var $=b(G,2);Dt($,1,()=>t(Je),xa,(pe,Oe)=>{var Ye=L1();let Fn;Dt(Ye,5,()=>t(Oe),wn=>`${t(_)}-${wn.id}-${t(A)}-${t(oe)||t(se)}-${t(re)||t(ue)}`,(wn,Xe)=>{const O=pt(()=>(t(Xe),x(()=>Rn(t(Xe)))));var vt=Be(),St=we(vt);{var ua=De=>{{let cn=pt(()=>xt(t(Xe)));Jt(De,fn(()=>t(cn),{get label(){return V(t(O)),x(()=>t(O).label)},get active(){return V(t(O)),x(()=>t(O).active)},get disabled(){return V(t(O)),x(()=>t(O).disabled)},get color(){return V(t(O)),x(()=>t(O).color)},get icon(){return V(t(O)),x(()=>t(O).icon)},get textColor(){return V(t(O)),x(()=>t(O).textColor)},get backgroundStyle(){return V(t(O)),x(()=>t(O).backgroundStyle)},$$events:{click(...Ot){t(O).onClick?.apply(this,Ot)}}}))}},xn=De=>{var cn=Be(),Ot=we(cn);{var Qe=jn=>{{let Ea=pt(()=>xt(t(Xe)));Jt(jn,fn(()=>t(Ea),{get label(){return V(t(O)),x(()=>t(O).label)},get color(){return V(t(O)),x(()=>t(O).color)},get active(){return V(t(O)),x(()=>t(O).active)},$$events:{click(...da){t(O).onClick?.apply(this,da)}},children:(da,Fr)=>{y1(da)},$$slots:{default:!0}}))}},kt=jn=>{var Ea=Be(),da=we(Ea);{var Fr=Un=>{{let Aa=pt(()=>xt(t(Xe)));Jt(Un,fn(()=>t(Aa),{get label(){return V(t(O)),x(()=>t(O).label)},get icon(){return V(t(O)),x(()=>t(O).icon)},get color(){return V(t(O)),x(()=>t(O).color)},get textColor(){return V(t(O)),x(()=>t(O).textColor)},get active(){return V(t(O)),x(()=>t(O).active)},$$events:{click(...rr){t(O).onClick?.apply(this,rr)}}}))}},Xs=Un=>{var Aa=Be(),rr=we(Aa);{var Qs=zn=>{{let Ta=pt(()=>xt(t(Xe)));Jt(zn,fn(()=>t(Ta),{get active(){return V(t(O)),x(()=>t(O).active)},$$events:{click(...fa){t(O).onClick?.apply(this,fa)}},children:(fa,jr)=>{var Ia=Be(),un=we(Ia);bo(un,()=>t(O).component,(Zn,va)=>{va(Zn,{})}),M(fa,Ia)},$$slots:{default:!0}}))}},ei=zn=>{var Ta=Be(),fa=we(Ta);{var jr=un=>{{let Zn=pt(()=>xt(t(Xe)));Jt(un,fn(()=>t(Zn),{get label(){return V(t(O)),x(()=>t(O).label)},get active(){return V(t(O)),x(()=>t(O).active)},get disabled(){return V(t(O)),x(()=>t(O).disabled)},get color(){return V(t(O)),x(()=>t(O).color)},get textColor(){return V(t(O)),x(()=>t(O).textColor)},get backgroundStyle(){return V(t(O)),x(()=>t(O).backgroundStyle)},$$events:{click(...va){t(O).onClick?.apply(this,va)}}}))}},Ia=un=>{var Zn=Be(),va=we(Zn);{var ti=Vn=>{{let Ba=pt(()=>xt(t(Xe)));Jt(Vn,fn(()=>t(Ba),{disabled:!0}))}},ni=Vn=>{var Ba=Be(),ai=we(Ba);{var ri=qn=>{{let Da=pt(()=>xt(t(Xe)));Jt(qn,fn(()=>t(Da),{get icon(){return V(t(O)),x(()=>t(O).icon)},get active(){return V(t(O)),x(()=>t(O).active)},get showShape(){return V(t(O)),x(()=>t(O).showShape)},get color(){return V(t(O)),x(()=>t(O).color)},get textColor(){return V(t(O)),x(()=>t(O).textColor)},get backgroundStyle(){return V(t(O)),x(()=>t(O).backgroundStyle)},get notificationStyle(){return V(t(O)),x(()=>t(O).notificationStyle)},$$events:{click(...sr){t(O).onClick?.apply(this,sr)}}}))}},si=qn=>{var Da=Be(),sr=we(Da);{var ii=ir=>{{let oi=pt(()=>xt(t(Xe)));Jt(ir,fn(()=>t(oi),{get label(){return V(t(O)),x(()=>t(O).label)},get data(){return V(t(O)),x(()=>t(O).data)},get active(){return V(t(O)),x(()=>t(O).active)},get color(){return V(t(O)),x(()=>t(O).color)},get backgroundStyle(){return V(t(O)),x(()=>t(O).backgroundStyle)},get textColor(){return V(t(O)),x(()=>t(O).textColor)},$$events:{click(...li){t(O).onClick?.apply(this,li)},secondaryaction:rt}}))}};X(sr,ir=>{V(t(O)),x(()=>t(O).label)&&ir(ii)},!0)}M(qn,Da)};X(ai,qn=>{V(t(O)),x(()=>t(O).icon!==void 0||t(O).showShape)?qn(ri):qn(si,!1)},!0)}M(Vn,Ba)};X(va,Vn=>{V(t(O)),x(()=>t(O).disabled)?Vn(ti):Vn(ni,!1)},!0)}M(un,Zn)};X(fa,un=>{V(t(O)),x(()=>t(O).label&&!t(O).data)?un(jr):un(Ia,!1)},!0)}M(zn,Ta)};X(rr,zn=>{V(t(O)),x(()=>t(O).component)?zn(Qs):zn(ei,!1)},!0)}M(Un,Aa)};X(da,Un=>{V(t(O)),x(()=>t(O).isKeyboardToggle)?Un(Fr):Un(Xs,!1)},!0)}M(jn,Ea)};X(Ot,jn=>{V(t(O)),x(()=>t(O).isBetrugerCap)?jn(Qe):jn(kt,!1)},!0)}M(De,cn)};X(St,De=>{V(t(O)),x(()=>t(O).paymentButton)?De(ua):De(xn,!1)})}M(wn,vt)}),ce(wn=>Fn=tt(Ye,1,"button-row svelte-48cijx",null,Fn,wn),[()=>({"hex-row":t(A)==="6-6-6","rect-row":t(A)==="4-4-4"})]),M(pe,Ye)}),ce(pe=>{F=tt(k,1,"grid-container-unified svelte-48cijx",null,F,pe),sa(k,`
             --optimal-hex-height: ${t(re)??""}px; 
             --hex-vertical-padding: 6px;
             --rect-vertical-padding: 6px;
           `)},[()=>({hex:t(A)==="6-6-6",rect:t(A)==="4-4-4"})]),M(m,k)};X(ft,m=>{t(S)?m(bn):m(ar,!1)})}mn(ln,m=>g(ze,m),()=>t(ze)),M(e,ln),yt(),i()}var T1=U('<input type="file" accept=".pdf,.jpg,.jpeg,.png" multiple style="display: none;" class="svelte-1wvon5f"/>'),I1=U('<div class="importing-indicator svelte-1wvon5f"><div class="spinner svelte-1wvon5f"></div> <p class="svelte-1wvon5f">Importing menu...</p></div>'),B1=U('<div class="loading-files svelte-1wvon5f"><div class="spinner svelte-1wvon5f"></div> <p class="svelte-1wvon5f">Loading available files...</p></div>'),D1=U('<div class="error-message svelte-1wvon5f"><p class="svelte-1wvon5f"> </p> <button class="retry-btn svelte-1wvon5f">Retry</button></div>'),$1=U('<div class="upload-area svelte-1wvon5f"><div class="upload-prompt svelte-1wvon5f"><p class="svelte-1wvon5f">No files selected yet.</p> <button class="upload-btn svelte-1wvon5f"><svg class="upload-icon svelte-1wvon5f" width="24" height="24" viewBox="0 0 24 24" fill="currentColor"><path d="M14,2H6A2,2 0 0,0 4,4V20A2,2 0 0,0 6,22H18A2,2 0 0,0 20,20V8L14,2M18,20H6V4H13V9H18V20Z" class="svelte-1wvon5f"></path></svg> Choose Files</button> <p class="upload-hint svelte-1wvon5f">Select multiple PDF, JPG, or PNG files</p></div></div>'),R1=U('<div class="no-files svelte-1wvon5f"><p class="svelte-1wvon5f">No menu files found in the menu_inputs directory.</p> <p class="svelte-1wvon5f">Please add PDF, JPG, or PNG files to the menu_inputs folder.</p></div>'),O1=U('<span class="svelte-1wvon5f"> </span>'),P1=U('<span class="svelte-1wvon5f"> </span>'),N1=U('<button class="control-btn svelte-1wvon5f">Add More Files</button>'),F1=U('<div class="size-warning svelte-1wvon5f"></div>'),j1=U('<div><label class="file-checkbox svelte-1wvon5f"><input type="checkbox" class="svelte-1wvon5f"/> <div class="file-info svelte-1wvon5f"><div class="file-name svelte-1wvon5f"> </div> <div class="file-details svelte-1wvon5f"><span class="file-type svelte-1wvon5f"> </span> <span class="file-date svelte-1wvon5f"> </span></div> <!></div></label></div>'),U1=U('<span class="upload-status uploaded svelte-1wvon5f">✓ Uploaded</span>'),z1=U('<span class="upload-status pending svelte-1wvon5f">Pending upload</span>'),Z1=U('<div><label class="file-checkbox svelte-1wvon5f"><input type="checkbox" class="svelte-1wvon5f"/> <div class="file-info svelte-1wvon5f"><div class="file-name svelte-1wvon5f"> </div> <div class="file-details svelte-1wvon5f"><span class="file-type svelte-1wvon5f"> </span> <!></div></div></label> <button class="remove-btn svelte-1wvon5f" title="Remove file"><svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor" class="svelte-1wvon5f"><path d="M19,6.41L17.59,5L12,10.59L6.41,5L5,6.41L10.59,12L5,17.59L6.41,19L12,13.41L17.59,19L19,17.59L13.41,12L19,6.41Z" class="svelte-1wvon5f"></path></svg></button></div>'),V1=U('<div class="file-controls svelte-1wvon5f"><div class="selection-info svelte-1wvon5f"><!></div> <div class="control-buttons svelte-1wvon5f"><!> <button class="control-btn svelte-1wvon5f">Select All Valid</button> <button class="control-btn svelte-1wvon5f">Clear Selection</button></div></div> <div class="file-list svelte-1wvon5f"><!></div> <div class="import-controls svelte-1wvon5f"><button class="import-btn svelte-1wvon5f"> </button></div>',1),q1=U('<div class="file-selector svelte-1wvon5f"><!></div>'),H1=U('<div class="menu-importer svelte-1wvon5f"><h3 class="svelte-1wvon5f">Menu Import</h3> <p class="svelte-1wvon5f"><!></p> <p class="size-limit svelte-1wvon5f"></p> <!> <!></div>');function G1(e,n){_t(n,!1);const a=$n();let i=K(!1),r=K([]),s=K(new Set),o=K(!0),u=K(null),l=K([]);const c=50*1024*1024,C=typeof window<"u"&&window.electronAPI,p=!C;let S=K();nn(async()=>{C?await h():g(o,!1)});async function h(){if(C){g(o,!0),g(u,null);try{const w=await window.electronAPI.invoke("list-menu-files");w&&w.error?(g(u,w.error),g(r,[])):Array.isArray(w)?g(r,w):(g(u,"Unexpected response format"),g(r,[]))}catch(w){console.error("Error loading files:",w),g(u,w.message),g(r,[])}finally{g(o,!1)}}}async function _(w){const B=w.target.files;if(!(!B||B.length===0)){for(const Q of B){if(!["application/pdf","image/jpeg","image/png","image/jpg"].includes(Q.type)){he.addMessage({timestamp:new Date().toLocaleTimeString("en-GB",{hour:"2-digit",minute:"2-digit"}),type:"agent",message:`File "${Q.name}" has unsupported format. Please select PDF, JPG, or PNG files.`});continue}const re=c;if(Q.size>re){const ge=Math.round(re/1048576),se=Math.round(Q.size/(1024*1024)*100)/100;he.addMessage({timestamp:new Date().toLocaleTimeString("en-GB",{hour:"2-digit",minute:"2-digit"}),type:"agent",message:`File "${Q.name}" (${se}MB) exceeds maximum size of ${ge}MB .`});continue}const te={file:Q,name:Q.name,size:Math.round(Q.size/(1024*1024)*100)/100,type:Q.type.split("/")[1].toUpperCase(),selected:!0,uploaded:!1};g(l,[...t(l),te])}t(S)&&He(S,t(S).value="")}}function E(){t(S)&&t(S).click()}function A(w){g(l,t(l).filter((B,Q)=>Q!==w))}function q(w){if(C)t(s).has(w.path)?t(s).delete(w.path):t(s).add(w.path),g(s,t(s));else{const B=t(l).findIndex(Q=>Q.name===w.name);B!==-1&&(He(l,t(l)[B].selected=!t(l)[B].selected),g(l,t(l)))}}function H(){if(C){const w=t(r).filter(B=>B.sizeValid);g(s,new Set(w.map(B=>B.path)))}else g(l,t(l).map(w=>({...w,selected:!0})))}function v(){C?g(s,new Set):g(l,t(l).map(w=>({...w,selected:!1})))}function D(){return C?t(s).size:t(l).filter(w=>w.selected).length}async function L(){const w=D();if(!(t(i)||w===0))if(C){const B=Array.from(t(s));await I(B)}else{const B=t(l).filter(Q=>Q.selected);await Y(B)}}function y(w){return`${w.type} • ${w.size}MB`}function d(w){return new Date(w).toLocaleDateString("en-GB",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"})}async function I(w){if(t(i))return;g(i,!0),a("close"),nt.set("agent");const B=new Date().toLocaleTimeString("en-GB",{hour:"2-digit",minute:"2-digit"}),Q=Array.isArray(w)?w.length:1,oe=Array.isArray(w)?w.map(re=>re.split("/").pop()).join(", "):w.split("/").pop();he.addMessage({timestamp:B,type:"agent",message:`Starting menu import from ${Q} file(s): ${oe}

This process will:
1. Parse the menu(s) with AI
2. Clean existing data
3. Import new menu structure
4. Create optimized layouts

Please wait...`});try{const re=await window.electronAPI.invoke("start-menu-import",w);if(re&&!re.success&&re.message){he.addMessage({timestamp:new Date().toLocaleTimeString("en-GB",{hour:"2-digit",minute:"2-digit"}),type:"agent",message:`Import failed: ${re.message}`}),g(i,!1);return}}catch(re){console.error("Error starting import:",re),he.addMessage({timestamp:new Date().toLocaleTimeString("en-GB",{hour:"2-digit",minute:"2-digit"}),type:"agent",message:`Import failed: ${re.message}`}),g(i,!1)}}async function Y(w){if(t(i)||w.length===0)return;g(i,!0),a("close"),nt.set("agent");const B=new Date().toLocaleTimeString("en-GB",{hour:"2-digit",minute:"2-digit"}),Q=w.map(oe=>oe.name).join(", ");he.addMessage({timestamp:B,type:"agent",message:`Starting menu import from ${w.length} file(s): ${Q}

This process will:
1. Upload files to server
2. Parse the menu(s) with AI
3. Clean existing data
4. Import new menu structure
5. Create optimized layouts

Please wait...`});try{const oe=`${window.location.protocol}//${window.location.host}`;he.addMessage({timestamp:new Date().toLocaleTimeString("en-GB",{hour:"2-digit",minute:"2-digit"}),type:"agent",message:`Uploading ${w.length} files...`});const re=new FormData;w.forEach((ue,fe)=>{re.append("menuFiles",ue.file)});const te=new XMLHttpRequest,se=await new Promise((ue,fe)=>{te.upload.addEventListener("progress",ve=>{if(ve.lengthComputable){const Le=Math.round(ve.loaded/ve.total*100);he.addMessage({timestamp:new Date().toLocaleTimeString("en-GB",{hour:"2-digit",minute:"2-digit"}),type:"agent",message:`Uploading files: ${Le}%`})}}),te.onload=function(){if(te.status>=200&&te.status<300)try{const ve=JSON.parse(te.responseText);ue(ve)}catch{fe(new Error("Invalid response format"))}else try{const ve=JSON.parse(te.responseText);fe(new Error(ve.message||`HTTP ${te.status}`))}catch{fe(new Error(`HTTP ${te.status}: ${te.statusText}`))}},te.onerror=function(){fe(new Error("Network error occurred"))},te.open("POST",`${oe}/api/menu/upload-and-import`),te.send(re)});if(!se.success)throw new Error(se.message||"Upload failed");he.addMessage({timestamp:new Date().toLocaleTimeString("en-GB",{hour:"2-digit",minute:"2-digit"}),type:"agent",message:`All files uploaded successfully. Processing ${se.fileCount} files: ${se.filenames.join(", ")}`}),w.forEach(ue=>{ue.uploaded=!0}),he.addMessage({timestamp:new Date().toLocaleTimeString("en-GB",{hour:"2-digit",minute:"2-digit"}),type:"agent",message:`✅ Menu import completed successfully!

You can now navigate back to the selection area to see your new menu items.`}),ee("INFO","Refreshing categories after successful menu import"),Ce.send({command:"getCategories"})}catch(oe){console.error("Error uploading and importing files:",oe),he.addMessage({timestamp:new Date().toLocaleTimeString("en-GB",{hour:"2-digit",minute:"2-digit"}),type:"agent",message:`Import failed: ${oe.message}`})}finally{g(i,!1)}}typeof window<"u"&&window.electronAPI&&window.electronAPI.onImportProgress&&(window.electronAPI.onImportProgress(w=>{const B=new Date().toLocaleTimeString("en-GB",{hour:"2-digit",minute:"2-digit"});he.addMessage({timestamp:B,type:"agent",message:w})}),window.electronAPI.onImportComplete((w,B)=>{const Q=new Date().toLocaleTimeString("en-GB",{hour:"2-digit",minute:"2-digit"});w&&(ee("INFO","Refreshing categories after successful menu import"),Ce.send({command:"getCategories"})),he.addMessage({timestamp:Q,type:"agent",message:w?`✅ Import completed successfully!

${B}

You can now navigate back to the selection area to see your new menu items.`:`❌ Import failed: ${B}`}),g(i,!1)})),At();var P=H1(),W=b(f(P),2),J=f(W);{var T=w=>{var B=Vt("Select one or more menu files from the menu_inputs directory");M(w,B)},ne=w=>{var B=Vt("Upload and import menu files (PDF, JPG, PNG)");M(w,B)};X(J,w=>{C?w(T):w(ne,!1)})}var z=b(W,2);z.textContent="Max file size: 50MB";var j=b(z,2);{var Ee=w=>{var B=T1();mn(B,Q=>g(S,Q),()=>t(S)),ae("change",B,_),M(w,B)};X(j,w=>{p&&w(Ee)})}var ke=b(j,2);{var _e=w=>{var B=I1();M(w,B)},me=w=>{var B=Be(),Q=we(B);{var oe=te=>{var ge=B1();M(te,ge)},re=te=>{var ge=Be(),se=we(ge);{var ue=ve=>{var Le=D1(),Se=f(Le),Te=f(Se),je=b(Se,2);ce(()=>ie(Te,`Error loading files: ${t(u)??""}`)),ae("click",je,h),M(ve,Le)},fe=ve=>{var Le=q1(),Se=f(Le);{var Te=Ue=>{var Ve=$1(),xe=f(Ve),ye=b(f(xe),2);ae("click",ye,E),M(Ue,Ve)},je=Ue=>{var Ve=Be(),xe=we(Ve);{var ye=N=>{var Z=R1();M(N,Z)},le=N=>{var Z=V1(),de=we(Z),be=f(de),ze=f(be);{var ot=Fe=>{var et=O1(),Ct=f(et);ce(()=>ie(Ct,`${t(s).size??""} of ${t(r).length??""} files selected`)),M(Fe,et)},lt=Fe=>{var et=P1(),Ct=f(et);ce(rt=>ie(Ct,`${rt??""} of ${t(l).length??""} files selected`),[()=>t(l).filter(rt=>rt.selected).length]),M(Fe,et)};X(ze,Fe=>{C?Fe(ot):Fe(lt,!1)})}var Je=b(be,2),at=f(Je);{var wt=Fe=>{var et=N1();ae("click",et,E),M(Fe,et)};X(at,Fe=>{p&&Fe(wt)})}var dt=b(at,2),ct=b(dt,2),Ge=b(de,2),Ie=f(Ge);{var We=Fe=>{var et=Be(),Ct=we(et);Dt(Ct,1,()=>t(r),rt=>rt.path,(rt,Ke)=>{var Gt=j1();let Nt;var sn=f(Gt),Rt=f(sn),Wt=b(Rt,2),on=f(Wt),xt=f(on),Rn=b(on,2),ln=f(Rn),yn=f(ln),ca=b(ln,2),On=f(ca),Pn=b(Rn,2);{var Nn=Kt=>{var ft=F1();ft.textContent="File too large (max 50MB)",M(Kt,ft)};X(Pn,Kt=>{t(Ke).sizeValid||Kt(Nn)})}ce((Kt,ft,bn,ar)=>{Nt=tt(Gt,1,"file-item svelte-1wvon5f",null,Nt,Kt),Rt.disabled=!t(Ke).sizeValid,es(Rt,ft),ie(xt,t(Ke).name),ie(yn,bn),ie(On,`Modified: ${ar??""}`)},[()=>({invalid:!t(Ke).sizeValid,selected:t(s).has(t(Ke).path)}),()=>t(s).has(t(Ke).path),()=>y(t(Ke)),()=>d(t(Ke).lastModified)]),ae("change",Rt,()=>q(t(Ke))),M(rt,Gt)}),M(Fe,et)},ht=Fe=>{var et=Be(),Ct=we(et);Dt(Ct,3,()=>t(l),rt=>rt.name,(rt,Ke,Gt)=>{var Nt=Z1();let sn;var Rt=f(Nt),Wt=f(Rt),on=b(Wt,2),xt=f(on),Rn=f(xt),ln=b(xt,2),yn=f(ln),ca=f(yn),On=b(yn,2);{var Pn=ft=>{var bn=U1();M(ft,bn)},Nn=ft=>{var bn=z1();M(ft,bn)};X(On,ft=>{t(Ke).uploaded?ft(Pn):ft(Nn,!1)})}var Kt=b(Rt,2);ce(ft=>{sn=tt(Nt,1,"file-item svelte-1wvon5f",null,sn,ft),es(Wt,t(Ke).selected),ie(Rn,t(Ke).name),ie(ca,`${t(Ke).type??""} • ${t(Ke).size??""}MB`)},[()=>({selected:t(Ke).selected,uploaded:t(Ke).uploaded})]),ae("change",Wt,()=>q(t(Ke))),ae("click",Kt,()=>A(t(Gt))),M(rt,Nt)}),M(Fe,et)};X(Ie,Fe=>{C?Fe(We):Fe(ht,!1)})}var Tt=b(Ge,2),Cn=f(Tt),_n=f(Cn);ce((Fe,et,Ct,rt)=>{dt.disabled=Fe,ct.disabled=et,Cn.disabled=Ct,ie(_n,`Import Selected Files (${rt??""})`)},[()=>C?t(r).every(Fe=>!Fe.sizeValid):t(l).length===0,()=>D()===0,()=>D()===0,D]),ae("click",dt,H),ae("click",ct,v),ae("click",Cn,L),M(N,Z)};X(xe,N=>{C&&t(r).length===0?N(ye):N(le,!1)},!0)}M(Ue,Ve)};X(Se,Ue=>{p&&t(l).length===0?Ue(Te):Ue(je,!1)})}M(ve,Le)};X(se,ve=>{C&&t(u)?ve(ue):ve(fe,!1)},!0)}M(te,ge)};X(Q,te=>{C&&t(o)?te(oe):te(re,!1)},!0)}M(w,B)};X(ke,w=>{t(i)?w(_e):w(me,!1)})}M(e,P),yt()}var W1=U('<button class="download-btn svelte-1dlpwa7">📥 Download Export</button> <button class="reset-btn svelte-1dlpwa7">🔄 New Export</button>',1),K1=U('<button class="cancel-btn svelte-1dlpwa7">❌ Cancel</button>'),J1=U('<button class="export-btn svelte-1dlpwa7" disabled><!></button> <!>',1),Y1=U('<button class="export-btn svelte-1dlpwa7">🚀 Generate Export</button>'),X1=U('<div class="error-message svelte-1dlpwa7"> <button class="retry-btn svelte-1dlpwa7">Try Again</button></div>'),Q1=U('<div class="job-info svelte-1dlpwa7"><small> </small></div>'),e7=U('<div class="dsfinvk-exporter svelte-1dlpwa7"><h3 class="svelte-1dlpwa7">DSFinV-K Export</h3> <div class="date-range-picker svelte-1dlpwa7"><div class="date-input svelte-1dlpwa7"><label for="dsfinvk-start" class="svelte-1dlpwa7">Start Date:</label> <input type="date" id="dsfinvk-start" class="svelte-1dlpwa7"/></div> <div class="date-input svelte-1dlpwa7"><label for="dsfinvk-end" class="svelte-1dlpwa7">End Date:</label> <input type="date" id="dsfinvk-end" class="svelte-1dlpwa7"/></div></div> <div class="export-actions svelte-1dlpwa7"><!></div> <!> <!></div>');function t7(e,n){_t(n,!1);let a=K(new Date().toISOString().split("T")[0]),i=K(new Date().toISOString().split("T")[0]),r=K(!1),s=K(null),o=K(null),u=K(null),l=null,c=K(null);const C=typeof window<"u"&&window.location.hostname!=="localhost"&&window.location.hostname!=="127.0.0.1";async function p(){g(r,!0),g(s,null),g(u,null),g(c,null),he.addMessage({timestamp:new Date().toLocaleTimeString("en-GB",{hour:"2-digit",minute:"2-digit"}),type:"agent",message:`🚀 Starting DSFinV-K export for period ${t(a)} to ${t(i)}...`,style:"info"});try{C?await h():await S()}catch(z){he.addMessage({timestamp:new Date().toLocaleTimeString("en-GB",{hour:"2-digit",minute:"2-digit"}),type:"agent",message:`❌ DSFinV-K export failed: ${z.message}`,style:"error"}),g(s,"failed"),g(c,z.message)}finally{C||g(r,!1)}}async function S(){try{const z=await fetch("/api/export/dsfinvk/start",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({startDate:t(a),endDate:t(i)})});if(z.ok&&z.headers.get("content-type")?.includes("application/zip")){const j=await z.blob(),Ee=window.URL.createObjectURL(j),ke=`dsfinvk-export-${t(a)}-to-${t(i)}.zip`,_e=document.createElement("a");_e.href=Ee,_e.download=ke,document.body.appendChild(_e),_e.click(),document.body.removeChild(_e),window.URL.revokeObjectURL(Ee),he.addMessage({timestamp:new Date().toLocaleTimeString("en-GB",{hour:"2-digit",minute:"2-digit"}),type:"agent",message:`✅ DSFinV-K export complete! File downloaded as ${ke}`,style:"success"}),g(s,"complete")}else{const j=await z.json();if(!j.success)throw new Error(j.error||"Export failed")}}catch{const j=await Ce.send({command:"generateDsfinvkExport",payload:{startDate:t(a),endDate:t(i)}});if(j.status==="success"&&j.payload.success)he.addMessage({timestamp:new Date().toLocaleTimeString("en-GB",{hour:"2-digit",minute:"2-digit"}),type:"agent",message:`✅ DSFinV-K export complete! File available at: ${j.payload.path}`,style:"success"}),g(s,"complete");else throw new Error(j.payload?.message||j.error||"Unknown export error")}}async function h(){const j=await(await fetch("/api/export/dsfinvk/start",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({startDate:t(a),endDate:t(i)})})).json();if(!j.success)throw new Error(j.error||"Failed to start export job");g(o,j.jobId),g(s,j.status),he.addMessage({timestamp:new Date().toLocaleTimeString("en-GB",{hour:"2-digit",minute:"2-digit"}),type:"agent",message:`📊 Export job started (Job ID: ${t(o)}). Generating report...`,style:"info"}),_()}function _(){l&&clearInterval(l),l=setInterval(async()=>{try{const j=await(await fetch(`/api/export/dsfinvk/status/${t(o)}`,{credentials:"include"})).json();if(!j.success)throw new Error(j.error||"Failed to check job status");g(s,j.status.toLowerCase()),t(s)==="complete"?(clearInterval(l),l=null,g(u,j.downloadUrl),g(r,!1),he.addMessage({timestamp:new Date().toLocaleTimeString("en-GB",{hour:"2-digit",minute:"2-digit"}),type:"agent",message:"✅ DSFinV-K export complete! Ready for download.",style:"success"})):t(s)==="failed"?(clearInterval(l),l=null,g(r,!1),g(c,j.error||"Export job failed"),he.addMessage({timestamp:new Date().toLocaleTimeString("en-GB",{hour:"2-digit",minute:"2-digit"}),type:"agent",message:`❌ DSFinV-K export failed: ${t(c)}`,style:"error"})):t(s)==="processing"&&he.addMessage({timestamp:new Date().toLocaleTimeString("en-GB",{hour:"2-digit",minute:"2-digit"}),type:"agent",message:"⚙️ Export job is processing...",style:"info"})}catch(z){console.error("Error polling job status:",z),he.addMessage({timestamp:new Date().toLocaleTimeString("en-GB",{hour:"2-digit",minute:"2-digit"}),type:"agent",message:`⚠️ Error checking export status: ${z.message}`,style:"warning"})}},3e3)}function E(){t(u)&&(window.open(t(u),"_blank"),he.addMessage({timestamp:new Date().toLocaleTimeString("en-GB",{hour:"2-digit",minute:"2-digit"}),type:"agent",message:"📥 Download initiated for DSFinV-K export.",style:"success"}))}function A(){l&&(clearInterval(l),l=null),g(r,!1),g(s,null),g(o,null),g(u,null),g(c,null)}Ws(()=>{l&&clearInterval(l)}),At();var q=e7(),H=b(f(q),2),v=f(H),D=b(f(v),2),L=b(v,2),y=b(f(L),2),d=b(H,2),I=f(d);{var Y=z=>{var j=W1(),Ee=we(j),ke=b(Ee,2);ae("click",Ee,E),ae("click",ke,A),M(z,j)},P=z=>{var j=Be(),Ee=we(j);{var ke=me=>{var w=J1(),B=we(w),Q=f(B);{var oe=se=>{var ue=Vt("⏳ Queued...");M(se,ue)},re=se=>{var ue=Be(),fe=we(ue);{var ve=Se=>{var Te=Vt("⚙️ Processing...");M(Se,Te)},Le=Se=>{var Te=Vt("🔄 Generating...");M(Se,Te)};X(fe,Se=>{t(s)==="processing"?Se(ve):Se(Le,!1)},!0)}M(se,ue)};X(Q,se=>{t(s)==="pending"?se(oe):se(re,!1)})}var te=b(B,2);{var ge=se=>{var ue=K1();ae("click",ue,A),M(se,ue)};X(te,se=>{C&&se(ge)})}M(me,w)},_e=me=>{var w=Y1();ae("click",w,p),M(me,w)};X(Ee,me=>{t(r)||t(s)==="pending"||t(s)==="processing"?me(ke):me(_e,!1)},!0)}M(z,j)};X(I,z=>{t(s)==="complete"&&t(u)?z(Y):z(P,!1)})}var W=b(d,2);{var J=z=>{var j=X1(),Ee=f(j),ke=b(Ee);ce(()=>ie(Ee,`❌ Export failed: ${t(c)??""} `)),ae("click",ke,A),M(z,j)};X(W,z=>{t(s)==="failed"&&t(c)&&z(J)})}var T=b(W,2);{var ne=z=>{var j=Q1(),Ee=f(j),ke=f(Ee);ce(()=>ie(ke,`Job ID: ${t(o)??""}`)),M(z,j)};X(T,z=>{C&&t(o)&&z(ne)})}ce(()=>{D.disabled=t(r),y.disabled=t(r)}),Yt(D,()=>t(a),z=>g(a,z)),Yt(y,()=>t(i),z=>g(i,z)),M(e,q),yt()}var n7=U('<div class="control-center-overlay svelte-mpduov"><div class="control-center-panel svelte-mpduov"><div class="panel-header svelte-mpduov"><h2 class="svelte-mpduov">Control Center</h2> <button class="close-btn svelte-mpduov">×</button></div> <div class="panel-content svelte-mpduov"><div class="section svelte-mpduov"><h3 class="svelte-mpduov">System Time</h3> <div class="time-display svelte-mpduov"> </div> <p class="time-description svelte-mpduov">Current system time. Time synchronization is managed automatically.</p></div> <div class="section svelte-mpduov"><h3 class="svelte-mpduov">Language & Region</h3> <div class="locale-settings svelte-mpduov"><label for="locale-select" class="locale-label svelte-mpduov">Display Locale:</label> <select id="locale-select" class="locale-select svelte-mpduov"><option class="svelte-mpduov">Deutsch (Deutschland)</option><option class="svelte-mpduov">English (United States)</option><option class="svelte-mpduov">English (United Kingdom)</option></select></div> <p class="locale-description svelte-mpduov">Changes how numbers, currencies, and dates are displayed in the interface.</p></div> <div class="section svelte-mpduov"><!></div> <div class="section svelte-mpduov"><!></div> <div class="section svelte-mpduov"><h3 class="svelte-mpduov">System Information</h3> <div class="system-info svelte-mpduov"><div class="info-item svelte-mpduov"><span class="label svelte-mpduov">Status:</span> <span class="value connected svelte-mpduov">Connected</span></div> <div class="info-item svelte-mpduov"><span class="label svelte-mpduov">Mode:</span> <span class="value svelte-mpduov">Development</span></div></div></div></div></div></div>');function a7(e,n){_t(n,!1);const[a,i]=Ma(),r=()=>ut(Nr,"$controlCenterVisible",a),s=()=>ut(Js,"$currentTime",a),o=()=>ut(ia,"$localeStore",a);$n();function u(){Ul()}function l(E){return E.toLocaleTimeString("de-DE",{hour:"2-digit",minute:"2-digit"})}function c(){u()}function C(E){const A=E.target.value;el(A)}function p(E){E.key==="Escape"&&u()}At();var S=Be();ae("keydown",ba,p);var h=we(S);{var _=E=>{var A=n7(),q=f(A),H=f(q),v=b(f(H),2),D=b(H,2),L=f(D),y=b(f(L),2),d=f(y),I=b(L,2),Y=b(f(I),2),P=b(f(Y),2);ce(()=>{o(),$s(()=>{})});var W=f(P);W.value=W.__value="de-DE";var J=b(W);J.value=J.__value="en-US";var T=b(J);T.value=T.__value="en-GB";var ne=b(I,2),z=f(ne);G1(z,{$$events:{close:c}});var j=b(ne,2),Ee=f(j);t7(Ee,{}),ce(ke=>ie(d,ke),[()=>l(s())]),ae("click",v,u),Zs(P,o,ke=>Io(ia,ke)),ae("change",P,C),ae("click",A,To(u)),M(E,A)};X(h,E=>{r()&&E(_)})}M(e,S),yt(),i()}var r7=U('<main class="pos-grid svelte-1ji6e50"><div class="grid-item-display svelte-1ji6e50"><!></div> <div class="grid-selection-area svelte-1ji6e50"><!></div></main> <!>',1);function s7(e,n){_t(n,!1);let a=K(),i=K(!1);nn(async()=>{await An.checkSession();const h=Ce.subscribe(_=>{_.lastMessage?.command==="sessionEstablished"&&(console.log("Demo mode: Received session established message"),An.establishSession(_.lastMessage.payload))});return()=>{h()}});function r(h){g(i,h.detail)}function s(){t(a)&&typeof t(a).getIsAtBottom=="function"&&(t(a).getIsAtBottom()&&typeof t(a).cycleViews=="function"?t(a).cycleViews():typeof t(a).scrollToBottom=="function"&&t(a).scrollToBottom())}At();var o=r7(),u=we(o),l=f(u),c=f(l);mn(Fl(c,{$$events:{scrollstate:r},$$legacy:!0}),h=>g(a,h),()=>t(a));var C=b(l,2),p=f(C);A1(p,{handleSmartAction:s,get isAtBottom(){return t(i)},get consoleViewComponent(){return t(a)}});var S=b(u,2);a7(S,{}),M(e,o),yt()}window.onerror=function(e,n,a,i,r){return ee("ERROR","Unhandled Frontend Exception",{type:"window.onerror",message:e,source:n,lineno:a,colno:i,error:r?r.stack:"N/A"}),!0};window.addEventListener("unhandledrejection",e=>{ee("ERROR","Unhandled Promise Rejection",{type:"unhandledrejection",reason:e.reason?e.reason.message||e.reason:"No reason provided",stack:e.reason?e.reason.stack:"N/A"})});po(s7,{target:document.getElementById("app")});
